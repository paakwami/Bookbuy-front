function _classCallCheck(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,a){for(var t=0;t<a.length;t++){var c=a[t];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(e,c.key,c)}}function _createClass(e,a,t){return a&&_defineProperties(e.prototype,a),t&&_defineProperties(e,t),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{jEVh:function(e,a,t){"use strict";t.r(a);var c,n,i=t("ofXK"),r=t("tyNb"),o=t("3Pt+"),s=t("YUcS"),l=t("lDzL"),m=t("LPYB"),d=t("7pIB"),u=t("aYsj"),b=t("0Lhs"),g=t("PCNd"),p=t("zMWy"),f=t("qP9D"),h=t("GmJt"),v=t("+nCT"),y=t("fXoL"),x=((c=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"getDataConf",value:function(){return[{prop:"id"},{prop:"name",name:"Name"}]}},{key:"getAll",value:function(){return[{id:0,age:40,name:"Mclean Brady",gender:"male",company:"JAMNATION",email:"mcleanbrady@jamnation.com",phone:"+1 (875) 472-2061",registered:"2014-10-20T04:54:00 -06:00"},{id:1,age:39,name:"Dillon Ruiz",gender:"male",company:"ACRODANCE",email:"dillonruiz@acrodance.com",phone:"+1 (858) 562-2261",registered:"2016-08-07T12:15:31 -06:00"},{id:2,age:39,name:"Robyn Knox",gender:"female",company:"GLUID",email:"robynknox@gluid.com",phone:"+1 (826) 491-3098",registered:"2017-02-12T02:43:39 -06:00"},{id:3,age:32,name:"Santana Wagner",gender:"male",company:"INTRADISK",email:"santanawagner@intradisk.com",phone:"+1 (841) 550-2276",registered:"2016-03-28T11:22:15 -06:00"},{id:4,age:34,name:"Jennie Branch",gender:"female",company:"VERAQ",email:"jenniebranch@veraq.com",phone:"+1 (895) 483-3982",registered:"2015-03-16T01:30:06 -06:00"},{id:5,age:39,name:"Farrell Preston",gender:"male",company:"HONOTRON",email:"farrellpreston@honotron.com",phone:"+1 (993) 534-2843",registered:"2015-08-14T09:07:47 -06:00"},{id:6,age:38,name:"Garner Reyes",gender:"male",company:"VIOCULAR",email:"garnerreyes@viocular.com",phone:"+1 (973) 495-3873",registered:"2016-03-23T03:47:23 -06:00"},{id:7,age:32,name:"Ella Boone",gender:"female",company:"ARCHITAX",email:"ellaboone@architax.com",phone:"+1 (945) 491-2580",registered:"2015-07-01T09:35:10 -06:00"},{id:8,age:30,name:"Kathryn Owens",gender:"female",company:"CYCLONICA",email:"kathrynowens@cyclonica.com",phone:"+1 (978) 598-2767",registered:"2014-03-11T11:38:12 -06:00"},{id:9,age:22,name:"Byers Santana",gender:"male",company:"KAGGLE",email:"byerssantana@kaggle.com",phone:"+1 (984) 546-3400",registered:"2015-08-17T02:48:09 -06:00"},{id:10,age:30,name:"Nina Middleton",gender:"female",company:"ZINCA",email:"ninamiddleton@zinca.com",phone:"+1 (829) 553-2060",registered:"2014-12-20T09:53:27 -06:00"},{id:11,age:38,name:"Nixon Morrow",gender:"male",company:"CUBIX",email:"nixonmorrow@cubix.com",phone:"+1 (825) 501-3712",registered:"2014-09-10T10:23:34 -06:00"},{id:12,age:28,name:"Bonita Pate",gender:"female",company:"MAGNEATO",email:"bonitapate@magneato.com",phone:"+1 (808) 497-3968",registered:"2016-01-20T02:45:43 -06:00"},{id:13,age:30,name:"Amy Hyde",gender:"female",company:"UNDERTAP",email:"amyhyde@undertap.com",phone:"+1 (867) 555-2669",registered:"2015-04-12T08:39:31 -06:00"},{id:14,age:20,name:"Cortez Camacho",gender:"male",company:"IDEGO",email:"cortezcamacho@idego.com",phone:"+1 (986) 546-3364",registered:"2014-08-21T11:00:20 -06:00"},{id:15,age:29,name:"Castaneda Armstrong",gender:"male",company:"INTERFIND",email:"castanedaarmstrong@interfind.com",phone:"+1 (975) 557-2651",registered:"2014-11-15T10:38:24 -06:00"},{id:16,age:37,name:"Liza West",gender:"female",company:"COWTOWN",email:"lizawest@cowtown.com",phone:"+1 (852) 415-2358",registered:"2017-05-06T09:46:03 -06:00"},{id:17,age:37,name:"Roth Baird",gender:"male",company:"RODEMCO",email:"rothbaird@rodemco.com",phone:"+1 (840) 417-3313",registered:"2015-04-18T10:58:50 -06:00"},{id:18,age:26,name:"Alexis Blackburn",gender:"female",company:"PREMIANT",email:"alexisblackburn@premiant.com",phone:"+1 (957) 576-2362",registered:"2014-08-08T12:59:38 -06:00"},{id:19,age:35,name:"Sadie Tillman",gender:"female",company:"DUOFLEX",email:"sadietillman@duoflex.com",phone:"+1 (843) 499-3330",registered:"2016-02-21T09:25:03 -06:00"},{id:20,age:27,name:"Sharron Conley",gender:"female",company:"QUARMONY",email:"sharronconley@quarmony.com",phone:"+1 (951) 459-2465",registered:"2014-10-19T06:04:36 -06:00"},{id:21,age:27,name:"Jordan Mccoy",gender:"male",company:"ACCUSAGE",email:"jordanmccoy@accusage.com",phone:"+1 (825) 568-3296",registered:"2017-01-27T01:53:02 -06:00"},{id:22,age:35,name:"Rene House",gender:"female",company:"INSURETY",email:"renehouse@insurety.com",phone:"+1 (838) 578-3190",registered:"2015-11-07T10:07:58 -06:00"},{id:23,age:38,name:"Bernice Berry",gender:"female",company:"ROCKYARD",email:"berniceberry@rockyard.com",phone:"+1 (885) 466-2145",registered:"2014-04-17T07:43:02 -06:00"},{id:24,age:30,name:"Bowen Beach",gender:"male",company:"TETRATREX",email:"bowenbeach@tetratrex.com",phone:"+1 (843) 493-3197",registered:"2015-07-27T03:38:33 -06:00"},{id:25,age:31,name:"Monica Leblanc",gender:"female",company:"TALENDULA",email:"monicaleblanc@talendula.com",phone:"+1 (911) 524-2349",registered:"2016-04-10T08:33:17 -06:00"},{id:26,age:36,name:"Lina Rivas",gender:"female",company:"BOINK",email:"linarivas@boink.com",phone:"+1 (983) 572-2470",registered:"2014-08-28T09:44:32 -06:00"},{id:27,age:25,name:"Joyce Yang",gender:"female",company:"SPORTAN",email:"joyceyang@sportan.com",phone:"+1 (807) 491-3917",registered:"2015-07-22T12:58:31 -06:00"},{id:28,age:20,name:"Lana Joseph",gender:"female",company:"BOLAX",email:"lanajoseph@bolax.com",phone:"+1 (942) 467-2363",registered:"2016-10-30T06:13:50 -06:00"},{id:29,age:20,name:"Jimenez Guerrero",gender:"male",company:"INSURON",email:"jimenezguerrero@insuron.com",phone:"+1 (991) 585-3706",registered:"2016-09-15T01:35:16 -06:00"},{id:30,age:35,name:"Williams Bentley",gender:"male",company:"ZEAM",email:"williamsbentley@zeam.com",phone:"+1 (837) 490-2610",registered:"2014-01-06T01:04:11 -06:00"},{id:31,age:27,name:"Doreen Garrett",gender:"female",company:"ENERSAVE",email:"doreengarrett@enersave.com",phone:"+1 (920) 522-2847",registered:"2017-01-25T03:24:47 -06:00"},{id:32,age:34,name:"Shaw Cannon",gender:"male",company:"EBIDCO",email:"shawcannon@ebidco.com",phone:"+1 (903) 530-2676",registered:"2014-04-11T04:49:08 -06:00"},{id:33,age:25,name:"Sonya Skinner",gender:"female",company:"EXOSWITCH",email:"sonyaskinner@exoswitch.com",phone:"+1 (923) 428-3014",registered:"2014-02-09T11:59:54 -06:00"},{id:34,age:27,name:"Todd Potter",gender:"male",company:"MUSIX",email:"toddpotter@musix.com",phone:"+1 (817) 491-2268",registered:"2015-04-06T11:10:47 -06:00"},{id:35,age:21,name:"Celina Rose",gender:"female",company:"TWIIST",email:"celinarose@twiist.com",phone:"+1 (863) 599-2063",registered:"2015-09-04T07:59:29 -06:00"},{id:36,age:40,name:"Ingrid Day",gender:"female",company:"ZBOO",email:"ingridday@zboo.com",phone:"+1 (921) 447-2312",registered:"2016-10-01T08:26:07 -06:00"},{id:37,age:24,name:"Lynch Stark",gender:"male",company:"PYRAMIA",email:"lynchstark@pyramia.com",phone:"+1 (995) 431-2354",registered:"2014-01-26T11:38:48 -06:00"},{id:38,age:29,name:"Helga Mendez",gender:"female",company:"COMVEYER",email:"helgamendez@comveyer.com",phone:"+1 (897) 418-3815",registered:"2015-10-03T08:58:45 -06:00"},{id:39,age:30,name:"Corinne Calhoun",gender:"female",company:"ADORNICA",email:"corinnecalhoun@adornica.com",phone:"+1 (841) 564-3617",registered:"2016-05-24T10:42:36 -06:00"},{id:40,age:40,name:"Winifred Conrad",gender:"female",company:"SATIANCE",email:"winifredconrad@satiance.com",phone:"+1 (885) 533-2416",registered:"2017-03-01T06:12:08 -06:00"},{id:41,age:27,name:"Lawanda Stevenson",gender:"female",company:"ZILLACTIC",email:"lawandastevenson@zillactic.com",phone:"+1 (823) 535-3187",registered:"2014-07-07T05:26:22 -06:00"},{id:42,age:30,name:"Kirsten Long",gender:"female",company:"IMAGEFLOW",email:"kirstenlong@imageflow.com",phone:"+1 (809) 592-2264",registered:"2014-05-08T07:41:56 -06:00"},{id:43,age:39,name:"Summer Farley",gender:"female",company:"ENTOGROK",email:"summerfarley@entogrok.com",phone:"+1 (814) 490-3578",registered:"2016-10-28T10:02:34 -06:00"},{id:44,age:31,name:"Mendoza Randall",gender:"male",company:"COREPAN",email:"mendozarandall@corepan.com",phone:"+1 (846) 501-2860",registered:"2015-12-14T12:58:18 -06:00"},{id:45,age:27,name:"Marcy Doyle",gender:"female",company:"VORATAK",email:"marcydoyle@voratak.com",phone:"+1 (848) 411-2728",registered:"2014-02-12T10:46:27 -06:00"},{id:46,age:30,name:"Burch Walker",gender:"male",company:"COMVEYOR",email:"burchwalker@comveyor.com",phone:"+1 (968) 445-2104",registered:"2014-01-07T05:16:30 -06:00"},{id:47,age:31,name:"Solis Lester",gender:"male",company:"MACRONAUT",email:"solislester@macronaut.com",phone:"+1 (857) 422-3242",registered:"2016-10-20T09:40:51 -06:00"},{id:48,age:20,name:"Lorene Mooney",gender:"female",company:"ORGANICA",email:"lorenemooney@organica.com",phone:"+1 (853) 406-2716",registered:"2015-09-17T03:54:41 -06:00"},{id:49,age:34,name:"Rhodes Vega",gender:"male",company:"CHILLIUM",email:"rhodesvega@chillium.com",phone:"+1 (863) 577-3562",registered:"2016-06-15T05:36:10 -06:00"},{id:50,age:28,name:"Pruitt Merrill",gender:"male",company:"KYAGURU",email:"pruittmerrill@kyaguru.com",phone:"+1 (910) 585-3659",registered:"2017-04-02T09:36:00 -06:00"},{id:51,age:33,name:"Bernadine Hart",gender:"female",company:"BITTOR",email:"bernadinehart@bittor.com",phone:"+1 (906) 446-3518",registered:"2015-11-10T07:45:59 -06:00"},{id:52,age:22,name:"Carver Mckenzie",gender:"male",company:"LOCAZONE",email:"carvermckenzie@locazone.com",phone:"+1 (803) 407-3142",registered:"2015-06-24T07:16:02 -06:00"},{id:53,age:27,name:"Dean Cobb",gender:"male",company:"ASSISTIA",email:"deancobb@assistia.com",phone:"+1 (877) 539-3346",registered:"2016-12-02T01:14:47 -06:00"},{id:54,age:32,name:"Camacho Robinson",gender:"male",company:"INSURITY",email:"camachorobinson@insurity.com",phone:"+1 (929) 430-3079",registered:"2016-12-14T08:59:33 -06:00"},{id:55,age:36,name:"Nancy Rodgers",gender:"female",company:"COSMOSIS",email:"nancyrodgers@cosmosis.com",phone:"+1 (873) 489-2643",registered:"2014-08-21T02:19:28 -06:00"},{id:56,age:27,name:"June Henry",gender:"female",company:"PETIGEMS",email:"junehenry@petigems.com",phone:"+1 (808) 536-2445",registered:"2014-03-28T08:36:27 -06:00"},{id:57,age:26,name:"Rochelle Simmons",gender:"female",company:"DANJA",email:"rochellesimmons@danja.com",phone:"+1 (936) 563-3886",registered:"2015-12-07T08:01:18 -06:00"},{id:58,age:32,name:"Alice Thornton",gender:"female",company:"ISOSURE",email:"alicethornton@isosure.com",phone:"+1 (962) 560-2318",registered:"2015-06-07T08:09:50 -06:00"},{id:59,age:39,name:"Clara Downs",gender:"female",company:"ZANILLA",email:"claradowns@zanilla.com",phone:"+1 (977) 595-2657",registered:"2015-06-14T02:33:33 -06:00"}]}}]),e}()).\u0275fac=function(e){return new(e||c)},c.\u0275prov=y.Rb({token:c,factory:c.\u0275fac,providedIn:"root"}),c),P=t("FHx2"),w=t("nm5K"),k=((n=function(){function e(a,t,c){_classCallCheck(this,e),this.router=a,this.crudeService=t,this.data=c,this.data.selectedagent=this.selectedagent}return _createClass(e,[{key:"resolve",value:function(e,a){var t=this;return new Promise((function(e,a){Promise.all([t.getPaymentMethods(),t.getPayments(),t.getAgentDetails()]).then((function(){e()}),a)}))}},{key:"getPaymentMethods",value:function(){var e=this;return new Promise((function(a,t){e.data.paymentmethods?(e.paymentmethods=e.data.paymentmethods,a(e.paymentmethods)):e.crudeService.getPaymentMethod().subscribe((function(t){e.paymentmethods=t.data,e.data.paymentmethods=t.data,a(e.paymentmethods)}),t)}))}},{key:"getPayments",value:function(){var e=this;return new Promise((function(a,t){e.crudeService.getPayments(e.selectedagent.id).subscribe((function(t){e.payments=t.data,a(e.payments)}),t)}))}},{key:"getAgentDetails",value:function(){var e=this;return new Promise((function(a,t){e.crudeService.getAgentDetails(e.selectedagent).subscribe((function(t){e.agentdetails=t,a(e.agentdetails)}),t)}))}}]),e}()).\u0275fac=function(e){return new(e||n)(y.fc(r.g),y.fc(w.a),y.fc(P.a))},n.\u0275prov=y.Rb({token:n,factory:n.\u0275fac,providedIn:"root"}),n),G=t("3sEA"),C=t("0IaG"),T=t("5eHb"),I=t("bTqV"),A=t("NFeN"),R=t("Wp6s"),S=t("XiUz"),N=t("kmnG"),O=t("qFsG"),F=t("7EHt");function _(e,a){if(1&e){var t=y.cc();y.bc(0,"div"),y.bc(1,"a"),y.bc(2,"ngx-datatable",26),y.jc("activate",(function(e){return y.Gc(t),y.nc().onActivate(e)})),y.ac(),y.ac(),y.ac()}if(2&e){var c=y.nc();y.Gb(2),y.tc("columnMode","force")("headerHeight",50)("footerHeight",50)("rowHeight",50)("limit",8)("rows",c.rows)("columns",c.columns)}}var M,L=function(){return{scale:".9",delay:"200ms"}},W=function(e){return{value:"*",params:e}},E=function(){return{delay:"400ms",scale:".9"}},D=((M=function(){function e(a,t,c,n,i,r,o,s,l){var m=this;_classCallCheck(this,e),this.dialog=a,this.data=t,this.state=c,this.service=n,this.agent=i,this.router=r,this.crudService=o,this.loader=s,this.toastr=l,this.rows=[],this.columns=[],this.temp=[],this.role=this.state.role,this.state.user.subscribe((function(e){m.user=e})),this.userdetails=this.data.userdetails}return _createClass(e,[{key:"ngOnInit",value:function(){this.approvedpartners=this.rows=this.temp=this.data.approvedpartners,this.agents=this.data.agents,this.columns=this.service.getDataConf()}},{key:"ngOnDestroy",value:function(){}},{key:"onActivate",value:function(e){"click"==e.type&&(this.agent.selectedagent=e.row,this.router.navigate(["/invoice/agentsummary"]))}},{key:"updateFilter",value:function(e){var a=e.target.value.toLowerCase(),t=Object.keys(this.temp[0]);if(t.splice(t.length-1),t.length){var c=this.temp.filter((function(e){for(var c=0;c<=t.length;c++){var n=t[c];if(e[n]&&e[n].toString().toLowerCase().indexOf(a)>-1)return!0}}));this.rows=c}}},{key:"requestAgent",value:function(){var e=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;this.dialog.open(v.a,{width:"720px",disableClose:!0,data:{agents:this.agents}}).afterClosed().subscribe((function(c){c&&(e.loader.open(),t?e.crudService.userRequest(c).subscribe((function(a){e.loader.close(),e.approvedpartners=e.approvedpartners.concat([a.approvedpartners]),e.data.approvedpartners=e.approvedpartners,e.toastr.success("Success",a.message)}),(function(a){e.loader.close(),e.toastr.error("Sorry",a.error)})):e.crudService.updateItem(a._id,c).subscribe((function(a){e.loader.close()})))}))}}]),e}()).\u0275fac=function(e){return new(e||M)(y.Vb(C.b),y.Vb(P.a),y.Vb(f.a),y.Vb(x),y.Vb(k),y.Vb(r.g),y.Vb(w.a),y.Vb(G.a),y.Vb(T.b))},M.\u0275cmp=y.Pb({type:M,selectors:[["app-sale-overview"]],decls:98,vars:18,consts:[[1,"handle"],["mat-raised-button","","color","primary",1,"mb-05",3,"click"],[1,"p-0"],["fxLayout","row wrap"],["fxFlex","100","fxFlex.gt-sm","20","fxFlex.sm","50"],[1,"text-center","pt-1","pb-1","border-right-light"],[1,"text-blue"],[1,"m-0"],[1,"m-0","text-muted"],[1,"text-orange"],[1,"text-center","pt-1","pb-1"],["fxFlex","100","fxFlex.gt-sm","66.67","fxFlex.sm","50"],[1,"margin-333",2,"width","100%"],["matInput","","placeholder","Search for an Agent","value","",3,"keyup"],[4,"ngIf"],["fxFlex","100","fxFlex.gt-sm","33.3","fxFlex.sm","50"],[1,"m-333"],["multi","false"],["expanded","true"],[1,"border-bottom","pb-1","mb-1"],["fxLyout","row wrap",1,"text-blue","font-weight-bold"],["fxFlex",""],["fxLyout","row wrap",1,"text-muted"],[1,"text-green"],[1,"text-red"],[1,""],[1,"material","bg-white",3,"columnMode","headerHeight","footerHeight","rowHeight","limit","rows","columns","activate"]],template:function(e,a){1&e&&(y.bc(0,"div",0),y.bc(1,"button",1),y.jc("click",(function(e){return a.requestAgent({},!0)})),y.Pc(2," Request for Agent "),y.bc(3,"mat-icon"),y.Pc(4," group_add"),y.ac(),y.ac(),y.ac(),y.bc(5,"mat-card",2),y.bc(6,"div",3),y.bc(7,"div",4),y.bc(8,"div",5),y.bc(9,"mat-icon",6),y.Pc(10,"account_balance_wallet"),y.ac(),y.bc(11,"h4",7),y.Pc(12),y.ac(),y.bc(13,"small",8),y.Pc(14,"Sold To Agents"),y.ac(),y.ac(),y.ac(),y.bc(15,"div",4),y.bc(16,"div",5),y.bc(17,"mat-icon",9),y.Pc(18,"attach_money"),y.ac(),y.bc(19,"h4",7),y.Pc(20),y.ac(),y.bc(21,"small",8),y.Pc(22,"Sold By Agents"),y.ac(),y.ac(),y.ac(),y.bc(23,"div",4),y.bc(24,"div",5),y.bc(25,"mat-icon",6),y.Pc(26,"business_center"),y.ac(),y.bc(27,"h4",7),y.Pc(28),y.ac(),y.bc(29,"small",8),y.Pc(30,"Received from Agents"),y.ac(),y.ac(),y.ac(),y.bc(31,"div",4),y.bc(32,"div",5),y.bc(33,"mat-icon",6),y.Pc(34,"add"),y.ac(),y.bc(35,"h4",7),y.Pc(36),y.ac(),y.bc(37,"small",8),y.Pc(38,"Received but with Agents"),y.ac(),y.ac(),y.ac(),y.bc(39,"div",4),y.bc(40,"div",10),y.bc(41,"mat-icon",9),y.Pc(42,"compare_arrows"),y.ac(),y.bc(43,"h4",7),y.Pc(44),y.ac(),y.bc(45,"small",8),y.Pc(46,"In debt with Retailers"),y.ac(),y.ac(),y.ac(),y.ac(),y.ac(),y.bc(47,"div",3),y.bc(48,"div",11),y.bc(49,"mat-form-field",12),y.bc(50,"input",13),y.jc("keyup",(function(e){return a.updateFilter(e)})),y.ac(),y.ac(),y.Nc(51,_,3,7,"div",14),y.ac(),y.bc(52,"div",15),y.bc(53,"div",16),y.bc(54,"mat-accordion",17),y.bc(55,"mat-expansion-panel",18),y.bc(56,"mat-expansion-panel-header"),y.bc(57,"mat-panel-title"),y.Pc(58," Year: 2020/2021 "),y.ac(),y.ac(),y.bc(59,"div",19),y.bc(60,"div",20),y.bc(61,"span"),y.Pc(62,"Total Sale"),y.ac(),y.Wb(63,"span",21),y.bc(64,"span"),y.Pc(65,"8897.45"),y.ac(),y.ac(),y.bc(66,"div",22),y.bc(67,"small"),y.Pc(68,"As At"),y.ac(),y.Wb(69,"span",21),y.bc(70,"small",23),y.Pc(71,"530(+3.73%)"),y.ac(),y.ac(),y.ac(),y.bc(72,"div",19),y.bc(73,"div",20),y.bc(74,"span"),y.Pc(75,"Total Received"),y.ac(),y.Wb(76,"span",21),y.bc(77,"span"),y.Pc(78,"3829.23"),y.ac(),y.ac(),y.bc(79,"div",22),y.bc(80,"small"),y.Pc(81,"As At"),y.ac(),y.Wb(82,"span",21),y.bc(83,"small",24),y.Pc(84,"430(-1.43%)"),y.ac(),y.ac(),y.ac(),y.bc(85,"div",25),y.bc(86,"div",20),y.bc(87,"span"),y.Pc(88,"Total Indebt"),y.ac(),y.Wb(89,"span",21),y.bc(90,"span"),y.Pc(91,"5836.79"),y.ac(),y.ac(),y.bc(92,"div",22),y.bc(93,"small"),y.Pc(94,"As At"),y.ac(),y.Wb(95,"span",21),y.bc(96,"small",23),y.Pc(97,"210(+2.23%)"),y.ac(),y.ac(),y.ac(),y.ac(),y.ac(),y.ac(),y.ac(),y.ac()),2&e&&(y.Gb(5),y.tc("@animate",y.yc(10,W,y.xc(9,L))),y.Gb(7),y.Qc(a.userdetails.sold_to_agents),y.Gb(8),y.Qc(a.userdetails.sold_by_agents),y.Gb(8),y.Qc(a.userdetails.received_from_agents),y.Gb(8),y.Qc(a.userdetails.received_but_with_agents),y.Gb(8),y.Qc(a.userdetails.indebt_with_retailers),y.Gb(4),y.tc("@animate",y.yc(13,W,y.xc(12,E))),y.Gb(3),y.tc("ngIf",a.approvedpartners),y.Gb(1),y.tc("@animate",y.yc(16,W,y.xc(15,E))))},directives:[I.b,A.a,R.a,S.c,S.a,N.b,O.b,i.m,F.a,F.c,F.d,F.e,l.c],styles:[".handle[_ngcontent-%COMP%]{bottom:30px}.handle[_ngcontent-%COMP%], .second[_ngcontent-%COMP%]{position:fixed;right:30px;z-index:99}.second[_ngcontent-%COMP%]{bottom:80px}.third[_ngcontent-%COMP%]{position:fixed;bottom:120px;right:30px;z-index:99}"],data:{animation:h.a}}),M),V=t("3kSh"),H=t("d3UM"),q=t("FKr1");function j(e,a){if(1&e&&(y.bc(0,"mat-option",13),y.Pc(1),y.ac()),2&e){var t=a.$implicit;y.tc("value",t.id),y.Gb(1),y.Rc(" ",t.name," ")}}var U,z=((U=function(){function e(a,t,c){_classCallCheck(this,e),this.data=a,this.dialogRef=t,this.fb=c}return _createClass(e,[{key:"ngOnInit",value:function(){this.paymentmethods=this.data.paymentmethods,this.selectedagent=this.data.selectedagent,this.itemForm=this.fb.group({amount:["",o.s.required],payment_method_id:["",o.s.required],agent_id:this.selectedagent.id})}},{key:"submit",value:function(){this.dialogRef.close(this.itemForm.value)}}]),e}()).\u0275fac=function(e){return new(e||U)(y.Vb(C.a),y.Vb(C.f),y.Vb(o.d))},U.\u0275cmp=y.Pb({type:U,selectors:[["app-makepayment-popup"]],decls:23,vars:4,consts:[["matDialogTitle",""],[3,"formGroup","ngSubmit"],["fxLayout","row wrap","fxLayout.lt-sm","column"],["fxFlex","100",1,"pr-1"],[1,"full-width"],["matInput","","name","amount","placeholder","Amount",3,"formControl"],["formControlName","payment_method_id","required",""],[3,"value",4,"ngFor","ngForOf"],["matSuffix","",1,"secondary-text"],["fxFlex","100",1,"mt-1"],["mat-raised-button","","color","primary",3,"disabled"],["fxFlex",""],["mat-button","","color","warn","type","button",3,"click"],[3,"value"]],template:function(e,a){1&e&&(y.bc(0,"h1",0),y.Pc(1,"Add A New Item"),y.ac(),y.bc(2,"form",1),y.jc("ngSubmit",(function(e){return a.submit()})),y.bc(3,"div",2),y.bc(4,"div",3),y.bc(5,"mat-form-field",4),y.Wb(6,"input",5),y.ac(),y.ac(),y.bc(7,"div",3),y.bc(8,"mat-form-field",4),y.bc(9,"mat-label"),y.Pc(10,"Payment Was Made Through"),y.ac(),y.bc(11,"mat-select",6),y.Nc(12,j,2,2,"mat-option",7),y.ac(),y.bc(13,"mat-icon",8),y.Pc(14,"outlined_flag"),y.ac(),y.bc(15,"mat-error"),y.Pc(16,"payment type is required!"),y.ac(),y.ac(),y.ac(),y.bc(17,"div",9),y.bc(18,"button",10),y.Pc(19,"Save"),y.ac(),y.Wb(20,"span",11),y.bc(21,"button",12),y.jc("click",(function(e){return a.dialogRef.close(!1)})),y.Pc(22,"Cancel"),y.ac(),y.ac(),y.ac(),y.ac()),2&e&&(y.Gb(2),y.tc("formGroup",a.itemForm),y.Gb(4),y.tc("formControl",a.itemForm.controls.amount),y.Gb(6),y.tc("ngForOf",a.paymentmethods),y.Gb(6),y.tc("disabled",a.itemForm.invalid))},directives:[C.g,o.t,o.n,o.h,S.c,S.a,N.b,O.b,o.b,o.m,o.f,N.e,H.a,o.g,o.r,i.l,A.a,N.f,N.a,I.b,q.p],styles:[""]}),U),B=t("dNgK"),K=t("STbY"),Y=t("f0Cb");function Q(e,a){if(1&e&&(y.bc(0,"div",37),y.bc(1,"mat-card",38),y.Wb(2,"img",46),y.Wb(3,"span",40),y.bc(4,"div"),y.bc(5,"p",41),y.Pc(6,"Current Balance"),y.ac(),y.bc(7,"span",42),y.Pc(8),y.bc(9,"span",43),y.Pc(10,"arrow_drop_down"),y.ac(),y.ac(),y.ac(),y.ac(),y.ac()),2&e){var t=y.nc(2);y.Gb(8),y.Qc(t.agentdetails.ledger.cbalance)}}function J(e,a){if(1&e&&(y.bc(0,"div",37),y.bc(1,"mat-card",38),y.Wb(2,"img",47),y.Wb(3,"span",40),y.bc(4,"div"),y.bc(5,"p",41),y.Pc(6,"Last Payment"),y.ac(),y.bc(7,"span",48),y.Pc(8),y.Wb(9,"span",43),y.ac(),y.ac(),y.ac(),y.ac()),2&e){var t=y.nc(2);y.Gb(8),y.Rc("GHC ",t.lastpayment.amount,"")}}var X=function(){return{delay:"600ms",scale:".9"}},$=function(e){return{value:"*",params:e}};function Z(e,a){if(1&e&&(y.bc(0,"div",6),y.Nc(1,Q,11,1,"div",36),y.Nc(2,J,10,1,"div",36),y.bc(3,"div",37),y.bc(4,"mat-card",38),y.Wb(5,"img",39),y.Wb(6,"span",40),y.bc(7,"div"),y.bc(8,"p",41),y.Pc(9,"Last Invoice"),y.ac(),y.bc(10,"span",42),y.Pc(11),y.Wb(12,"span",43),y.ac(),y.ac(),y.ac(),y.ac(),y.bc(13,"div",37),y.bc(14,"mat-card",38),y.Wb(15,"img",44),y.Wb(16,"span",40),y.bc(17,"div"),y.bc(18,"p",41),y.Pc(19,"Unpaid Invoice"),y.ac(),y.bc(20,"span",42),y.Pc(21,"$10 "),y.Wb(22,"span",43),y.ac(),y.ac(),y.ac(),y.ac(),y.bc(23,"div",37),y.bc(24,"mat-card",38),y.Wb(25,"img",45),y.Wb(26,"span",40),y.bc(27,"div"),y.bc(28,"p",41),y.Pc(29,"Unpaid Invoice"),y.ac(),y.bc(30,"span",42),y.Pc(31,"$80 "),y.Wb(32,"span",43),y.ac(),y.ac(),y.ac(),y.ac(),y.ac()),2&e){var t=y.nc();y.tc("@animate",y.yc(4,$,y.xc(3,X))),y.Gb(1),y.tc("ngIf",t.agentdetails.ledger.cbalance),y.Gb(10),y.Rc("GHC ",t.lastinvoice.after_discount," ")}}function ee(e,a){if(1&e&&(y.bc(0,"div",49),y.Wb(1,"img",50),y.Pc(2),y.ac()),2&e){var t=a.row;y.Gb(1),y.tc("src",t.icon,y.Ic),y.Gb(1),y.Rc(" ",null==t?null:t.total_sale," ")}}function ae(e,a){if(1&e&&y.Pc(0),2&e){var t=a.row;y.Rc(" ",null==t?null:t.discount," ")}}function te(e,a){if(1&e&&y.Pc(0),2&e){var t=a.row;y.Rc(" ",null==t?null:t.after_discount," ")}}function ce(e,a){if(1&e&&y.Pc(0),2&e){var t=a.row;y.Rc(" ",null==t?null:t.amount_paid," ")}}function ne(e,a){1&e&&(y.bc(0,"button",52),y.Pc(1,"unpaid"),y.ac())}function ie(e,a){1&e&&(y.bc(0,"button",52),y.Pc(1,"paid"),y.ac())}function re(e,a){if(1&e&&(y.Nc(0,ne,2,0,"button",51),y.Nc(1,ie,2,0,"button",51)),2&e){var t=a.row;y.tc("ngIf","0"==(null==t?null:t.completed)),y.Gb(1),y.tc("ngIf","1"==(null==t?null:t.completed))}}function oe(e,a){if(1&e&&y.Pc(0),2&e){var t=a.row;y.Rc(" ",null==t?null:t.payment_method," ")}}function se(e,a){if(1&e&&y.Pc(0),2&e){var t=a.row;y.Rc(" ",null==t?null:t.amount," ")}}function le(e,a){if(1&e&&(y.bc(0,"button",53),y.Pc(1),y.oc(2,"date"),y.ac()),2&e){var t=a.row;y.Gb(1),y.Qc(y.pc(2,1,null==t?null:t.made_on))}}var me,de=function(){return{delay:"800ms",scale:".9"}},ue=((me=function(){function e(a,t,c,n,i,r,o,s){_classCallCheck(this,e),this.agent=a,this.dialog=t,this.snack=c,this.crudService=n,this.confirmService=i,this.loader=r,this.data=o,this.toastr=s}return _createClass(e,[{key:"ngOnInit",value:function(){this.selectedagent=this.agent.selectedagent,this.paymentmethods=this.agent.paymentmethods,this.payments=this.agent.payments,this.agentdetails=this.agent.agentdetails,this.pop=this.agent.agentdetails,this.lastpayment=this.pop.payments,this.lastinvoice=this.pop.invoices,this.lastinvoice=this.lastinvoice[this.lastinvoice.length-1],this.lastpayment=this.lastpayment[this.lastpayment.length-1]}},{key:"openMakePayment",value:function(){var e=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;this.dialog.open(z,{width:"720px",disableClose:!0,data:{paymentmethods:this.paymentmethods,selectedagent:this.selectedagent}}).afterClosed().subscribe((function(c){c&&(e.loader.open(),t?e.crudService.addPayments(c).subscribe((function(a){e.loader.close(),e.payments=e.payments.concat([a.payment]),e.data.userdetails=a.userdetails,e.snack.open("New Payment Made","OK",{duration:4e3})}),(function(a){e.loader.close(),e.toastr.error("sorry",a.error)})):e.crudService.updateItem(a._id,c).subscribe((function(a){e.payments=a,e.loader.close(),e.snack.open("Member Updated!","OK",{duration:4e3})})))}))}}]),e}()).\u0275fac=function(e){return new(e||me)(y.Vb(k),y.Vb(C.b),y.Vb(B.a),y.Vb(w.a),y.Vb(V.a),y.Vb(G.a),y.Vb(P.a),y.Vb(T.b))},me.\u0275cmp=y.Pb({type:me,selectors:[["app-agent-summary"]],decls:77,vars:27,consts:[[1,"handle"],["routerLink","/invoice/newsale","mat-raised-button","","color","primary",1,"mb-05"],[1,"second"],["mat-raised-button","","color","accent",1,"mb-05",3,"click"],[1,"third"],["routerLink","/invoice/home","mat-raised-button","","color","warn",1,"mb-05"],["fxLayout","row wrap"],["fxFlex","100",1,"p-0","mb-1"],[1,"user-card","p-0"],[1,"mat-bg-primary"],[1,"card-title-text"],["href","",1,"toolbar-avatar","md","mr-1"],["alt","",3,"src"],["fxFlex",""],["mat-icon-button","",1,"",3,"matMenuTriggerFor"],[1,""],["userMenu","matMenu"],["mat-menu-item",""],[1,"user-details"],[1,"text-muted"],["fxLayout","row wrap",4,"ngIf"],["fxFlex","100","fxFlex.gt-sm","66.67"],[1,"p-0"],[1,"pl-1","pt-1","m-0"],[1,"material","ml-0","mr-0",3,"rows","columnMode","headerHeight","footerHeight","rowHeight"],["name","Total Sale",3,"flexGrow"],["ngx-datatable-cell-template",""],["name","Discount",3,"flexGrow"],["name","Value",3,"flexGrow"],["name","Amount Paid",3,"flexGrow"],["name","Status",3,"flexGrow"],["fxFlex","100","fxFlex.gt-sm","33.33"],[1,"ml-1","mt-1"],["name","Made At",3,"flexGrow"],["name","amount",3,"flexGrow"],["name","Date",3,"flexGrow"],["fxFlex","100","fxFlex.gt-sm","20","fxFlex.sm","50",4,"ngIf"],["fxFlex","100","fxFlex.gt-sm","20","fxFlex.sm","50"],["fxLayout","row wrap","fxLayoutAlign","start center",1,"rounded-circle"],["src","assets/images/cryptocurrencies/LTC.png","alt","",1,"avatar-md","rounded-circle"],[2,"width","20px"],[1,"m-0","text-14","text-muted","line-height-1"],[1,"text-18","font-weight-bold","text-red"],[1,"material-icons","mat-icon-18"],["src","assets/images/cryptocurrencies/BTS.png","alt","",1,"avatar-md","rounded-circle"],["src","assets/images/cryptocurrencies/CNX.png","alt","",1,"avatar-md","rounded-circle"],["src","assets/images/cryptocurrencies/BTC.png","alt","",1,"avatar-md","rounded-circle"],["src","assets/images/cryptocurrencies/ETH.png","alt","",1,"avatar-md","rounded-circle"],[1,"text-18","font-weight-bold","text-green"],["fxLayout","row wrap","fxLayoutAlign","start center"],["alt","",1,"avatar-xs","mr-05",3,"src"],["mat-stroked-button","","color","primary",4,"ngIf"],["mat-stroked-button","","color","primary"],["mat-stroked-button","","color","warn"]],template:function(e,a){if(1&e&&(y.bc(0,"div",0),y.bc(1,"button",1),y.Pc(2," New Sale "),y.bc(3,"mat-icon"),y.Pc(4,"shop"),y.ac(),y.ac(),y.ac(),y.bc(5,"div",2),y.bc(6,"button",3),y.jc("click",(function(e){return a.openMakePayment({},!0)})),y.Pc(7," New Payment "),y.bc(8,"mat-icon"),y.Pc(9,"attach_money"),y.ac(),y.ac(),y.ac(),y.bc(10,"div",4),y.bc(11,"button",5),y.Pc(12," back to Agents "),y.bc(13,"mat-icon"),y.Pc(14,"arrow_back"),y.ac(),y.ac(),y.ac(),y.bc(15,"div",6),y.bc(16,"div",7),y.bc(17,"mat-card",8),y.bc(18,"mat-card-title",9),y.bc(19,"div",10),y.bc(20,"a",11),y.Wb(21,"img",12),y.ac(),y.bc(22,"span"),y.Pc(23),y.ac(),y.Wb(24,"span",13),y.bc(25,"button",14),y.bc(26,"mat-icon",15),y.Pc(27,"more_vert"),y.ac(),y.ac(),y.bc(28,"mat-menu",null,16),y.bc(30,"button",17),y.Pc(31,"Follow"),y.ac(),y.bc(32,"button",17),y.Pc(33,"Message"),y.ac(),y.bc(34,"button",17),y.Pc(35,"Block"),y.ac(),y.bc(36,"button",17),y.Pc(37,"Delete"),y.ac(),y.ac(),y.ac(),y.Wb(38,"mat-divider"),y.ac(),y.bc(39,"mat-card-content"),y.bc(40,"div",18),y.bc(41,"p"),y.bc(42,"mat-icon",19),y.Pc(43,"date_range"),y.ac(),y.Pc(44),y.ac(),y.bc(45,"p"),y.bc(46,"mat-icon",19),y.Pc(47,"location_on"),y.ac(),y.Pc(48),y.ac(),y.ac(),y.ac(),y.ac(),y.ac(),y.ac(),y.Nc(49,Z,33,6,"div",20),y.bc(50,"div",6),y.bc(51,"div",21),y.bc(52,"mat-card",22),y.bc(53,"h6",23),y.Pc(54,"Invoices"),y.ac(),y.bc(55,"ngx-datatable",24),y.bc(56,"ngx-datatable-column",25),y.Nc(57,ee,3,2,"ng-template",26),y.ac(),y.bc(58,"ngx-datatable-column",27),y.Nc(59,ae,1,1,"ng-template",26),y.ac(),y.bc(60,"ngx-datatable-column",28),y.Nc(61,te,1,1,"ng-template",26),y.ac(),y.bc(62,"ngx-datatable-column",29),y.Nc(63,ce,1,1,"ng-template",26),y.ac(),y.bc(64,"ngx-datatable-column",30),y.Nc(65,re,2,2,"ng-template",26),y.ac(),y.ac(),y.ac(),y.ac(),y.bc(66,"div",31),y.bc(67,"mat-card",22),y.bc(68,"h6",32),y.Pc(69,"Payments"),y.ac(),y.bc(70,"ngx-datatable",24),y.bc(71,"ngx-datatable-column",33),y.Nc(72,oe,1,1,"ng-template",26),y.ac(),y.bc(73,"ngx-datatable-column",34),y.Nc(74,se,1,1,"ng-template",26),y.ac(),y.bc(75,"ngx-datatable-column",35),y.Nc(76,le,3,3,"ng-template",26),y.ac(),y.ac(),y.ac(),y.ac(),y.ac()),2&e){var t=y.Dc(29);y.Gb(23),y.Qc(a.selectedagent.name),y.Gb(2),y.tc("matMenuTriggerFor",t),y.Gb(19),y.Rc("Phone: ",a.selectedagent.phone,""),y.Gb(4),y.Rc("Location: ",a.selectedagent.location,""),y.Gb(1),y.tc("ngIf",a.agentdetails),y.Gb(1),y.tc("@animate",y.yc(25,$,y.xc(24,de))),y.Gb(5),y.tc("rows",a.agentdetails.invoices)("columnMode","flex")("headerHeight",50)("footerHeight",0)("rowHeight","auto"),y.Gb(1),y.tc("flexGrow",1),y.Gb(2),y.tc("flexGrow",1),y.Gb(2),y.tc("flexGrow",1),y.Gb(2),y.tc("flexGrow",1),y.Gb(2),y.tc("flexGrow",1),y.Gb(6),y.tc("rows",a.payments)("columnMode","flex")("headerHeight",50)("footerHeight",0)("rowHeight","auto"),y.Gb(1),y.tc("flexGrow",1),y.Gb(2),y.tc("flexGrow",1),y.Gb(2),y.tc("flexGrow",1)}},directives:[I.b,r.h,A.a,S.c,S.a,R.a,R.e,K.c,K.d,K.a,Y.a,R.b,i.m,l.c,l.b,l.a,S.b],pipes:[i.e],styles:[".handle[_ngcontent-%COMP%]{bottom:30px}.handle[_ngcontent-%COMP%], .second[_ngcontent-%COMP%]{position:fixed;right:30px;z-index:99}.second[_ngcontent-%COMP%]{bottom:80px}.third[_ngcontent-%COMP%]{position:fixed;bottom:120px;right:30px;z-index:99}"],data:{animation:h.a}}),me);function be(e,a){if(1&e&&(y.bc(0,"mat-option",24),y.Pc(1),y.ac()),2&e){var t=a.$implicit;y.tc("value",t),y.Gb(1),y.Rc(" ",t," ")}}function ge(e,a){1&e&&(y.bc(0,"mat-error"),y.Pc(1,"You must select a publisher"),y.ac())}function pe(e,a){if(1&e&&(y.bc(0,"div"),y.Nc(1,ge,2,0,"mat-error",11),y.ac()),2&e){var t=y.nc();y.Gb(1),y.tc("ngIf",t.f.numberOfTickets.errors.required)}}function fe(e,a){if(1&e&&(y.bc(0,"mat-option",36),y.Pc(1),y.ac()),2&e){var t=a.$implicit;y.tc("disabled",0==t.status)("value",t),y.Gb(1),y.Uc(" ",t.name," - ",t.class," - GHC ",t.price," - Edition ",t.edition," ")}}function he(e,a){1&e&&(y.bc(0,"mat-error"),y.Pc(1,"You must select an Item"),y.ac())}function ve(e,a){if(1&e&&(y.bc(0,"div"),y.Nc(1,he,2,0,"mat-error",11),y.ac()),2&e){var t=y.nc().$implicit;y.Gb(1),y.tc("ngIf",t.controls.item.errors.required)}}function ye(e,a){1&e&&(y.bc(0,"small",38),y.Pc(1,"Quantity must have a value"),y.ac())}function xe(e,a){if(1&e&&(y.bc(0,"div"),y.Nc(1,ye,2,0,"small",37),y.ac()),2&e){var t=y.nc().$implicit;y.Gb(1),y.tc("ngIf",t.controls.quantity.errors.required)}}function Pe(e,a){if(1&e){var t=y.cc();y.bc(0,"div"),y.bc(1,"h5",25),y.Pc(2),y.ac(),y.bc(3,"form",26),y.bc(4,"div",5),y.bc(5,"div",27),y.bc(6,"div",28),y.bc(7,"mat-label"),y.Pc(8,"Select and Item:"),y.ac(),y.bc(9,"mat-select",29),y.Nc(10,fe,2,6,"mat-option",30),y.ac(),y.Nc(11,ve,2,1,"div",11),y.ac(),y.ac(),y.bc(12,"div",31),y.bc(13,"div",28),y.bc(14,"mat-form-field",32),y.Wb(15,"input",33),y.ac(),y.Nc(16,xe,2,1,"div",11),y.ac(),y.ac(),y.Wb(17,"span",17),y.bc(18,"div",34),y.bc(19,"button",35),y.jc("click",(function(e){y.Gc(t);var c=a.index;return y.nc().removeitem(c)})),y.Pc(20,"Remove"),y.ac(),y.ac(),y.ac(),y.ac(),y.ac()}if(2&e){var c=a.$implicit,n=a.index,i=y.nc();y.Gb(2),y.Rc("Item ",n+1,""),y.Gb(1),y.tc("formGroup",c),y.Gb(7),y.tc("ngForOf",i.pitems),y.Gb(1),y.tc("ngIf",i.submitted&&c.controls.item.errors),y.Gb(5),y.tc("ngIf",i.submitted&&c.controls.quantity.errors)}}function we(e,a){if(1&e){var t=y.cc();y.bc(0,"button",39),y.jc("click",(function(e){return y.Gc(t),y.nc().calculateSale()})),y.Pc(1,"Make Sale"),y.ac()}}function ke(e,a){if(1&e&&(y.bc(0,"div",40),y.bc(1,"div",41),y.Pc(2,"Total: "),y.bc(3,"b"),y.Pc(4),y.ac(),y.ac(),y.Wb(5,"span",42),y.bc(6,"div",41),y.Pc(7,"Sale After Discount: "),y.bc(8,"b"),y.Pc(9),y.ac(),y.ac(),y.Wb(10,"span",43),y.ac()),2&e){var t=y.nc();y.Gb(4),y.Rc("GHC ",t.totalsale,""),y.Gb(5),y.Rc("GHC ",t.afterdiscount,"")}}var Ge,Ce=((Ge=function(){function e(a,t,c,n,i,r,o){_classCallCheck(this,e),this.agent=a,this.crudService=t,this.fb=c,this.loader=n,this.toastr=i,this.data=r,this.router=o,this.submitted=!1}return _createClass(e,[{key:"ngOnInit",value:function(){this.selectedagent=this.agent.selectedagent,this.dynamicForm=this.fb.group({numberOfTickets:["",o.s.required],agent:this.selectedagent,discount:["",o.s.required],tickets:new o.c([])}),this.pitems=this.items=this.data.items,this.length=Array(this.items.length).fill(1).map((function(e,a){return a+1}))}},{key:"onChangeTickets",value:function(e){var a=e.value||0;if(this.t.length<a)for(var t=this.t.length;t<a;t++)this.t.push(this.fb.group({item:["",o.s.required],quantity:["",[o.s.required]]}));else for(var c=this.t.length;c>=a;c--)this.t.removeAt(c)}},{key:"highlight",value:function(e){console.log(e)}},{key:"itemchange",value:function(e){e.value.status=0,this.pitems=this.pitems.filter((function(a){return a.id!==e.value.id})),this.pitems=this.pitems.concat([e.value])}},{key:"removeitem",value:function(e){this.t.removeAt(e)}},{key:"onSubmit",value:function(){if(this.submitted=!0,!this.dynamicForm.invalid){var e=this.dynamicForm.value.tickets,a=this.dynamicForm.value.discount;this.totalsale=0;for(var t=0,c=e.length;t<c;t++)this.totalsale=this.totalsale+e[t].item.price*e[t].quantity;for(this.afterdiscount=this.totalsale*(1-a/100),t=1,c=this.dynamicForm.value.tickets.length;t<c;t++);}}},{key:"onReset",value:function(){this.submitted=!1,this.dynamicForm.reset(),this.t.clear()}},{key:"onClear",value:function(){this.submitted=!1,this.t.reset()}},{key:"calculateSale",value:function(){var e=this;this.loader.open(),this.crudService.calculateSale(this.dynamicForm.value).subscribe((function(a){e.loader.close(),e.data.newsaledata=e.dynamicForm.value,e.router.navigate(["/invoice/preinvoice"]),e.toastr.success("succes",a)}),(function(a){e.loader.close(),e.toastr.error("error",a.error)}))}},{key:"f",get:function(){return this.dynamicForm.controls}},{key:"t",get:function(){return this.f.tickets}}]),e}()).\u0275fac=function(e){return new(e||Ge)(y.Vb(k),y.Vb(w.a),y.Vb(o.d),y.Vb(G.a),y.Vb(T.b),y.Vb(P.a),y.Vb(r.g))},Ge.\u0275cmp=y.Pb({type:Ge,selectors:[["app-new-sale"]],decls:35,vars:6,consts:[[1,"p-0"],[1,""],[1,"card-title-text"],[3,"formGroup","ngSubmit"],[1,"card","m-3"],["fxLayout","row wrap"],["fxFlex","100","fxFlex.gt-xs","30",1,"pr-1"],[1,"pt-1","pb-1"],["formControlName","numberOfTickets","required","",3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],["matSuffix","",1,"secondary-text"],[4,"ngIf"],["fxFlex","100","fxFlex.gt-xs","30"],["matInput","","placeholder","Discount","formControlName","discount","required",""],[4,"ngFor","ngForOf"],[1,"card-footer","text-center"],["mat-raised-button","","color","primary",1,"mb-05"],["fxFlex","8px"],["mat-raised-button","","color","warn","type","reset",1,"mb-05",3,"click"],["mat-raised-button","","color","warn",1,"mb-05",3,"click"],["fxFlex","50px"],["mat-raised-button","","class","mb-05","color","accent",3,"click",4,"ngIf"],["fxFlex","200px"],["class","profile-title text-center mb-1",4,"ngIf"],[3,"value"],["colour","accent",1,"card-title"],[3,"formGroup"],["fxFlex","100","fxFlex.gt-xs","40",1,"pr-1"],[1,"pb-1"],["formControlName","item","required",""],[3,"disabled","value",4,"ngFor","ngForOf"],["fxFlex","100","fxFlex.gt-xs","40"],[1,"full-width"],["matInput","","name","quantity","formControlName","quantity","placeholder","Quantity (Min Length: 4, Max Length: 9)","value",""],["fxFlex","100","fxFlex.gt-xs","10"],["mat-raised-button","","color","primary",1,"mb-05",3,"click"],[3,"disabled","value"],["class","form-error-msg",4,"ngIf"],[1,"form-error-msg"],["mat-raised-button","","color","accent",1,"mb-05",3,"click"],[1,"profile-title","text-center","mb-1"],[1,"main-title"],["fxFlex","100px"],["fxFlex","20px"]],template:function(e,a){1&e&&(y.bc(0,"mat-card",0),y.bc(1,"mat-card-title",1),y.bc(2,"div",2),y.Pc(3,"Selling Form"),y.ac(),y.Wb(4,"mat-divider"),y.ac(),y.bc(5,"mat-card-content"),y.bc(6,"form",3),y.jc("ngSubmit",(function(e){return a.onSubmit()})),y.bc(7,"div",4),y.bc(8,"div",5),y.bc(9,"div",6),y.bc(10,"mat-form-field",7),y.bc(11,"mat-label"),y.Pc(12,"Number of Items:"),y.ac(),y.bc(13,"mat-select",8),y.jc("selectionChange",(function(e){return a.onChangeTickets(e)})),y.Nc(14,be,2,2,"mat-option",9),y.ac(),y.bc(15,"mat-icon",10),y.Pc(16,"outlined_flag"),y.ac(),y.Nc(17,pe,2,1,"div",11),y.ac(),y.ac(),y.bc(18,"div",12),y.bc(19,"mat-form-field",7),y.Wb(20,"input",13),y.ac(),y.ac(),y.ac(),y.Nc(21,Pe,21,5,"div",14),y.bc(22,"div",15),y.bc(23,"button",16),y.Pc(24,"Calculate Sale"),y.ac(),y.Wb(25,"span",17),y.bc(26,"button",18),y.jc("click",(function(e){return a.onReset()})),y.Pc(27,"Reset"),y.ac(),y.Wb(28,"span",17),y.bc(29,"button",19),y.jc("click",(function(e){return a.onClear()})),y.Pc(30,"Clear"),y.ac(),y.Wb(31,"span",20),y.Nc(32,we,2,0,"button",21),y.Wb(33,"span",22),y.Nc(34,ke,11,2,"div",23),y.ac(),y.ac(),y.ac(),y.ac(),y.ac()),2&e&&(y.Gb(6),y.tc("formGroup",a.dynamicForm),y.Gb(8),y.tc("ngForOf",a.length),y.Gb(3),y.tc("ngIf",a.submitted&&a.f.numberOfTickets.errors),y.Gb(4),y.tc("ngForOf",a.t.controls),y.Gb(11),y.tc("ngIf",a.afterdiscount),y.Gb(2),y.tc("ngIf",a.afterdiscount))},directives:[R.a,R.e,Y.a,R.b,o.t,o.n,o.h,S.c,S.a,N.b,N.e,H.a,o.m,o.g,o.r,i.l,A.a,N.f,i.m,O.b,o.b,I.b,q.p,N.a],styles:[""]}),Ge);function Te(e,a){if(1&e&&(y.bc(0,"h1"),y.Pc(1),y.ac()),2&e){var t=y.nc();y.Gb(1),y.Rc("Invoice Number: ",t.invoicenumber,"")}}function Ie(e,a){1&e&&y.Pc(0),2&e&&y.Rc(" ",a.rowIndex+1," ")}function Ae(e,a){if(1&e&&y.Pc(0),2&e){var t=a.row;y.Sc(" ",null==t?null:t.item.name," - ",null==t?null:t.item.class," ")}}function Re(e,a){if(1&e&&y.Pc(0),2&e){var t=a.row;y.Rc(" ",null==t?null:t.quantity," ")}}function Se(e,a){if(1&e&&y.Pc(0),2&e){var t=a.row;y.Rc(" ",null==t?null:t.item.price," ")}}function Ne(e,a){if(1&e&&y.Pc(0),2&e){var t=a.row;y.Rc(" ",(null==t?null:t.item.price)*(null==t?null:t.quantity)," ")}}function Oe(e,a){if(1&e){var t=y.cc();y.bc(0,"button",24),y.jc("click",(function(e){return y.Gc(t),y.nc().createSale()})),y.Pc(1,"Agree On Sale"),y.ac()}}function Fe(e,a){if(1&e){var t=y.cc();y.bc(0,"button",24),y.jc("click",(function(e){return y.Gc(t),y.nc().agentCreateSale()})),y.Pc(1,"Agree On Sale"),y.ac()}}function _e(e,a){if(1&e){var t=y.cc();y.bc(0,"button",25),y.jc("click",(function(e){return y.Gc(t),y.nc().print()})),y.Pc(1,"Print Invoice"),y.ac()}}function Me(e,a){1&e&&(y.bc(0,"button",26),y.Pc(1,"Discard Sale"),y.ac())}function Le(e,a){1&e&&(y.bc(0,"button",27),y.Pc(1,"Make New Sale"),y.ac())}function We(e,a){1&e&&(y.bc(0,"button",28),y.Pc(1,"Discard Sale Return to Agents"),y.ac())}function Ee(e,a){1&e&&(y.bc(0,"button",29),y.Pc(1,"Discard Sale Return to Retailers"),y.ac())}function De(e,a){1&e&&(y.bc(0,"button",28),y.Pc(1,"Return to Agents"),y.ac())}function Ve(e,a){1&e&&(y.bc(0,"button",29),y.Pc(1,"Return to Retailers"),y.ac())}var He,qe,je,Ue,ze=function(){return{y:"50px",delay:"300ms"}},Be=function(e){return{value:"*",params:e}},Ke=((Ue=function(){function e(a,t,c,n,i,r){_classCallCheck(this,e),this.loader=a,this.crudService=t,this.state=c,this.toastr=n,this.agent=i,this.data=r,this.count=0,this.agreed=!1,this.currentDate=new Date}return _createClass(e,[{key:"ngOnInit",value:function(){this.items=this.data.newsaledata,this.getAll(),this.role=this.data.role}},{key:"getAll",value:function(){this.sold=this.items.tickets;var e=this.items.discount;this.totalsale=0;for(var a=0,t=this.sold.length;a<t;a++)this.totalsale=this.totalsale+this.sold[a].item.price*this.sold[a].quantity;this.afterdiscount=this.totalsale*(1-e/100)}},{key:"createSale",value:function(){var e=this;this.loader.open(),this.crudService.createSale(this.items).subscribe((function(a){e.loader.close(),e.invoicenumber=a.invoicenumber,e.agreed=!0,e.toastr.success("succes","Invoice Created")}),(function(a){e.loader.close(),e.toastr.error("error",a.error)}))}},{key:"agentCreateSale",value:function(){var e=this;this.loader.open(),this.crudService.agentCreateSale(this.items).subscribe((function(a){e.loader.close(),e.invoicenumber=a.invoice.invoicenumber,e.data.userdetails(a.userdetails),e.agreed=!0,e.toastr.success("succes","Invoice Created")}),(function(a){e.loader.close(),e.toastr.error("error",a.error)}))}},{key:"print",value:function(){var e,a;e=document.getElementById("print-section").innerHTML,(a=window.open("","_blank","top=0,left=0,height=100%,width=auto")).document.open(),a.document.write('\n      <html>\n        <head>\n          <title>Print tab</title>\n          <style>\n          //........Customized style.......\n          </style>\n        </head>\n    <body onload="window.print();window.close()">'.concat(e,"</body>\n      </html>")),a.document.close()}}]),e}()).\u0275fac=function(e){return new(e||Ue)(y.Vb(G.a),y.Vb(w.a),y.Vb(f.a),y.Vb(T.b),y.Vb(k),y.Vb(P.a))},Ue.\u0275cmp=y.Pb({type:Ue,selectors:[["app-pre-invoice"]],decls:46,vars:34,consts:[["id","print-section"],[1,"invoicehead"],["src","assets/images/head.jpg","height","200px"],[1,"invoicedetails"],[1,"invoiceuser"],[4,"ngIf"],[1,"amount"],[1,"viewtable"],[1,"p-0"],[1,"material","ml-0","mr-0",3,"rows","columnMode","headerHeight","footerHeight","scrollbarH","limit","rowHeight"],["name","SN",3,"flexGrow"],["ngx-datatable-cell-template",""],["name","Name",3,"flexGrow"],["name","Quantity",3,"flexGrow"],["name","Unit Price",3,"flexGrow"],["name","Total",3,"flexGrow"],[1,"downbuttons"],["mat-raised-button","","class","mb-05","color","accent",3,"click",4,"ngIf"],["mat-raised-button","","class","mb-05","color","primary",3,"click",4,"ngIf"],["fxFlex","8px"],["mat-raised-button","","class","mb-05","color","warn","routerLink","/invoice/newsale",4,"ngIf"],["mat-raised-button","","class","mb-05","color","primary","routerLink","/invoice/agentnewsale",4,"ngIf"],["mat-raised-button","","class","mb-05","color","accent","routerLink","/invoice/home",4,"ngIf"],["mat-raised-button","","class","mb-05","color","accent","routerLink","/invoice/retail",4,"ngIf"],["mat-raised-button","","color","accent",1,"mb-05",3,"click"],["mat-raised-button","","color","primary",1,"mb-05",3,"click"],["mat-raised-button","","color","warn","routerLink","/invoice/newsale",1,"mb-05"],["mat-raised-button","","color","primary","routerLink","/invoice/agentnewsale",1,"mb-05"],["mat-raised-button","","color","accent","routerLink","/invoice/home",1,"mb-05"],["mat-raised-button","","color","accent","routerLink","/invoice/retail",1,"mb-05"]],template:function(e,a){1&e&&(y.bc(0,"div",0),y.bc(1,"div",1),y.Wb(2,"img",2),y.ac(),y.bc(3,"div",3),y.bc(4,"div",4),y.Nc(5,Te,2,1,"h1",5),y.bc(6,"h1"),y.Pc(7),y.oc(8,"date"),y.ac(),y.bc(9,"h1",6),y.Pc(10),y.ac(),y.ac(),y.ac(),y.bc(11,"div",7),y.bc(12,"mat-card",8),y.bc(13,"mat-card-content",8),y.bc(14,"ngx-datatable",9),y.bc(15,"ngx-datatable-column",10),y.Nc(16,Ie,1,1,"ng-template",11),y.ac(),y.bc(17,"ngx-datatable-column",12),y.Nc(18,Ae,1,2,"ng-template",11),y.ac(),y.bc(19,"ngx-datatable-column",13),y.Nc(20,Re,1,1,"ng-template",11),y.ac(),y.bc(21,"ngx-datatable-column",14),y.Nc(22,Se,1,1,"ng-template",11),y.ac(),y.bc(23,"ngx-datatable-column",15),y.Nc(24,Ne,1,1,"ng-template",11),y.ac(),y.ac(),y.ac(),y.ac(),y.ac(),y.bc(25,"div",3),y.bc(26,"div",4),y.bc(27,"h1"),y.Pc(28),y.ac(),y.bc(29,"h1"),y.Pc(30),y.ac(),y.bc(31,"h1",6),y.Pc(32),y.ac(),y.ac(),y.ac(),y.ac(),y.bc(33,"div",16),y.Nc(34,Oe,2,0,"button",17),y.Nc(35,Fe,2,0,"button",17),y.Nc(36,_e,2,0,"button",18),y.Wb(37,"span",19),y.Nc(38,Me,2,0,"button",20),y.Nc(39,Le,2,0,"button",21),y.Wb(40,"span",19),y.Nc(41,We,2,0,"button",22),y.Nc(42,Ee,2,0,"button",23),y.Wb(43,"span",19),y.Nc(44,De,2,0,"button",22),y.Nc(45,Ve,2,0,"button",23),y.ac()),2&e&&(y.Gb(5),y.tc("ngIf",a.invoicenumber),y.Gb(2),y.Rc("Invoice Date: ",y.qc(8,28,a.currentDate,"dd MMM yyyy"),""),y.Gb(3),y.Rc("Amount Due: GHC ",a.afterdiscount,""),y.Gb(2),y.tc("@animate",y.yc(32,Be,y.xc(31,ze))),y.Gb(2),y.tc("rows",a.sold)("columnMode","force")("headerHeight",50)("footerHeight",50)("scrollbarH",!1)("limit",10)("rowHeight",50),y.Gb(1),y.tc("flexGrow",1),y.Gb(2),y.tc("flexGrow",1),y.Gb(2),y.tc("flexGrow",1),y.Gb(2),y.tc("flexGrow",1),y.Gb(2),y.tc("flexGrow",1),y.Gb(5),y.Rc("Total: ",a.totalsale,""),y.Gb(2),y.Rc("Discount: ",a.items.discount,"%"),y.Gb(2),y.Rc("Amount Due: GHC",a.afterdiscount,""),y.Gb(2),y.tc("ngIf",!a.agreed&&a.role.publisher),y.Gb(1),y.tc("ngIf",!a.agreed&&a.role.agent),y.Gb(1),y.tc("ngIf",a.agreed),y.Gb(2),y.tc("ngIf",a.role.publisher),y.Gb(1),y.tc("ngIf",a.role.agent),y.Gb(2),y.tc("ngIf",!a.agreed&&a.role.publisher),y.Gb(1),y.tc("ngIf",!a.agreed&&a.role.agent),y.Gb(2),y.tc("ngIf",a.agreed&&a.role.publisher),y.Gb(1),y.tc("ngIf",a.agreed&&a.role.agent))},directives:[i.m,R.a,R.b,l.c,l.b,l.a,S.a,I.b,r.h],pipes:[i.e],styles:[".invoicehead[_ngcontent-%COMP%]{margin-bottom:2px}.invoicedetails[_ngcontent-%COMP%]{flex-direction:row-reverse}.downbuttons[_ngcontent-%COMP%], .invoicedetails[_ngcontent-%COMP%]{display:flex;max-width:1200px;margin:0 auto;padding:20px}.invoiceuser[_ngcontent-%COMP%]{display:flex;width:30%;flex-direction:column}h1[_ngcontent-%COMP%]{font-size:20px}.viewtable[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:20px}@media print-section{[_ngcontent-%COMP%]:not(.print){display:none!important}}"],data:{animation:h.a}}),Ue),Ye=((je=function(){function e(a,t){_classCallCheck(this,e),this.data=a,this.crudeService=t}return _createClass(e,[{key:"resolve",value:function(e,a){var t=this;return new Promise((function(e,a){Promise.all([t.getItems()]).then((function(){e()}),a)}))}},{key:"getItems",value:function(){var e=this;return new Promise((function(a,t){e.data.items?(e.items=e.data.items,a(e.items)):e.crudeService.getItems().subscribe((function(t){e.items=t.data,e.data.items=t.data,a(e.items)}),t)}))}}]),e}()).\u0275fac=function(e){return new(e||je)(y.fc(P.a),y.fc(w.a))},je.\u0275prov=y.Rb({token:je,factory:je.\u0275fac,providedIn:"root"}),je),Qe=((qe=function(){function e(a,t,c){_classCallCheck(this,e),this.router=a,this.crudeService=t,this.data=c}return _createClass(e,[{key:"resolve",value:function(e,a){var t=this;return new Promise((function(e,a){Promise.all([t.getRetailers(),t.getUserDetails()]).then((function(){e()}),a)}))}},{key:"getRetailers",value:function(){var e=this;return new Promise((function(a,t){e.data.retailers?(e.retailers=e.data.retailers,a(e.retailers)):e.crudeService.getRetailer().subscribe((function(t){e.retailers=t.data,e.data.retailers=t.data,a(e.retailers)}),t)}))}},{key:"getUserDetails",value:function(){var e=this;return new Promise((function(a,t){e.data.userdetails?(e.userdetails=e.data.userdetails,a(e.userdetails)):e.crudeService.getUserDetails().subscribe((function(t){e.userdetails=t,e.data.userdetails=t,a(e.userdetails)}),t)}))}}]),e}()).\u0275fac=function(e){return new(e||qe)(y.fc(r.g),y.fc(w.a),y.fc(P.a))},qe.\u0275prov=y.Rb({token:qe,factory:qe.\u0275fac,providedIn:"root"}),qe),Je=((He=function(){function e(a,t,c){_classCallCheck(this,e),this.router=a,this.crudeService=t,this.data=c,this.selectedretailer=this.data.selectedretailer}return _createClass(e,[{key:"resolve",value:function(e,a){var t=this;return new Promise((function(e,a){Promise.all([t.getPaymentMethods(),t.getRetailerDetails()]).then((function(){e()}),a)}))}},{key:"getPaymentMethods",value:function(){var e=this;return new Promise((function(a,t){e.data.paymentmethods?(e.paymentmethods=e.data.paymentmethods,a(e.paymentmethods)):e.crudeService.getPaymentMethod().subscribe((function(t){e.paymentmethods=t.data,e.data.paymentmethods=t.data,a(e.paymentmethods)}),t)}))}},{key:"getRetailerDetails",value:function(){var e=this;return new Promise((function(a,t){e.crudeService.getRetailerDetails(e.selectedretailer).subscribe((function(t){e.retailerdetails=t,a(e.retailerdetails)}),t)}))}}]),e}()).\u0275fac=function(e){return new(e||He)(y.fc(r.g),y.fc(w.a),y.fc(P.a))},He.\u0275prov=y.Rb({token:He,factory:He.\u0275fac,providedIn:"root"}),He);function Xe(e,a){if(1&e&&(y.bc(0,"mat-option",13),y.Pc(1),y.ac()),2&e){var t=a.$implicit;y.tc("value",t.id),y.Gb(1),y.Rc(" ",t.name," ")}}var $e,Ze=(($e=function(){function e(a,t,c){_classCallCheck(this,e),this.data=a,this.dialogRef=t,this.fb=c}return _createClass(e,[{key:"ngOnInit",value:function(){this.paymentmethods=this.data.paymentmethods,this.selectedretail=this.data.selectedretail,this.itemForm=this.fb.group({amount:["",o.s.required],payment_method_id:["",o.s.required],retail_id:this.selectedretail.id})}},{key:"submit",value:function(){this.dialogRef.close(this.itemForm.value)}}]),e}()).\u0275fac=function(e){return new(e||$e)(y.Vb(C.a),y.Vb(C.f),y.Vb(o.d))},$e.\u0275cmp=y.Pb({type:$e,selectors:[["app-make-retail-payment-popup"]],decls:23,vars:4,consts:[["matDialogTitle",""],[3,"formGroup","ngSubmit"],["fxLayout","row wrap","fxLayout.lt-sm","column"],["fxFlex","100",1,"pr-1"],[1,"full-width"],["matInput","","name","amount","placeholder","Amount",3,"formControl"],["formControlName","payment_method_id","required",""],[3,"value",4,"ngFor","ngForOf"],["matSuffix","",1,"secondary-text"],["fxFlex","100",1,"mt-1"],["mat-raised-button","","color","primary",3,"disabled"],["fxFlex",""],["mat-button","","color","warn","type","button",3,"click"],[3,"value"]],template:function(e,a){1&e&&(y.bc(0,"h1",0),y.Pc(1,"Add A New Item"),y.ac(),y.bc(2,"form",1),y.jc("ngSubmit",(function(e){return a.submit()})),y.bc(3,"div",2),y.bc(4,"div",3),y.bc(5,"mat-form-field",4),y.Wb(6,"input",5),y.ac(),y.ac(),y.bc(7,"div",3),y.bc(8,"mat-form-field",4),y.bc(9,"mat-label"),y.Pc(10,"Payment Was Made Through"),y.ac(),y.bc(11,"mat-select",6),y.Nc(12,Xe,2,2,"mat-option",7),y.ac(),y.bc(13,"mat-icon",8),y.Pc(14,"outlined_flag"),y.ac(),y.bc(15,"mat-error"),y.Pc(16,"payment type is required!"),y.ac(),y.ac(),y.ac(),y.bc(17,"div",9),y.bc(18,"button",10),y.Pc(19,"Save"),y.ac(),y.Wb(20,"span",11),y.bc(21,"button",12),y.jc("click",(function(e){return a.dialogRef.close(!1)})),y.Pc(22,"Cancel"),y.ac(),y.ac(),y.ac(),y.ac()),2&e&&(y.Gb(2),y.tc("formGroup",a.itemForm),y.Gb(4),y.tc("formControl",a.itemForm.controls.amount),y.Gb(6),y.tc("ngForOf",a.paymentmethods),y.Gb(6),y.tc("disabled",a.itemForm.invalid))},directives:[C.g,o.t,o.n,o.h,S.c,S.a,N.b,O.b,o.b,o.m,o.f,N.e,H.a,o.g,o.r,i.l,A.a,N.f,N.a,I.b,q.p],styles:[""]}),$e);function ea(e,a){if(1&e&&(y.bc(0,"div",20),y.bc(1,"mat-card",21),y.Wb(2,"img",31),y.Wb(3,"span",23),y.bc(4,"div"),y.bc(5,"p",24),y.Pc(6,"Last Payment"),y.ac(),y.bc(7,"span",32),y.Pc(8),y.Wb(9,"span",26),y.ac(),y.ac(),y.ac(),y.ac()),2&e){var t=y.nc();y.Gb(8),y.Rc("GHC ",t.lastpayment.amount," ")}}function aa(e,a){if(1&e&&(y.bc(0,"div",20),y.bc(1,"mat-card",21),y.Wb(2,"img",33),y.Wb(3,"span",23),y.bc(4,"div"),y.bc(5,"p",24),y.Pc(6,"Last Invoice"),y.ac(),y.bc(7,"span",25),y.Pc(8),y.Wb(9,"span",26),y.ac(),y.ac(),y.ac(),y.ac()),2&e){var t=y.nc();y.Gb(8),y.Rc("GHC ",t.lastinvoice.after_discount," ")}}function ta(e,a){if(1&e&&(y.bc(0,"div",45),y.Wb(1,"img",46),y.Pc(2),y.ac()),2&e){var t=a.row;y.Gb(1),y.tc("src",t.icon,y.Ic),y.Gb(1),y.Rc(" ",null==t?null:t.total_sale," ")}}function ca(e,a){if(1&e&&y.Pc(0),2&e){var t=a.row;y.Rc(" ",null==t?null:t.discount," ")}}function na(e,a){if(1&e&&y.Pc(0),2&e){var t=a.row;y.Rc(" ",null==t?null:t.after_discount," ")}}function ia(e,a){if(1&e&&y.Pc(0),2&e){var t=a.row;y.Rc(" ",null==t?null:t.amount_paid," ")}}function ra(e,a){1&e&&(y.bc(0,"button",48),y.Pc(1,"unpaid"),y.ac())}function oa(e,a){1&e&&(y.bc(0,"button",48),y.Pc(1,"paid"),y.ac())}function sa(e,a){if(1&e&&(y.Nc(0,ra,2,0,"button",47),y.Nc(1,oa,2,0,"button",47)),2&e){var t=a.row;y.tc("ngIf","0"==(null==t?null:t.completed)),y.Gb(1),y.tc("ngIf","1"==(null==t?null:t.completed))}}function la(e,a){if(1&e&&y.Pc(0),2&e){var t=a.row;y.Rc(" ",null==t?null:t.mode," ")}}function ma(e,a){if(1&e&&y.Pc(0),2&e){var t=a.row;y.Rc(" ",null==t?null:t.amount," ")}}function da(e,a){if(1&e&&(y.bc(0,"button",54),y.Pc(1),y.oc(2,"date"),y.ac()),2&e){var t=a.row;y.Gb(1),y.Qc(y.pc(2,1,null==t?null:t.made_on))}}function ua(e,a){if(1&e&&(y.bc(0,"div",49),y.bc(1,"mat-card",35),y.bc(2,"h6",50),y.Pc(3,"Payments"),y.ac(),y.bc(4,"ngx-datatable",37),y.bc(5,"ngx-datatable-column",51),y.Nc(6,la,1,1,"ng-template",39),y.ac(),y.bc(7,"ngx-datatable-column",52),y.Nc(8,ma,1,1,"ng-template",39),y.ac(),y.bc(9,"ngx-datatable-column",53),y.Nc(10,da,3,3,"ng-template",39),y.ac(),y.ac(),y.ac(),y.ac()),2&e){var t=y.nc(2);y.Gb(4),y.tc("rows",t.retailerdetails.payments)("columnMode","flex")("headerHeight",50)("footerHeight",0)("rowHeight","auto"),y.Gb(1),y.tc("flexGrow",1),y.Gb(2),y.tc("flexGrow",1),y.Gb(2),y.tc("flexGrow",1)}}var ba=function(){return{delay:"800ms",scale:".9"}},ga=function(e){return{value:"*",params:e}};function pa(e,a){if(1&e&&(y.bc(0,"div",6),y.bc(1,"div",34),y.bc(2,"mat-card",35),y.bc(3,"h6",36),y.Pc(4,"Invoices"),y.ac(),y.bc(5,"ngx-datatable",37),y.bc(6,"ngx-datatable-column",38),y.Nc(7,ta,3,2,"ng-template",39),y.ac(),y.bc(8,"ngx-datatable-column",40),y.Nc(9,ca,1,1,"ng-template",39),y.ac(),y.bc(10,"ngx-datatable-column",41),y.Nc(11,na,1,1,"ng-template",39),y.ac(),y.bc(12,"ngx-datatable-column",42),y.Nc(13,ia,1,1,"ng-template",39),y.ac(),y.bc(14,"ngx-datatable-column",43),y.Nc(15,sa,2,2,"ng-template",39),y.ac(),y.ac(),y.ac(),y.ac(),y.Nc(16,ua,11,8,"div",44),y.ac()),2&e){var t=y.nc();y.tc("@animate",y.yc(13,ga,y.xc(12,ba))),y.Gb(5),y.tc("rows",t.retailerdetails.invoices)("columnMode","flex")("headerHeight",50)("footerHeight",0)("rowHeight","auto"),y.Gb(1),y.tc("flexGrow",1),y.Gb(2),y.tc("flexGrow",1),y.Gb(2),y.tc("flexGrow",1),y.Gb(2),y.tc("flexGrow",1),y.Gb(2),y.tc("flexGrow",1),y.Gb(2),y.tc("ngIf",t.retailerdetails.payments)}}var fa,ha,va=function(){return{delay:"600ms",scale:".9"}},ya=((fa=function(){function e(a,t,c,n,i,r,o,s,l){_classCallCheck(this,e),this.agent=a,this.dialog=t,this.snack=c,this.crudService=n,this.data=i,this.confirmService=r,this.loader=o,this.toastr=s,this.retail=l}return _createClass(e,[{key:"ngOnInit",value:function(){this.selectedretailer=this.retail.selectedretailer,this.paymentmethods=this.retail.paymentmethods,this.retailerdetails=this.retail.retailerdetails,this.pop=this.retail.retailerdetails,this.lastpayment=this.pop.payments,this.lastinvoice=this.pop.invoices,this.lastinvoice=this.lastinvoice[this.lastinvoice.length-1],this.lastpayment=this.lastpayment[this.lastpayment.length-1]}},{key:"openMakePayment",value:function(){var e=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;this.dialog.open(Ze,{width:"720px",disableClose:!0,data:{paymentmethods:this.paymentmethods,selectedretail:this.selectedretailer}}).afterClosed().subscribe((function(c){c&&(e.loader.open(),t?e.crudService.addRetailPayments(c).subscribe((function(a){e.loader.close(),e.retailerdetails.payments=e.retailerdetails.payments.concat([a.payment]),e.data.userdetails=a.userdetails,e.snack.open("New Payment Made","OK",{duration:4e3})}),(function(a){e.loader.close(),e.toastr.error("sorry",a.error)})):e.crudService.updateItem(a._id,c).subscribe((function(a){e.payments=a,e.loader.close(),e.snack.open("Member Updated!","OK",{duration:4e3})})))}))}}]),e}()).\u0275fac=function(e){return new(e||fa)(y.Vb(Qe),y.Vb(C.b),y.Vb(B.a),y.Vb(w.a),y.Vb(P.a),y.Vb(V.a),y.Vb(G.a),y.Vb(T.b),y.Vb(Je))},fa.\u0275cmp=y.Pb({type:fa,selectors:[["app-retail-summary"]],decls:84,vars:12,consts:[[1,"handle"],["routerLink","/invoice/agentnewsale","mat-raised-button","","color","primary",1,"mb-05"],[1,"second"],["mat-raised-button","","color","accent",1,"mb-05",3,"click"],[1,"third"],["routerLink","/invoice/retail","mat-raised-button","","color","warn",1,"mb-05"],["fxLayout","row wrap"],["fxFlex","100",1,"p-0","mb-1"],[1,"user-card","p-0"],[1,"mat-bg-primary"],[1,"card-title-text"],["href","",1,"toolbar-avatar","md","mr-1"],["alt","",3,"src"],["fxFlex",""],["mat-icon-button","",1,"",3,"matMenuTriggerFor"],[1,""],["userMenu","matMenu"],["mat-menu-item",""],[1,"user-details"],[1,"text-muted"],["fxFlex","100","fxFlex.gt-sm","20","fxFlex.sm","50"],["fxLayout","row wrap","fxLayoutAlign","start center",1,"rounded-circle"],["src","assets/images/cryptocurrencies/BTC.png","alt","",1,"avatar-md","rounded-circle"],[2,"width","20px"],[1,"m-0","text-14","text-muted","line-height-1"],[1,"text-18","font-weight-bold","text-red"],[1,"material-icons","mat-icon-18"],["fxFlex","100","fxFlex.gt-sm","20","fxFlex.sm","50",4,"ngIf"],["src","assets/images/cryptocurrencies/BTS.png","alt","",1,"avatar-md","rounded-circle"],["src","assets/images/cryptocurrencies/CNX.png","alt","",1,"avatar-md","rounded-circle"],["fxLayout","row wrap",4,"ngIf"],["src","assets/images/cryptocurrencies/ETH.png","alt","",1,"avatar-md","rounded-circle"],[1,"text-18","font-weight-bold","text-green"],["src","assets/images/cryptocurrencies/LTC.png","alt","",1,"avatar-md","rounded-circle"],["fxFlex","100","fxFlex.gt-sm","66.67"],[1,"p-0"],[1,"pl-1","pt-1","m-0"],[1,"material","ml-0","mr-0",3,"rows","columnMode","headerHeight","footerHeight","rowHeight"],["name","Total Sale",3,"flexGrow"],["ngx-datatable-cell-template",""],["name","Discount",3,"flexGrow"],["name","Value",3,"flexGrow"],["name","Amount Paid",3,"flexGrow"],["name","Status",3,"flexGrow"],["fxFlex","100","fxFlex.gt-sm","33.33",4,"ngIf"],["fxLayout","row wrap","fxLayoutAlign","start center"],["alt","",1,"avatar-xs","mr-05",3,"src"],["mat-stroked-button","","color","primary",4,"ngIf"],["mat-stroked-button","","color","primary"],["fxFlex","100","fxFlex.gt-sm","33.33"],[1,"ml-1","mt-1"],["name","Made At",3,"flexGrow"],["name","amount",3,"flexGrow"],["name","Date",3,"flexGrow"],["mat-stroked-button","","color","warn"]],template:function(e,a){if(1&e&&(y.bc(0,"div",0),y.bc(1,"button",1),y.Pc(2," New Sale "),y.bc(3,"mat-icon"),y.Pc(4,"shop"),y.ac(),y.ac(),y.ac(),y.bc(5,"div",2),y.bc(6,"button",3),y.jc("click",(function(e){return a.openMakePayment({},!0)})),y.Pc(7," New Payment "),y.bc(8,"mat-icon"),y.Pc(9,"attach_money"),y.ac(),y.ac(),y.ac(),y.bc(10,"div",4),y.bc(11,"button",5),y.Pc(12," back to Retailers "),y.bc(13,"mat-icon"),y.Pc(14,"arrow_back"),y.ac(),y.ac(),y.ac(),y.bc(15,"div",6),y.bc(16,"div",7),y.bc(17,"mat-card",8),y.bc(18,"mat-card-title",9),y.bc(19,"div",10),y.bc(20,"a",11),y.Wb(21,"img",12),y.ac(),y.bc(22,"span"),y.Pc(23),y.ac(),y.Wb(24,"span",13),y.bc(25,"button",14),y.bc(26,"mat-icon",15),y.Pc(27,"more_vert"),y.ac(),y.ac(),y.bc(28,"mat-menu",null,16),y.bc(30,"button",17),y.Pc(31,"Follow"),y.ac(),y.bc(32,"button",17),y.Pc(33,"Message"),y.ac(),y.bc(34,"button",17),y.Pc(35,"Block"),y.ac(),y.bc(36,"button",17),y.Pc(37,"Delete"),y.ac(),y.ac(),y.ac(),y.Wb(38,"mat-divider"),y.ac(),y.bc(39,"mat-card-content"),y.bc(40,"div",18),y.bc(41,"p"),y.bc(42,"mat-icon",19),y.Pc(43,"date_range"),y.ac(),y.Pc(44),y.ac(),y.bc(45,"p"),y.bc(46,"mat-icon",19),y.Pc(47,"location_on"),y.ac(),y.Pc(48),y.ac(),y.ac(),y.ac(),y.ac(),y.ac(),y.ac(),y.bc(49,"div",6),y.bc(50,"div",20),y.bc(51,"mat-card",21),y.Wb(52,"img",22),y.Wb(53,"span",23),y.bc(54,"div"),y.bc(55,"p",24),y.Pc(56,"Current Balance"),y.ac(),y.bc(57,"span",25),y.Pc(58),y.bc(59,"span",26),y.Pc(60,"arrow_drop_down"),y.ac(),y.ac(),y.ac(),y.ac(),y.ac(),y.Nc(61,ea,10,1,"div",27),y.Nc(62,aa,10,1,"div",27),y.bc(63,"div",20),y.bc(64,"mat-card",21),y.Wb(65,"img",28),y.Wb(66,"span",23),y.bc(67,"div"),y.bc(68,"p",24),y.Pc(69,"Unpaid Invoice"),y.ac(),y.bc(70,"span",25),y.Pc(71,"$10 "),y.Wb(72,"span",26),y.ac(),y.ac(),y.ac(),y.ac(),y.bc(73,"div",20),y.bc(74,"mat-card",21),y.Wb(75,"img",29),y.Wb(76,"span",23),y.bc(77,"div"),y.bc(78,"p",24),y.Pc(79,"Unpaid Invoice"),y.ac(),y.bc(80,"span",25),y.Pc(81,"$80 "),y.Wb(82,"span",26),y.ac(),y.ac(),y.ac(),y.ac(),y.ac(),y.Nc(83,pa,17,15,"div",30)),2&e){var t=y.Dc(29);y.Gb(23),y.Qc(a.selectedretailer.name),y.Gb(2),y.tc("matMenuTriggerFor",t),y.Gb(19),y.Rc("Phone: ",a.selectedretailer.phone,""),y.Gb(4),y.Rc("Location: ",a.selectedretailer.location,""),y.Gb(1),y.tc("@animate",y.yc(10,ga,y.xc(9,va))),y.Gb(9),y.Rc("GHC ",a.retailerdetails.ledger.cbalance,""),y.Gb(3),y.tc("ngIf",a.lastpayment),y.Gb(1),y.tc("ngIf",a.lastinvoice),y.Gb(21),y.tc("ngIf",a.retailerdetails.invoices)}},directives:[I.b,r.h,A.a,S.c,S.a,R.a,R.e,K.c,K.d,K.a,Y.a,R.b,S.b,i.m,l.c,l.b,l.a],pipes:[i.e],styles:[".handle[_ngcontent-%COMP%]{bottom:30px}.handle[_ngcontent-%COMP%], .second[_ngcontent-%COMP%]{position:fixed;right:30px;z-index:99}.second[_ngcontent-%COMP%]{bottom:80px}.third[_ngcontent-%COMP%]{position:fixed;bottom:120px;right:30px;z-index:99}"],data:{animation:h.a}}),fa),xa=t("yz3j"),Pa=((ha=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"getDataConf",value:function(){return[{prop:"id"},{prop:"name",name:"Name"}]}},{key:"getAll",value:function(){return[{id:0,age:40,name:"Mclean Brady",gender:"male",company:"JAMNATION",email:"mcleanbrady@jamnation.com",phone:"+1 (875) 472-2061",registered:"2014-10-20T04:54:00 -06:00"},{id:1,age:39,name:"Dillon Ruiz",gender:"male",company:"ACRODANCE",email:"dillonruiz@acrodance.com",phone:"+1 (858) 562-2261",registered:"2016-08-07T12:15:31 -06:00"},{id:2,age:39,name:"Robyn Knox",gender:"female",company:"GLUID",email:"robynknox@gluid.com",phone:"+1 (826) 491-3098",registered:"2017-02-12T02:43:39 -06:00"},{id:3,age:32,name:"Santana Wagner",gender:"male",company:"INTRADISK",email:"santanawagner@intradisk.com",phone:"+1 (841) 550-2276",registered:"2016-03-28T11:22:15 -06:00"},{id:4,age:34,name:"Jennie Branch",gender:"female",company:"VERAQ",email:"jenniebranch@veraq.com",phone:"+1 (895) 483-3982",registered:"2015-03-16T01:30:06 -06:00"},{id:5,age:39,name:"Farrell Preston",gender:"male",company:"HONOTRON",email:"farrellpreston@honotron.com",phone:"+1 (993) 534-2843",registered:"2015-08-14T09:07:47 -06:00"},{id:6,age:38,name:"Garner Reyes",gender:"male",company:"VIOCULAR",email:"garnerreyes@viocular.com",phone:"+1 (973) 495-3873",registered:"2016-03-23T03:47:23 -06:00"},{id:7,age:32,name:"Ella Boone",gender:"female",company:"ARCHITAX",email:"ellaboone@architax.com",phone:"+1 (945) 491-2580",registered:"2015-07-01T09:35:10 -06:00"},{id:8,age:30,name:"Kathryn Owens",gender:"female",company:"CYCLONICA",email:"kathrynowens@cyclonica.com",phone:"+1 (978) 598-2767",registered:"2014-03-11T11:38:12 -06:00"},{id:9,age:22,name:"Byers Santana",gender:"male",company:"KAGGLE",email:"byerssantana@kaggle.com",phone:"+1 (984) 546-3400",registered:"2015-08-17T02:48:09 -06:00"},{id:10,age:30,name:"Nina Middleton",gender:"female",company:"ZINCA",email:"ninamiddleton@zinca.com",phone:"+1 (829) 553-2060",registered:"2014-12-20T09:53:27 -06:00"},{id:11,age:38,name:"Nixon Morrow",gender:"male",company:"CUBIX",email:"nixonmorrow@cubix.com",phone:"+1 (825) 501-3712",registered:"2014-09-10T10:23:34 -06:00"},{id:12,age:28,name:"Bonita Pate",gender:"female",company:"MAGNEATO",email:"bonitapate@magneato.com",phone:"+1 (808) 497-3968",registered:"2016-01-20T02:45:43 -06:00"},{id:13,age:30,name:"Amy Hyde",gender:"female",company:"UNDERTAP",email:"amyhyde@undertap.com",phone:"+1 (867) 555-2669",registered:"2015-04-12T08:39:31 -06:00"},{id:14,age:20,name:"Cortez Camacho",gender:"male",company:"IDEGO",email:"cortezcamacho@idego.com",phone:"+1 (986) 546-3364",registered:"2014-08-21T11:00:20 -06:00"},{id:15,age:29,name:"Castaneda Armstrong",gender:"male",company:"INTERFIND",email:"castanedaarmstrong@interfind.com",phone:"+1 (975) 557-2651",registered:"2014-11-15T10:38:24 -06:00"},{id:16,age:37,name:"Liza West",gender:"female",company:"COWTOWN",email:"lizawest@cowtown.com",phone:"+1 (852) 415-2358",registered:"2017-05-06T09:46:03 -06:00"},{id:17,age:37,name:"Roth Baird",gender:"male",company:"RODEMCO",email:"rothbaird@rodemco.com",phone:"+1 (840) 417-3313",registered:"2015-04-18T10:58:50 -06:00"},{id:18,age:26,name:"Alexis Blackburn",gender:"female",company:"PREMIANT",email:"alexisblackburn@premiant.com",phone:"+1 (957) 576-2362",registered:"2014-08-08T12:59:38 -06:00"},{id:19,age:35,name:"Sadie Tillman",gender:"female",company:"DUOFLEX",email:"sadietillman@duoflex.com",phone:"+1 (843) 499-3330",registered:"2016-02-21T09:25:03 -06:00"},{id:20,age:27,name:"Sharron Conley",gender:"female",company:"QUARMONY",email:"sharronconley@quarmony.com",phone:"+1 (951) 459-2465",registered:"2014-10-19T06:04:36 -06:00"},{id:21,age:27,name:"Jordan Mccoy",gender:"male",company:"ACCUSAGE",email:"jordanmccoy@accusage.com",phone:"+1 (825) 568-3296",registered:"2017-01-27T01:53:02 -06:00"},{id:22,age:35,name:"Rene House",gender:"female",company:"INSURETY",email:"renehouse@insurety.com",phone:"+1 (838) 578-3190",registered:"2015-11-07T10:07:58 -06:00"},{id:23,age:38,name:"Bernice Berry",gender:"female",company:"ROCKYARD",email:"berniceberry@rockyard.com",phone:"+1 (885) 466-2145",registered:"2014-04-17T07:43:02 -06:00"},{id:24,age:30,name:"Bowen Beach",gender:"male",company:"TETRATREX",email:"bowenbeach@tetratrex.com",phone:"+1 (843) 493-3197",registered:"2015-07-27T03:38:33 -06:00"},{id:25,age:31,name:"Monica Leblanc",gender:"female",company:"TALENDULA",email:"monicaleblanc@talendula.com",phone:"+1 (911) 524-2349",registered:"2016-04-10T08:33:17 -06:00"},{id:26,age:36,name:"Lina Rivas",gender:"female",company:"BOINK",email:"linarivas@boink.com",phone:"+1 (983) 572-2470",registered:"2014-08-28T09:44:32 -06:00"},{id:27,age:25,name:"Joyce Yang",gender:"female",company:"SPORTAN",email:"joyceyang@sportan.com",phone:"+1 (807) 491-3917",registered:"2015-07-22T12:58:31 -06:00"},{id:28,age:20,name:"Lana Joseph",gender:"female",company:"BOLAX",email:"lanajoseph@bolax.com",phone:"+1 (942) 467-2363",registered:"2016-10-30T06:13:50 -06:00"},{id:29,age:20,name:"Jimenez Guerrero",gender:"male",company:"INSURON",email:"jimenezguerrero@insuron.com",phone:"+1 (991) 585-3706",registered:"2016-09-15T01:35:16 -06:00"},{id:30,age:35,name:"Williams Bentley",gender:"male",company:"ZEAM",email:"williamsbentley@zeam.com",phone:"+1 (837) 490-2610",registered:"2014-01-06T01:04:11 -06:00"},{id:31,age:27,name:"Doreen Garrett",gender:"female",company:"ENERSAVE",email:"doreengarrett@enersave.com",phone:"+1 (920) 522-2847",registered:"2017-01-25T03:24:47 -06:00"},{id:32,age:34,name:"Shaw Cannon",gender:"male",company:"EBIDCO",email:"shawcannon@ebidco.com",phone:"+1 (903) 530-2676",registered:"2014-04-11T04:49:08 -06:00"},{id:33,age:25,name:"Sonya Skinner",gender:"female",company:"EXOSWITCH",email:"sonyaskinner@exoswitch.com",phone:"+1 (923) 428-3014",registered:"2014-02-09T11:59:54 -06:00"},{id:34,age:27,name:"Todd Potter",gender:"male",company:"MUSIX",email:"toddpotter@musix.com",phone:"+1 (817) 491-2268",registered:"2015-04-06T11:10:47 -06:00"},{id:35,age:21,name:"Celina Rose",gender:"female",company:"TWIIST",email:"celinarose@twiist.com",phone:"+1 (863) 599-2063",registered:"2015-09-04T07:59:29 -06:00"},{id:36,age:40,name:"Ingrid Day",gender:"female",company:"ZBOO",email:"ingridday@zboo.com",phone:"+1 (921) 447-2312",registered:"2016-10-01T08:26:07 -06:00"},{id:37,age:24,name:"Lynch Stark",gender:"male",company:"PYRAMIA",email:"lynchstark@pyramia.com",phone:"+1 (995) 431-2354",registered:"2014-01-26T11:38:48 -06:00"},{id:38,age:29,name:"Helga Mendez",gender:"female",company:"COMVEYER",email:"helgamendez@comveyer.com",phone:"+1 (897) 418-3815",registered:"2015-10-03T08:58:45 -06:00"},{id:39,age:30,name:"Corinne Calhoun",gender:"female",company:"ADORNICA",email:"corinnecalhoun@adornica.com",phone:"+1 (841) 564-3617",registered:"2016-05-24T10:42:36 -06:00"},{id:40,age:40,name:"Winifred Conrad",gender:"female",company:"SATIANCE",email:"winifredconrad@satiance.com",phone:"+1 (885) 533-2416",registered:"2017-03-01T06:12:08 -06:00"},{id:41,age:27,name:"Lawanda Stevenson",gender:"female",company:"ZILLACTIC",email:"lawandastevenson@zillactic.com",phone:"+1 (823) 535-3187",registered:"2014-07-07T05:26:22 -06:00"},{id:42,age:30,name:"Kirsten Long",gender:"female",company:"IMAGEFLOW",email:"kirstenlong@imageflow.com",phone:"+1 (809) 592-2264",registered:"2014-05-08T07:41:56 -06:00"},{id:43,age:39,name:"Summer Farley",gender:"female",company:"ENTOGROK",email:"summerfarley@entogrok.com",phone:"+1 (814) 490-3578",registered:"2016-10-28T10:02:34 -06:00"},{id:44,age:31,name:"Mendoza Randall",gender:"male",company:"COREPAN",email:"mendozarandall@corepan.com",phone:"+1 (846) 501-2860",registered:"2015-12-14T12:58:18 -06:00"},{id:45,age:27,name:"Marcy Doyle",gender:"female",company:"VORATAK",email:"marcydoyle@voratak.com",phone:"+1 (848) 411-2728",registered:"2014-02-12T10:46:27 -06:00"},{id:46,age:30,name:"Burch Walker",gender:"male",company:"COMVEYOR",email:"burchwalker@comveyor.com",phone:"+1 (968) 445-2104",registered:"2014-01-07T05:16:30 -06:00"},{id:47,age:31,name:"Solis Lester",gender:"male",company:"MACRONAUT",email:"solislester@macronaut.com",phone:"+1 (857) 422-3242",registered:"2016-10-20T09:40:51 -06:00"},{id:48,age:20,name:"Lorene Mooney",gender:"female",company:"ORGANICA",email:"lorenemooney@organica.com",phone:"+1 (853) 406-2716",registered:"2015-09-17T03:54:41 -06:00"},{id:49,age:34,name:"Rhodes Vega",gender:"male",company:"CHILLIUM",email:"rhodesvega@chillium.com",phone:"+1 (863) 577-3562",registered:"2016-06-15T05:36:10 -06:00"},{id:50,age:28,name:"Pruitt Merrill",gender:"male",company:"KYAGURU",email:"pruittmerrill@kyaguru.com",phone:"+1 (910) 585-3659",registered:"2017-04-02T09:36:00 -06:00"},{id:51,age:33,name:"Bernadine Hart",gender:"female",company:"BITTOR",email:"bernadinehart@bittor.com",phone:"+1 (906) 446-3518",registered:"2015-11-10T07:45:59 -06:00"},{id:52,age:22,name:"Carver Mckenzie",gender:"male",company:"LOCAZONE",email:"carvermckenzie@locazone.com",phone:"+1 (803) 407-3142",registered:"2015-06-24T07:16:02 -06:00"},{id:53,age:27,name:"Dean Cobb",gender:"male",company:"ASSISTIA",email:"deancobb@assistia.com",phone:"+1 (877) 539-3346",registered:"2016-12-02T01:14:47 -06:00"},{id:54,age:32,name:"Camacho Robinson",gender:"male",company:"INSURITY",email:"camachorobinson@insurity.com",phone:"+1 (929) 430-3079",registered:"2016-12-14T08:59:33 -06:00"},{id:55,age:36,name:"Nancy Rodgers",gender:"female",company:"COSMOSIS",email:"nancyrodgers@cosmosis.com",phone:"+1 (873) 489-2643",registered:"2014-08-21T02:19:28 -06:00"},{id:56,age:27,name:"June Henry",gender:"female",company:"PETIGEMS",email:"junehenry@petigems.com",phone:"+1 (808) 536-2445",registered:"2014-03-28T08:36:27 -06:00"},{id:57,age:26,name:"Rochelle Simmons",gender:"female",company:"DANJA",email:"rochellesimmons@danja.com",phone:"+1 (936) 563-3886",registered:"2015-12-07T08:01:18 -06:00"},{id:58,age:32,name:"Alice Thornton",gender:"female",company:"ISOSURE",email:"alicethornton@isosure.com",phone:"+1 (962) 560-2318",registered:"2015-06-07T08:09:50 -06:00"},{id:59,age:39,name:"Clara Downs",gender:"female",company:"ZANILLA",email:"claradowns@zanilla.com",phone:"+1 (977) 595-2657",registered:"2015-06-14T02:33:33 -06:00"}]}}]),e}()).\u0275fac=function(e){return new(e||ha)},ha.\u0275prov=y.Rb({token:ha,factory:ha.\u0275fac,providedIn:"root"}),ha),wa=t("qsxP");function ka(e,a){if(1&e){var t=y.cc();y.bc(0,"div"),y.bc(1,"a"),y.bc(2,"ngx-datatable",26),y.jc("activate",(function(e){return y.Gc(t),y.nc().onActivate(e)})),y.ac(),y.ac(),y.ac()}if(2&e){var c=y.nc();y.Gb(2),y.tc("columnMode","force")("headerHeight",50)("footerHeight",50)("rowHeight",50)("limit",8)("rows",c.rows)("columns",c.columns)}}var Ga,Ca=function(){return{scale:".9",delay:"200ms"}},Ta=function(e){return{value:"*",params:e}},Ia=function(){return{delay:"400ms",scale:".9"}},Aa=((Ga=function(){function e(a,t,c,n,i,r,o,s,l,m,d,u,b){var g=this;_classCallCheck(this,e),this.dialog=a,this.snack=t,this.crudService=c,this.confirmService=n,this.loader=i,this.state=r,this.token=o,this.toastr=s,this.service=l,this.agent=m,this.data=d,this.router=u,this.retail=b,this.rows=[],this.columns=[],this.temp=[],this.role=this.state.role,this.state.user.subscribe((function(e){g.user=e})),this.userdetails=this.data.userdetails}return _createClass(e,[{key:"ngOnInit",value:function(){this.getPartners(),this.columns=this.service.getDataConf(),this.rows=this.temp=this.retailers}},{key:"ngOnDestroy",value:function(){}},{key:"onActivate",value:function(e){"click"==e.type&&(this.agent.selectedretailer=this.retail.selectedretailer=this.data.selectedretailer=e.row,this.router.navigate(["/invoice/retailsummary"]))}},{key:"getPartners",value:function(){this.retailers=this.data.retailers}},{key:"updateFilter",value:function(e){var a=e.target.value.toLowerCase(),t=Object.keys(this.temp[0]);if(t.splice(t.length-1),t.length){var c=this.temp.filter((function(e){for(var c=0;c<=t.length;c++){var n=t[c];if(e[n]&&e[n].toString().toLowerCase().indexOf(a)>-1)return!0}}));this.rows=c}}},{key:"addRetailer",value:function(){var e=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;this.dialog.open(wa.a,{width:"720px",disableClose:!0}).afterClosed().subscribe((function(c){c&&(e.loader.open(),t?e.crudService.addRetailer(c).subscribe((function(a){e.retailers=e.retailers.concat([a]),e.rows=e.temp=e.data.retailers=e.retailers,e.loader.close(),e.snack.open("New Retailer Added!","OK",{duration:4e3})}),(function(a){e.loader.close(),e.toastr.error(a.error,"error occured"),e.snack.open("An error occured, Retailer not created","OK",{duration:4e3})})):e.crudService.updateItem(a._id,c).subscribe((function(a){e.retailers=a,e.loader.close(),e.snack.open("Member Updated!","OK",{duration:4e3})})))}))}}]),e}()).\u0275fac=function(e){return new(e||Ga)(y.Vb(C.b),y.Vb(B.a),y.Vb(w.a),y.Vb(V.a),y.Vb(G.a),y.Vb(f.a),y.Vb(xa.a),y.Vb(T.b),y.Vb(Pa),y.Vb(Qe),y.Vb(P.a),y.Vb(r.g),y.Vb(Je))},Ga.\u0275cmp=y.Pb({type:Ga,selectors:[["app-agent-sale-overview"]],decls:98,vars:18,consts:[[1,"handle"],["mat-raised-button","","color","primary",1,"mb-05",3,"click"],[1,"p-0"],["fxLayout","row wrap"],["fxFlex","100","fxFlex.gt-sm","20","fxFlex.sm","50"],[1,"text-center","pt-1","pb-1","border-right-light"],[1,"text-blue"],[1,"m-0"],[1,"m-0","text-muted"],[1,"text-orange"],[1,"text-center","pt-1","pb-1"],["fxFlex","100","fxFlex.gt-sm","66.67","fxFlex.sm","50"],[1,"margin-333",2,"width","100%"],["matInput","","placeholder","Search for an Retailer","value","",3,"keyup"],[4,"ngIf"],["fxFlex","100","fxFlex.gt-sm","33.3","fxFlex.sm","50"],[1,"m-333"],["multi","false"],["expanded","true"],[1,"border-bottom","pb-1","mb-1"],["fxLyout","row wrap",1,"text-blue","font-weight-bold"],["fxFlex",""],["fxLyout","row wrap",1,"text-muted"],[1,"text-green"],[1,"text-red"],[1,""],[1,"material","bg-white",3,"columnMode","headerHeight","footerHeight","rowHeight","limit","rows","columns","activate"]],template:function(e,a){1&e&&(y.bc(0,"div",0),y.bc(1,"button",1),y.jc("click",(function(e){return a.addRetailer({},!0)})),y.Pc(2," Add A new Retailer "),y.bc(3,"mat-icon"),y.Pc(4," group_add"),y.ac(),y.ac(),y.ac(),y.bc(5,"mat-card",2),y.bc(6,"div",3),y.bc(7,"div",4),y.bc(8,"div",5),y.bc(9,"mat-icon",6),y.Pc(10,"account_balance_wallet"),y.ac(),y.bc(11,"h4",7),y.Pc(12),y.ac(),y.bc(13,"small",8),y.Pc(14,"Total Debt to Publishers"),y.ac(),y.ac(),y.ac(),y.bc(15,"div",4),y.bc(16,"div",5),y.bc(17,"mat-icon",9),y.Pc(18,"attach_money"),y.ac(),y.bc(19,"h4",7),y.Pc(20),y.ac(),y.bc(21,"small",8),y.Pc(22,"Total Sold"),y.ac(),y.ac(),y.ac(),y.bc(23,"div",4),y.bc(24,"div",5),y.bc(25,"mat-icon",6),y.Pc(26,"business_center"),y.ac(),y.bc(27,"h4",7),y.Pc(28),y.ac(),y.bc(29,"small",8),y.Pc(30,"Total Debt of Retailers"),y.ac(),y.ac(),y.ac(),y.bc(31,"div",4),y.bc(32,"div",5),y.bc(33,"mat-icon",6),y.Pc(34,"add"),y.ac(),y.bc(35,"h4",7),y.Pc(36),y.ac(),y.bc(37,"small",8),y.Pc(38,"Total Retail Payments"),y.ac(),y.ac(),y.ac(),y.bc(39,"div",4),y.bc(40,"div",10),y.bc(41,"mat-icon",9),y.Pc(42,"compare_arrows"),y.ac(),y.bc(43,"h4",7),y.Pc(44),y.ac(),y.bc(45,"small",8),y.Pc(46,"Total To Be Paid To Publishers"),y.ac(),y.ac(),y.ac(),y.ac(),y.ac(),y.bc(47,"div",3),y.bc(48,"div",11),y.bc(49,"mat-form-field",12),y.bc(50,"input",13),y.jc("keyup",(function(e){return a.updateFilter(e)})),y.ac(),y.ac(),y.Nc(51,ka,3,7,"div",14),y.ac(),y.bc(52,"div",15),y.bc(53,"div",16),y.bc(54,"mat-accordion",17),y.bc(55,"mat-expansion-panel",18),y.bc(56,"mat-expansion-panel-header"),y.bc(57,"mat-panel-title"),y.Pc(58," Year: 2020/2021 "),y.ac(),y.ac(),y.bc(59,"div",19),y.bc(60,"div",20),y.bc(61,"span"),y.Pc(62,"Total Sale"),y.ac(),y.Wb(63,"span",21),y.bc(64,"span"),y.Pc(65,"8897.45"),y.ac(),y.ac(),y.bc(66,"div",22),y.bc(67,"small"),y.Pc(68,"As At"),y.ac(),y.Wb(69,"span",21),y.bc(70,"small",23),y.Pc(71,"530(+3.73%)"),y.ac(),y.ac(),y.ac(),y.bc(72,"div",19),y.bc(73,"div",20),y.bc(74,"span"),y.Pc(75,"Total Received"),y.ac(),y.Wb(76,"span",21),y.bc(77,"span"),y.Pc(78,"3829.23"),y.ac(),y.ac(),y.bc(79,"div",22),y.bc(80,"small"),y.Pc(81,"As At"),y.ac(),y.Wb(82,"span",21),y.bc(83,"small",24),y.Pc(84,"430(-1.43%)"),y.ac(),y.ac(),y.ac(),y.bc(85,"div",25),y.bc(86,"div",20),y.bc(87,"span"),y.Pc(88,"Total Indebt"),y.ac(),y.Wb(89,"span",21),y.bc(90,"span"),y.Pc(91,"5836.79"),y.ac(),y.ac(),y.bc(92,"div",22),y.bc(93,"small"),y.Pc(94,"As At"),y.ac(),y.Wb(95,"span",21),y.bc(96,"small",23),y.Pc(97,"210(+2.23%)"),y.ac(),y.ac(),y.ac(),y.ac(),y.ac(),y.ac(),y.ac(),y.ac()),2&e&&(y.Gb(5),y.tc("@animate",y.yc(10,Ta,y.xc(9,Ca))),y.Gb(7),y.Qc(a.userdetails.total_debt),y.Gb(8),y.Qc(a.userdetails.total_sold),y.Gb(8),y.Qc(a.userdetails.total_retail_debt),y.Gb(8),y.Qc(a.userdetails.total_retail_payment),y.Gb(8),y.Qc(a.userdetails.total_to_be_paid_to_publisher),y.Gb(4),y.tc("@animate",y.yc(13,Ta,y.xc(12,Ia))),y.Gb(3),y.tc("ngIf",a.retailers),y.Gb(1),y.tc("@animate",y.yc(16,Ta,y.xc(15,Ia))))},directives:[I.b,A.a,R.a,S.c,S.a,N.b,O.b,i.m,F.a,F.c,F.d,F.e,l.c],styles:[".handle[_ngcontent-%COMP%]{bottom:30px}.handle[_ngcontent-%COMP%], .second[_ngcontent-%COMP%]{position:fixed;right:30px;z-index:99}.second[_ngcontent-%COMP%]{bottom:80px}.third[_ngcontent-%COMP%]{position:fixed;bottom:120px;right:30px;z-index:99}"],data:{animation:h.a}}),Ga);function Ra(e,a){if(1&e&&(y.bc(0,"mat-option",24),y.Pc(1),y.ac()),2&e){var t=a.$implicit;y.tc("value",t),y.Gb(1),y.Rc(" ",t," ")}}function Sa(e,a){1&e&&(y.bc(0,"mat-error"),y.Pc(1,"How many items should be on the Invoice"),y.ac())}function Na(e,a){if(1&e&&(y.bc(0,"div"),y.Nc(1,Sa,2,0,"mat-error",11),y.ac()),2&e){var t=y.nc();y.Gb(1),y.tc("ngIf",t.f.numberOfTickets.errors.required)}}function Oa(e,a){if(1&e&&(y.bc(0,"mat-option",36),y.Pc(1),y.ac()),2&e){var t=a.$implicit;y.tc("disabled",0==t.status)("value",t),y.Gb(1),y.Uc(" ",t.name," - ",t.class," - GHC ",t.price," - Edition ",t.edition," ")}}function Fa(e,a){1&e&&(y.bc(0,"mat-error"),y.Pc(1,"You must select an Item"),y.ac())}function _a(e,a){if(1&e&&(y.bc(0,"div"),y.Nc(1,Fa,2,0,"mat-error",11),y.ac()),2&e){var t=y.nc().$implicit;y.Gb(1),y.tc("ngIf",t.controls.item.errors.required)}}function Ma(e,a){1&e&&(y.bc(0,"small",38),y.Pc(1,"Quantity must have a value"),y.ac())}function La(e,a){if(1&e&&(y.bc(0,"div"),y.Nc(1,Ma,2,0,"small",37),y.ac()),2&e){var t=y.nc().$implicit;y.Gb(1),y.tc("ngIf",t.controls.quantity.errors.required)}}function Wa(e,a){if(1&e){var t=y.cc();y.bc(0,"div"),y.bc(1,"h5",25),y.Pc(2),y.ac(),y.bc(3,"form",26),y.bc(4,"div",5),y.bc(5,"div",27),y.bc(6,"div",28),y.bc(7,"mat-label"),y.Pc(8,"Select and Item:"),y.ac(),y.bc(9,"mat-select",29),y.Nc(10,Oa,2,6,"mat-option",30),y.ac(),y.Nc(11,_a,2,1,"div",11),y.ac(),y.ac(),y.bc(12,"div",31),y.bc(13,"div",28),y.bc(14,"mat-form-field",32),y.Wb(15,"input",33),y.ac(),y.Nc(16,La,2,1,"div",11),y.ac(),y.ac(),y.Wb(17,"span",17),y.bc(18,"div",34),y.bc(19,"button",35),y.jc("click",(function(e){y.Gc(t);var c=a.index;return y.nc().removeitem(c)})),y.Pc(20,"Remove"),y.ac(),y.ac(),y.ac(),y.ac(),y.ac()}if(2&e){var c=a.$implicit,n=a.index,i=y.nc();y.Gb(2),y.Rc("Item ",n+1,""),y.Gb(1),y.tc("formGroup",c),y.Gb(7),y.tc("ngForOf",i.pitems),y.Gb(1),y.tc("ngIf",i.submitted&&c.controls.item.errors),y.Gb(5),y.tc("ngIf",i.submitted&&c.controls.quantity.errors)}}function Ea(e,a){1&e&&(y.bc(0,"button",39),y.Pc(1,"Discard Sale Return to Agents"),y.ac())}function Da(e,a){1&e&&(y.bc(0,"button",40),y.Pc(1,"Discard Sale Return to Retailers"),y.ac())}function Va(e,a){if(1&e){var t=y.cc();y.bc(0,"button",41),y.jc("click",(function(e){return y.Gc(t),y.nc().calculateSale()})),y.Pc(1,"Make Sale"),y.ac()}}function Ha(e,a){if(1&e&&(y.bc(0,"div",42),y.bc(1,"div",43),y.Pc(2,"Total: "),y.bc(3,"b"),y.Pc(4),y.ac(),y.ac(),y.Wb(5,"span",44),y.bc(6,"div",43),y.Pc(7,"Sale After Discount: "),y.bc(8,"b"),y.Pc(9),y.ac(),y.ac(),y.Wb(10,"span",45),y.ac()),2&e){var t=y.nc();y.Gb(4),y.Rc("GHC ",t.totalsale,""),y.Gb(5),y.Rc("GHC ",t.afterdiscount,"")}}var qa,ja,Ua,za=((ja=function(){function e(a,t,c,n,i,r,o){_classCallCheck(this,e),this.agent=a,this.crudService=t,this.fb=c,this.loader=n,this.toastr=i,this.data=r,this.router=o,this.submitted=!1}return _createClass(e,[{key:"ngOnInit",value:function(){this.selectedretailer=this.agent.selectedretailer,this.role=this.data.role,this.dynamicForm=this.fb.group({numberOfTickets:["",o.s.required],retailer:this.selectedretailer,discount:["",o.s.required],tickets:new o.c([])}),this.pitems=this.items=this.data.stocks,this.length=Array(this.items.length).fill(1).map((function(e,a){return a+1}))}},{key:"onChangeTickets",value:function(e){var a=e.value||0;if(this.t.length<a)for(var t=this.t.length;t<a;t++)this.t.push(this.fb.group({item:["",o.s.required],quantity:["",[o.s.required]]}));else for(var c=this.t.length;c>=a;c--)this.t.removeAt(c)}},{key:"highlight",value:function(e){console.log(e)}},{key:"itemchange",value:function(e){e.value.status=0,this.pitems=this.pitems.filter((function(a){return a.id!==e.value.id})),this.pitems=this.pitems.concat([e.value])}},{key:"removeitem",value:function(e){this.t.removeAt(e)}},{key:"onSubmit",value:function(){if(this.submitted=!0,!this.dynamicForm.invalid){var e=this.dynamicForm.value.tickets,a=this.dynamicForm.value.discount;this.totalsale=0;for(var t=0,c=e.length;t<c;t++)this.totalsale=this.totalsale+e[t].item.price*e[t].quantity;for(this.afterdiscount=this.totalsale*(1-a/100),t=1,c=this.dynamicForm.value.tickets.length;t<c;t++);}}},{key:"onReset",value:function(){this.submitted=!1,this.dynamicForm.reset(),this.t.clear()}},{key:"onClear",value:function(){this.submitted=!1,this.t.reset()}},{key:"calculateSale",value:function(){var e=this;this.loader.open(),this.crudService.agentCalculateSale(this.dynamicForm.value).subscribe((function(a){e.loader.close(),e.data.newsaledata=e.dynamicForm.value,e.router.navigate(["/invoice/preinvoice"]),e.toastr.success("succes",a)}),(function(a){e.loader.close(),e.toastr.error("error",a.error)}))}},{key:"f",get:function(){return this.dynamicForm.controls}},{key:"t",get:function(){return this.f.tickets}}]),e}()).\u0275fac=function(e){return new(e||ja)(y.Vb(Je),y.Vb(w.a),y.Vb(o.d),y.Vb(G.a),y.Vb(T.b),y.Vb(P.a),y.Vb(r.g))},ja.\u0275cmp=y.Pb({type:ja,selectors:[["app-agent-new-sale"]],decls:34,vars:8,consts:[[1,"p-0"],[1,""],[1,"card-title-text"],[3,"formGroup","ngSubmit"],[1,"card","m-3"],["fxLayout","row wrap"],["fxFlex","100","fxFlex.gt-xs","30",1,"pr-1"],[1,"pt-1","pb-1"],["formControlName","numberOfTickets","required","",3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],["matSuffix","",1,"secondary-text"],[4,"ngIf"],["fxFlex","100","fxFlex.gt-xs","30"],["matInput","","placeholder","Discount","formControlName","discount","required",""],[4,"ngFor","ngForOf"],[1,"card-footer","text-center"],["mat-raised-button","","color","primary",1,"mb-05"],["fxFlex","8px"],["mat-raised-button","","color","warn","type","reset",1,"mb-05",3,"click"],["mat-raised-button","","class","mb-05","color","accent","routerLink","/invoice/home",4,"ngIf"],["mat-raised-button","","class","mb-05","color","accent","routerLink","/invoice/retail",4,"ngIf"],["mat-raised-button","","class","mb-05","color","accent",3,"click",4,"ngIf"],["fxFlex","200px"],["class","profile-title text-center mb-1",4,"ngIf"],[3,"value"],["colour","accent",1,"card-title"],[3,"formGroup"],["fxFlex","100","fxFlex.gt-xs","40",1,"pr-1"],[1,"pb-1"],["formControlName","item","required",""],[3,"disabled","value",4,"ngFor","ngForOf"],["fxFlex","100","fxFlex.gt-xs","40"],[1,"full-width"],["matInput","","name","quantity","formControlName","quantity","placeholder","Quantity (Min Length: 4, Max Length: 9)","value",""],["fxFlex","100","fxFlex.gt-xs","10"],["mat-raised-button","","color","primary",1,"mb-05",3,"click"],[3,"disabled","value"],["class","form-error-msg",4,"ngIf"],[1,"form-error-msg"],["mat-raised-button","","color","accent","routerLink","/invoice/home",1,"mb-05"],["mat-raised-button","","color","accent","routerLink","/invoice/retail",1,"mb-05"],["mat-raised-button","","color","accent",1,"mb-05",3,"click"],[1,"profile-title","text-center","mb-1"],[1,"main-title"],["fxFlex","100px"],["fxFlex","20px"]],template:function(e,a){1&e&&(y.bc(0,"mat-card",0),y.bc(1,"mat-card-title",1),y.bc(2,"div",2),y.Pc(3,"Selling Form"),y.ac(),y.Wb(4,"mat-divider"),y.ac(),y.bc(5,"mat-card-content"),y.bc(6,"form",3),y.jc("ngSubmit",(function(e){return a.onSubmit()})),y.bc(7,"div",4),y.bc(8,"div",5),y.bc(9,"div",6),y.bc(10,"mat-form-field",7),y.bc(11,"mat-label"),y.Pc(12,"Number of Items:"),y.ac(),y.bc(13,"mat-select",8),y.jc("selectionChange",(function(e){return a.onChangeTickets(e)})),y.Nc(14,Ra,2,2,"mat-option",9),y.ac(),y.bc(15,"mat-icon",10),y.Pc(16,"outlined_flag"),y.ac(),y.Nc(17,Na,2,1,"div",11),y.ac(),y.ac(),y.bc(18,"div",12),y.bc(19,"mat-form-field",7),y.Wb(20,"input",13),y.ac(),y.ac(),y.ac(),y.Nc(21,Wa,21,5,"div",14),y.bc(22,"div",15),y.bc(23,"button",16),y.Pc(24,"Calculate Sale"),y.ac(),y.Wb(25,"span",17),y.bc(26,"button",18),y.jc("click",(function(e){return a.onReset()})),y.Pc(27,"Reset"),y.ac(),y.Wb(28,"span",17),y.Nc(29,Ea,2,0,"button",19),y.Nc(30,Da,2,0,"button",20),y.Nc(31,Va,2,0,"button",21),y.Wb(32,"span",22),y.Nc(33,Ha,11,2,"div",23),y.ac(),y.ac(),y.ac(),y.ac(),y.ac()),2&e&&(y.Gb(6),y.tc("formGroup",a.dynamicForm),y.Gb(8),y.tc("ngForOf",a.length),y.Gb(3),y.tc("ngIf",a.submitted&&a.f.numberOfTickets.errors),y.Gb(4),y.tc("ngForOf",a.t.controls),y.Gb(8),y.tc("ngIf",a.role.publisher),y.Gb(1),y.tc("ngIf",a.role.agent),y.Gb(1),y.tc("ngIf",a.afterdiscount),y.Gb(2),y.tc("ngIf",a.afterdiscount))},directives:[R.a,R.e,Y.a,R.b,o.t,o.n,o.h,S.c,S.a,N.b,N.e,H.a,o.m,o.g,o.r,i.l,A.a,N.f,i.m,O.b,o.b,I.b,q.p,N.a,r.h],styles:[""]}),ja),Ba=((qa=function(){function e(a,t){_classCallCheck(this,e),this.data=a,this.crudeService=t}return _createClass(e,[{key:"resolve",value:function(e,a){var t=this;return new Promise((function(e,a){Promise.all([t.getStocks()]).then((function(){e()}),a)}))}},{key:"getStocks",value:function(){var e=this;return new Promise((function(a,t){e.data.stocks?(e.stocks=e.data.stocks,a(e.stocks)):e.crudeService.getStocks().subscribe((function(t){e.stocks=t.data,e.data.stocks=t.data,a(e.stocks)}),t)}))}}]),e}()).\u0275fac=function(e){return new(e||qa)(y.fc(P.a),y.fc(w.a))},qa.\u0275prov=y.Rb({token:qa,factory:qa.\u0275fac,providedIn:"root"}),qa),Ka=[{path:"",children:[{path:"home",component:D,data:{title:"home",breadcrumb:"HOME"},resolve:{subject:(Ua=function(){function e(a,t,c){_classCallCheck(this,e),this.router=a,this.crudeService=t,this.data=c}return _createClass(e,[{key:"resolve",value:function(e,a){var t=this;return new Promise((function(e,a){Promise.all([t.getApprovedPartners(),t.getAgents(),t.getUserDetails()]).then((function(){e()}),a)}))}},{key:"getAgents",value:function(){var e=this;return new Promise((function(a,t){e.data.agents?(e.agents=e.data.agents,a(e.agents)):e.crudeService.getAgents().subscribe((function(t){e.agents=t.data,e.data.agents=t,a(e.agents)}),t)}))}},{key:"getApprovedPartners",value:function(){var e=this;return new Promise((function(a,t){e.data.approvedpartners?(e.approvedpartners=e.data.approvedpartners,a(e.approvedpartners)):e.crudeService.getApprovedPartners().subscribe((function(t){e.approvedpartners=t.data,e.data.approvedpartners=t.data,a(e.approvedpartners)}),t)}))}},{key:"getUserDetails",value:function(){var e=this;return new Promise((function(a,t){e.data.userdetails?(e.userdetails=e.data.userdetails,a(e.userdetails)):e.crudeService.getUserDetails().subscribe((function(t){e.userdetails=t,e.data.userdetails=t,a(e.userdetails)}),t)}))}}]),e}(),Ua.\u0275fac=function(e){return new(e||Ua)(y.fc(r.g),y.fc(w.a),y.fc(P.a))},Ua.\u0275prov=y.Rb({token:Ua,factory:Ua.\u0275fac,providedIn:"root"}),Ua)}},{path:"agentsummary",component:ue,data:{title:"agentsummary",breadcrumb:"AGENT SUMMARY"},resolve:{subject:k}},{path:"newsale",component:Ce,data:{title:"newsale",breadcrumb:"NEW SALE"},resolve:{subject:Ye}},{path:"retailsummary",component:ya,data:{title:"retailsummary",breadcrumb:"RETAIL SUMMARY"},resolve:{subject:Je}},{path:"retail",component:Aa,data:{title:"retailhome",breadcrumb:"RETAIL HOME"},resolve:{subject:Qe}},{path:"agentnewsale",component:za,data:{title:"agentnewsale",breadcrumb:"AGENT NEW SALE"},resolve:{subject:Ba}}]},{path:"preinvoice",component:Ke,data:{title:"preinvoice",breadcrumb:"AGREEMENT INVOICE"}}],Ya=t("MutI");t.d(a,"InvoiceModule",(function(){return Ja}));var Qa,Ja=((Qa=function e(){_classCallCheck(this,e)}).\u0275mod=y.Tb({type:Qa}),Qa.\u0275inj=y.Sb({factory:function(e){return new(e||Qa)},providers:[T.b,k],imports:[[i.c,o.i,s.a,l.d,m.a,d.a,u.a,p.a,O.c,R.d,I.c,Ya.d,o.q,s.a,b.b,g.a,r.k.forChild(Ka)]]}),Qa)}}]);