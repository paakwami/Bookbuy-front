(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{jEVh:function(e,t,a){"use strict";a.r(t);var n=a("ofXK"),c=a("tyNb"),i=a("3Pt+"),r=a("YUcS"),o=a("lDzL"),s=a("LPYB"),m=a("7pIB"),l=a("aYsj"),d=a("0Lhs"),u=a("PCNd"),b=a("zMWy"),g=a("qP9D"),h=a("yz3j"),p=a("nm5K"),f=a("GmJt"),y=a("3kSh"),v=a("3sEA"),x=a("fXoL");let w=(()=>{class e{constructor(){}getDataConf(){return[{prop:"id"},{prop:"name",name:"Name"}]}getAll(){return[{id:0,age:40,name:"Mclean Brady",gender:"male",company:"JAMNATION",email:"mcleanbrady@jamnation.com",phone:"+1 (875) 472-2061",registered:"2014-10-20T04:54:00 -06:00"},{id:1,age:39,name:"Dillon Ruiz",gender:"male",company:"ACRODANCE",email:"dillonruiz@acrodance.com",phone:"+1 (858) 562-2261",registered:"2016-08-07T12:15:31 -06:00"},{id:2,age:39,name:"Robyn Knox",gender:"female",company:"GLUID",email:"robynknox@gluid.com",phone:"+1 (826) 491-3098",registered:"2017-02-12T02:43:39 -06:00"},{id:3,age:32,name:"Santana Wagner",gender:"male",company:"INTRADISK",email:"santanawagner@intradisk.com",phone:"+1 (841) 550-2276",registered:"2016-03-28T11:22:15 -06:00"},{id:4,age:34,name:"Jennie Branch",gender:"female",company:"VERAQ",email:"jenniebranch@veraq.com",phone:"+1 (895) 483-3982",registered:"2015-03-16T01:30:06 -06:00"},{id:5,age:39,name:"Farrell Preston",gender:"male",company:"HONOTRON",email:"farrellpreston@honotron.com",phone:"+1 (993) 534-2843",registered:"2015-08-14T09:07:47 -06:00"},{id:6,age:38,name:"Garner Reyes",gender:"male",company:"VIOCULAR",email:"garnerreyes@viocular.com",phone:"+1 (973) 495-3873",registered:"2016-03-23T03:47:23 -06:00"},{id:7,age:32,name:"Ella Boone",gender:"female",company:"ARCHITAX",email:"ellaboone@architax.com",phone:"+1 (945) 491-2580",registered:"2015-07-01T09:35:10 -06:00"},{id:8,age:30,name:"Kathryn Owens",gender:"female",company:"CYCLONICA",email:"kathrynowens@cyclonica.com",phone:"+1 (978) 598-2767",registered:"2014-03-11T11:38:12 -06:00"},{id:9,age:22,name:"Byers Santana",gender:"male",company:"KAGGLE",email:"byerssantana@kaggle.com",phone:"+1 (984) 546-3400",registered:"2015-08-17T02:48:09 -06:00"},{id:10,age:30,name:"Nina Middleton",gender:"female",company:"ZINCA",email:"ninamiddleton@zinca.com",phone:"+1 (829) 553-2060",registered:"2014-12-20T09:53:27 -06:00"},{id:11,age:38,name:"Nixon Morrow",gender:"male",company:"CUBIX",email:"nixonmorrow@cubix.com",phone:"+1 (825) 501-3712",registered:"2014-09-10T10:23:34 -06:00"},{id:12,age:28,name:"Bonita Pate",gender:"female",company:"MAGNEATO",email:"bonitapate@magneato.com",phone:"+1 (808) 497-3968",registered:"2016-01-20T02:45:43 -06:00"},{id:13,age:30,name:"Amy Hyde",gender:"female",company:"UNDERTAP",email:"amyhyde@undertap.com",phone:"+1 (867) 555-2669",registered:"2015-04-12T08:39:31 -06:00"},{id:14,age:20,name:"Cortez Camacho",gender:"male",company:"IDEGO",email:"cortezcamacho@idego.com",phone:"+1 (986) 546-3364",registered:"2014-08-21T11:00:20 -06:00"},{id:15,age:29,name:"Castaneda Armstrong",gender:"male",company:"INTERFIND",email:"castanedaarmstrong@interfind.com",phone:"+1 (975) 557-2651",registered:"2014-11-15T10:38:24 -06:00"},{id:16,age:37,name:"Liza West",gender:"female",company:"COWTOWN",email:"lizawest@cowtown.com",phone:"+1 (852) 415-2358",registered:"2017-05-06T09:46:03 -06:00"},{id:17,age:37,name:"Roth Baird",gender:"male",company:"RODEMCO",email:"rothbaird@rodemco.com",phone:"+1 (840) 417-3313",registered:"2015-04-18T10:58:50 -06:00"},{id:18,age:26,name:"Alexis Blackburn",gender:"female",company:"PREMIANT",email:"alexisblackburn@premiant.com",phone:"+1 (957) 576-2362",registered:"2014-08-08T12:59:38 -06:00"},{id:19,age:35,name:"Sadie Tillman",gender:"female",company:"DUOFLEX",email:"sadietillman@duoflex.com",phone:"+1 (843) 499-3330",registered:"2016-02-21T09:25:03 -06:00"},{id:20,age:27,name:"Sharron Conley",gender:"female",company:"QUARMONY",email:"sharronconley@quarmony.com",phone:"+1 (951) 459-2465",registered:"2014-10-19T06:04:36 -06:00"},{id:21,age:27,name:"Jordan Mccoy",gender:"male",company:"ACCUSAGE",email:"jordanmccoy@accusage.com",phone:"+1 (825) 568-3296",registered:"2017-01-27T01:53:02 -06:00"},{id:22,age:35,name:"Rene House",gender:"female",company:"INSURETY",email:"renehouse@insurety.com",phone:"+1 (838) 578-3190",registered:"2015-11-07T10:07:58 -06:00"},{id:23,age:38,name:"Bernice Berry",gender:"female",company:"ROCKYARD",email:"berniceberry@rockyard.com",phone:"+1 (885) 466-2145",registered:"2014-04-17T07:43:02 -06:00"},{id:24,age:30,name:"Bowen Beach",gender:"male",company:"TETRATREX",email:"bowenbeach@tetratrex.com",phone:"+1 (843) 493-3197",registered:"2015-07-27T03:38:33 -06:00"},{id:25,age:31,name:"Monica Leblanc",gender:"female",company:"TALENDULA",email:"monicaleblanc@talendula.com",phone:"+1 (911) 524-2349",registered:"2016-04-10T08:33:17 -06:00"},{id:26,age:36,name:"Lina Rivas",gender:"female",company:"BOINK",email:"linarivas@boink.com",phone:"+1 (983) 572-2470",registered:"2014-08-28T09:44:32 -06:00"},{id:27,age:25,name:"Joyce Yang",gender:"female",company:"SPORTAN",email:"joyceyang@sportan.com",phone:"+1 (807) 491-3917",registered:"2015-07-22T12:58:31 -06:00"},{id:28,age:20,name:"Lana Joseph",gender:"female",company:"BOLAX",email:"lanajoseph@bolax.com",phone:"+1 (942) 467-2363",registered:"2016-10-30T06:13:50 -06:00"},{id:29,age:20,name:"Jimenez Guerrero",gender:"male",company:"INSURON",email:"jimenezguerrero@insuron.com",phone:"+1 (991) 585-3706",registered:"2016-09-15T01:35:16 -06:00"},{id:30,age:35,name:"Williams Bentley",gender:"male",company:"ZEAM",email:"williamsbentley@zeam.com",phone:"+1 (837) 490-2610",registered:"2014-01-06T01:04:11 -06:00"},{id:31,age:27,name:"Doreen Garrett",gender:"female",company:"ENERSAVE",email:"doreengarrett@enersave.com",phone:"+1 (920) 522-2847",registered:"2017-01-25T03:24:47 -06:00"},{id:32,age:34,name:"Shaw Cannon",gender:"male",company:"EBIDCO",email:"shawcannon@ebidco.com",phone:"+1 (903) 530-2676",registered:"2014-04-11T04:49:08 -06:00"},{id:33,age:25,name:"Sonya Skinner",gender:"female",company:"EXOSWITCH",email:"sonyaskinner@exoswitch.com",phone:"+1 (923) 428-3014",registered:"2014-02-09T11:59:54 -06:00"},{id:34,age:27,name:"Todd Potter",gender:"male",company:"MUSIX",email:"toddpotter@musix.com",phone:"+1 (817) 491-2268",registered:"2015-04-06T11:10:47 -06:00"},{id:35,age:21,name:"Celina Rose",gender:"female",company:"TWIIST",email:"celinarose@twiist.com",phone:"+1 (863) 599-2063",registered:"2015-09-04T07:59:29 -06:00"},{id:36,age:40,name:"Ingrid Day",gender:"female",company:"ZBOO",email:"ingridday@zboo.com",phone:"+1 (921) 447-2312",registered:"2016-10-01T08:26:07 -06:00"},{id:37,age:24,name:"Lynch Stark",gender:"male",company:"PYRAMIA",email:"lynchstark@pyramia.com",phone:"+1 (995) 431-2354",registered:"2014-01-26T11:38:48 -06:00"},{id:38,age:29,name:"Helga Mendez",gender:"female",company:"COMVEYER",email:"helgamendez@comveyer.com",phone:"+1 (897) 418-3815",registered:"2015-10-03T08:58:45 -06:00"},{id:39,age:30,name:"Corinne Calhoun",gender:"female",company:"ADORNICA",email:"corinnecalhoun@adornica.com",phone:"+1 (841) 564-3617",registered:"2016-05-24T10:42:36 -06:00"},{id:40,age:40,name:"Winifred Conrad",gender:"female",company:"SATIANCE",email:"winifredconrad@satiance.com",phone:"+1 (885) 533-2416",registered:"2017-03-01T06:12:08 -06:00"},{id:41,age:27,name:"Lawanda Stevenson",gender:"female",company:"ZILLACTIC",email:"lawandastevenson@zillactic.com",phone:"+1 (823) 535-3187",registered:"2014-07-07T05:26:22 -06:00"},{id:42,age:30,name:"Kirsten Long",gender:"female",company:"IMAGEFLOW",email:"kirstenlong@imageflow.com",phone:"+1 (809) 592-2264",registered:"2014-05-08T07:41:56 -06:00"},{id:43,age:39,name:"Summer Farley",gender:"female",company:"ENTOGROK",email:"summerfarley@entogrok.com",phone:"+1 (814) 490-3578",registered:"2016-10-28T10:02:34 -06:00"},{id:44,age:31,name:"Mendoza Randall",gender:"male",company:"COREPAN",email:"mendozarandall@corepan.com",phone:"+1 (846) 501-2860",registered:"2015-12-14T12:58:18 -06:00"},{id:45,age:27,name:"Marcy Doyle",gender:"female",company:"VORATAK",email:"marcydoyle@voratak.com",phone:"+1 (848) 411-2728",registered:"2014-02-12T10:46:27 -06:00"},{id:46,age:30,name:"Burch Walker",gender:"male",company:"COMVEYOR",email:"burchwalker@comveyor.com",phone:"+1 (968) 445-2104",registered:"2014-01-07T05:16:30 -06:00"},{id:47,age:31,name:"Solis Lester",gender:"male",company:"MACRONAUT",email:"solislester@macronaut.com",phone:"+1 (857) 422-3242",registered:"2016-10-20T09:40:51 -06:00"},{id:48,age:20,name:"Lorene Mooney",gender:"female",company:"ORGANICA",email:"lorenemooney@organica.com",phone:"+1 (853) 406-2716",registered:"2015-09-17T03:54:41 -06:00"},{id:49,age:34,name:"Rhodes Vega",gender:"male",company:"CHILLIUM",email:"rhodesvega@chillium.com",phone:"+1 (863) 577-3562",registered:"2016-06-15T05:36:10 -06:00"},{id:50,age:28,name:"Pruitt Merrill",gender:"male",company:"KYAGURU",email:"pruittmerrill@kyaguru.com",phone:"+1 (910) 585-3659",registered:"2017-04-02T09:36:00 -06:00"},{id:51,age:33,name:"Bernadine Hart",gender:"female",company:"BITTOR",email:"bernadinehart@bittor.com",phone:"+1 (906) 446-3518",registered:"2015-11-10T07:45:59 -06:00"},{id:52,age:22,name:"Carver Mckenzie",gender:"male",company:"LOCAZONE",email:"carvermckenzie@locazone.com",phone:"+1 (803) 407-3142",registered:"2015-06-24T07:16:02 -06:00"},{id:53,age:27,name:"Dean Cobb",gender:"male",company:"ASSISTIA",email:"deancobb@assistia.com",phone:"+1 (877) 539-3346",registered:"2016-12-02T01:14:47 -06:00"},{id:54,age:32,name:"Camacho Robinson",gender:"male",company:"INSURITY",email:"camachorobinson@insurity.com",phone:"+1 (929) 430-3079",registered:"2016-12-14T08:59:33 -06:00"},{id:55,age:36,name:"Nancy Rodgers",gender:"female",company:"COSMOSIS",email:"nancyrodgers@cosmosis.com",phone:"+1 (873) 489-2643",registered:"2014-08-21T02:19:28 -06:00"},{id:56,age:27,name:"June Henry",gender:"female",company:"PETIGEMS",email:"junehenry@petigems.com",phone:"+1 (808) 536-2445",registered:"2014-03-28T08:36:27 -06:00"},{id:57,age:26,name:"Rochelle Simmons",gender:"female",company:"DANJA",email:"rochellesimmons@danja.com",phone:"+1 (936) 563-3886",registered:"2015-12-07T08:01:18 -06:00"},{id:58,age:32,name:"Alice Thornton",gender:"female",company:"ISOSURE",email:"alicethornton@isosure.com",phone:"+1 (962) 560-2318",registered:"2015-06-07T08:09:50 -06:00"},{id:59,age:39,name:"Clara Downs",gender:"female",company:"ZANILLA",email:"claradowns@zanilla.com",phone:"+1 (977) 595-2657",registered:"2015-06-14T02:33:33 -06:00"}]}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=x.Rb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var T=a("FHx2");let P=(()=>{class e{constructor(e,t,a){this.router=e,this.crudeService=t,this.data=a,this.data.selectedagent=this.selectedagent}resolve(e,t){return new Promise((e,t)=>{Promise.all([this.getPaymentMethods(),this.getPayments()]).then(()=>{e()},t)})}getPaymentMethods(){return new Promise((e,t)=>{this.data.paymentmethods?(this.paymentmethods=this.data.paymentmethods,e(this.paymentmethods)):this.crudeService.getPaymentMethod().subscribe(t=>{this.paymentmethods=t.data,this.data.paymentmethods=t.data,e(this.paymentmethods)},t)})}getPayments(){return new Promise((e,t)=>{this.crudeService.getPayments(this.selectedagent.id).subscribe(t=>{this.payments=t.data,e(this.payments)},t)})}}return e.\u0275fac=function(t){return new(t||e)(x.fc(c.g),x.fc(p.a),x.fc(T.a))},e.\u0275prov=x.Rb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var I=a("0IaG"),G=a("dNgK"),k=a("5eHb"),N=a("kmnG"),R=a("qFsG"),S=a("bTqV");function C(e,t){if(1&e){const e=x.cc();x.bc(0,"button",5),x.jc("click",(function(t){return x.Gc(e),x.nc().requestAgent({},!0)})),x.Pc(1,"Ask an Agent to Sell your Stock"),x.ac()}}function A(e,t){if(1&e){const e=x.cc();x.bc(0,"div",6),x.bc(1,"a"),x.bc(2,"ngx-datatable",7),x.jc("activate",(function(t){return x.Gc(e),x.nc().onActivate(t)})),x.ac(),x.ac(),x.ac()}if(2&e){const e=x.nc();x.Gb(2),x.tc("columnMode","force")("headerHeight",50)("footerHeight",50)("rowHeight",50)("limit",8)("rows",e.rows)("columns",e.columns)}}let O=(()=>{class e{constructor(e,t,a,n,c,i,r,o,s,m,l,d){this.dialog=e,this.snack=t,this.crudService=a,this.confirmService=n,this.loader=c,this.data=i,this.state=r,this.token=o,this.toastr=s,this.service=m,this.agent=l,this.router=d,this.rows=[],this.columns=[],this.temp=[],this.role=this.state.role,this.state.user.subscribe(e=>{this.user=e})}ngOnInit(){this.partners=this.rows=this.temp=this.data.partners,this.columns=this.service.getDataConf()}ngOnDestroy(){}onActivate(e){"click"==e.type&&(this.agent.selectedagent=e.row,this.router.navigate(["/invoice/agentsummary"]))}updateFilter(e){const t=e.target.value.toLowerCase();var a=Object.keys(this.temp[0]);if(a.splice(a.length-1),!a.length)return;const n=this.temp.filter((function(e){for(let n=0;n<=a.length;n++){let c=a[n];if(e[c]&&e[c].toString().toLowerCase().indexOf(t)>-1)return!0}}));this.rows=n}}return e.\u0275fac=function(t){return new(t||e)(x.Vb(I.b),x.Vb(G.a),x.Vb(p.a),x.Vb(y.a),x.Vb(v.a),x.Vb(T.a),x.Vb(g.a),x.Vb(h.a),x.Vb(k.b),x.Vb(w),x.Vb(P),x.Vb(c.g))},e.\u0275cmp=x.Pb({type:e,selectors:[["app-sale-overview"]],decls:5,vars:2,consts:[[1,"m-333"],["mat-raised-button","","class","mb-05","color","primary",3,"click",4,"ngIf"],[1,"margin-333",2,"width","100%"],["matInput","","placeholder","Type to filter all columns","value","",3,"keyup"],["class","mat-box-shadow margin-333",4,"ngIf"],["mat-raised-button","","color","primary",1,"mb-05",3,"click"],[1,"mat-box-shadow","margin-333"],[1,"material","bg-white",3,"columnMode","headerHeight","footerHeight","rowHeight","limit","rows","columns","activate"]],template:function(e,t){1&e&&(x.bc(0,"div",0),x.Nc(1,C,2,0,"button",1),x.ac(),x.bc(2,"mat-form-field",2),x.bc(3,"input",3),x.jc("keyup",(function(e){return t.updateFilter(e)})),x.ac(),x.ac(),x.Nc(4,A,3,7,"div",4)),2&e&&(x.Gb(1),x.tc("ngIf",t.role.publisher),x.Gb(3),x.tc("ngIf",t.partners))},directives:[n.m,N.b,R.b,S.b,o.c],styles:[""],data:{animation:f.a}}),e})();var F=a("XiUz"),M=a("d3UM"),L=a("NFeN"),E=a("FKr1");function V(e,t){if(1&e&&(x.bc(0,"mat-option",13),x.Pc(1),x.ac()),2&e){const e=t.$implicit;x.tc("value",e.id),x.Gb(1),x.Rc(" ",e.name," ")}}let H=(()=>{class e{constructor(e,t,a){this.data=e,this.dialogRef=t,this.fb=a}ngOnInit(){this.paymentmethods=this.data.paymentmethods,this.selectedagent=this.data.selectedagent,this.itemForm=this.fb.group({amount:["",i.s.required],payment_method_id:["",i.s.required],agent_id:this.selectedagent.id})}submit(){this.dialogRef.close(this.itemForm.value)}}return e.\u0275fac=function(t){return new(t||e)(x.Vb(I.a),x.Vb(I.f),x.Vb(i.d))},e.\u0275cmp=x.Pb({type:e,selectors:[["app-makepayment-popup"]],decls:23,vars:4,consts:[["matDialogTitle",""],[3,"formGroup","ngSubmit"],["fxLayout","row wrap","fxLayout.lt-sm","column"],["fxFlex","100",1,"pr-1"],[1,"full-width"],["matInput","","name","amount","placeholder","Amount",3,"formControl"],["formControlName","payment_method_id","required",""],[3,"value",4,"ngFor","ngForOf"],["matSuffix","",1,"secondary-text"],["fxFlex","100",1,"mt-1"],["mat-raised-button","","color","primary",3,"disabled"],["fxFlex",""],["mat-button","","color","warn","type","button",3,"click"],[3,"value"]],template:function(e,t){1&e&&(x.bc(0,"h1",0),x.Pc(1,"Add A New Item"),x.ac(),x.bc(2,"form",1),x.jc("ngSubmit",(function(e){return t.submit()})),x.bc(3,"div",2),x.bc(4,"div",3),x.bc(5,"mat-form-field",4),x.Wb(6,"input",5),x.ac(),x.ac(),x.bc(7,"div",3),x.bc(8,"mat-form-field",4),x.bc(9,"mat-label"),x.Pc(10,"Payment Was Made Through"),x.ac(),x.bc(11,"mat-select",6),x.Nc(12,V,2,2,"mat-option",7),x.ac(),x.bc(13,"mat-icon",8),x.Pc(14,"outlined_flag"),x.ac(),x.bc(15,"mat-error"),x.Pc(16,"payment type is required!"),x.ac(),x.ac(),x.ac(),x.bc(17,"div",9),x.bc(18,"button",10),x.Pc(19,"Save"),x.ac(),x.Wb(20,"span",11),x.bc(21,"button",12),x.jc("click",(function(e){return t.dialogRef.close(!1)})),x.Pc(22,"Cancel"),x.ac(),x.ac(),x.ac(),x.ac()),2&e&&(x.Gb(2),x.tc("formGroup",t.itemForm),x.Gb(4),x.tc("formControl",t.itemForm.controls.amount),x.Gb(6),x.tc("ngForOf",t.paymentmethods),x.Gb(6),x.tc("disabled",t.itemForm.invalid))},directives:[I.g,i.t,i.n,i.h,F.c,F.a,N.b,R.b,i.b,i.m,i.f,N.e,M.a,i.g,i.r,n.l,L.a,N.f,N.a,S.b,E.p],styles:[""]}),e})();var W=a("Wp6s");function D(e,t){if(1&e&&(x.bc(0,"p"),x.Pc(1),x.ac()),2&e){const e=x.nc();x.Gb(1),x.Qc(e.selectedagent.name)}}function j(e,t){if(1&e&&x.Pc(0),2&e){const e=t.row;x.Rc(" ",null==e?null:e.amount," ")}}function q(e,t){if(1&e&&x.Pc(0),2&e){const e=t.row;x.Rc(" ",null==e?null:e.amount," ")}}const z=function(){return{y:"50px",delay:"300ms"}},U=function(e){return{value:"*",params:e}};let B=(()=>{class e{constructor(e,t,a,n,c,i,r){this.agent=e,this.dialog=t,this.snack=a,this.crudService=n,this.confirmService=c,this.loader=i,this.toastr=r}ngOnInit(){this.selectedagent=this.agent.selectedagent,this.paymentmethods=this.agent.paymentmethods,this.payments=this.agent.payments}openMakePayment(e={},t){this.dialog.open(H,{width:"720px",disableClose:!0,data:{paymentmethods:this.paymentmethods,selectedagent:this.selectedagent}}).afterClosed().subscribe(a=>{a&&(this.loader.open(),t?this.crudService.addPayments(a).subscribe(e=>{this.loader.close(),this.payments=this.payments.concat([e]),this.snack.open("New Payment Made","OK",{duration:4e3})},e=>{this.loader.close(),this.toastr.error("sorry",e.error)}):this.crudService.updateItem(e._id,a).subscribe(e=>{this.payments=e,this.loader.close(),this.snack.open("Member Updated!","OK",{duration:4e3})}))})}}return e.\u0275fac=function(t){return new(t||e)(x.Vb(P),x.Vb(I.b),x.Vb(G.a),x.Vb(p.a),x.Vb(y.a),x.Vb(v.a),x.Vb(k.b))},e.\u0275cmp=x.Pb({type:e,selectors:[["app-agent-summary"]],decls:14,vars:14,consts:[[4,"ngIf"],[1,"m-333"],["mat-raised-button","","color","primary","routerLink","/invoice/newsale",1,"mb-05"],["fxFlex","8px"],["mat-raised-button","","color","accent",1,"mb-05",3,"click"],[1,"p-0"],[1,"material","ml-0","mr-0",3,"rows","columnMode","headerHeight","footerHeight","scrollbarH","limit","rowHeight"],["name","amount",3,"flexGrow"],["ngx-datatable-cell-template",""]],template:function(e,t){1&e&&(x.Nc(0,D,2,1,"p",0),x.bc(1,"div",1),x.bc(2,"button",2),x.Pc(3,"New Sale"),x.ac(),x.Wb(4,"span",3),x.bc(5,"button",4),x.jc("click",(function(e){return t.openMakePayment({},!0)})),x.Pc(6,"New Payment"),x.ac(),x.ac(),x.bc(7,"mat-card",5),x.bc(8,"mat-card-content",5),x.bc(9,"ngx-datatable",6),x.bc(10,"ngx-datatable-column",7),x.Nc(11,j,1,1,"ng-template",8),x.ac(),x.bc(12,"ngx-datatable-column",7),x.Nc(13,q,1,1,"ng-template",8),x.ac(),x.ac(),x.ac(),x.ac()),2&e&&(x.tc("ngIf",t.selectedagent),x.Gb(7),x.tc("@animate",x.yc(12,U,x.xc(11,z))),x.Gb(2),x.tc("rows",t.payments)("columnMode","force")("headerHeight",50)("footerHeight",50)("scrollbarH",!0)("limit",10)("rowHeight",50),x.Gb(1),x.tc("flexGrow",1),x.Gb(2),x.tc("flexGrow",1))},directives:[n.m,S.b,c.h,F.a,W.a,W.b,o.c,o.b,o.a],styles:[""],data:{animation:f.a}}),e})();var _=a("f0Cb");function K(e,t){if(1&e&&(x.bc(0,"mat-option",24),x.Pc(1),x.ac()),2&e){const e=t.$implicit;x.tc("value",e),x.Gb(1),x.Rc(" ",e," ")}}function Y(e,t){1&e&&(x.bc(0,"mat-error"),x.Pc(1,"You must select a publisher"),x.ac())}function J(e,t){if(1&e&&(x.bc(0,"div"),x.Nc(1,Y,2,0,"mat-error",11),x.ac()),2&e){const e=x.nc();x.Gb(1),x.tc("ngIf",e.f.numberOfTickets.errors.required)}}function X(e,t){if(1&e&&(x.bc(0,"mat-option",36),x.Pc(1),x.ac()),2&e){const e=t.$implicit;x.tc("disabled",0==e.status)("value",e),x.Gb(1),x.Uc(" ",e.name," - ",e.class," - GHC ",e.price," - Edition ",e.edition," ")}}function $(e,t){1&e&&(x.bc(0,"mat-error"),x.Pc(1,"You must select an Item"),x.ac())}function Q(e,t){if(1&e&&(x.bc(0,"div"),x.Nc(1,$,2,0,"mat-error",11),x.ac()),2&e){const e=x.nc().$implicit;x.Gb(1),x.tc("ngIf",e.controls.item.errors.required)}}function Z(e,t){1&e&&(x.bc(0,"small",38),x.Pc(1,"Quantity must have a value"),x.ac())}function ee(e,t){if(1&e&&(x.bc(0,"div"),x.Nc(1,Z,2,0,"small",37),x.ac()),2&e){const e=x.nc().$implicit;x.Gb(1),x.tc("ngIf",e.controls.quantity.errors.required)}}function te(e,t){if(1&e){const e=x.cc();x.bc(0,"div"),x.bc(1,"h5",25),x.Pc(2),x.ac(),x.bc(3,"form",26),x.bc(4,"div",5),x.bc(5,"div",27),x.bc(6,"div",28),x.bc(7,"mat-label"),x.Pc(8,"Select and Item:"),x.ac(),x.bc(9,"mat-select",29),x.Nc(10,X,2,6,"mat-option",30),x.ac(),x.Nc(11,Q,2,1,"div",11),x.ac(),x.ac(),x.bc(12,"div",31),x.bc(13,"div",28),x.bc(14,"mat-form-field",32),x.Wb(15,"input",33),x.ac(),x.Nc(16,ee,2,1,"div",11),x.ac(),x.ac(),x.Wb(17,"span",17),x.bc(18,"div",34),x.bc(19,"button",35),x.jc("click",(function(a){x.Gc(e);const n=t.index;return x.nc().removeitem(n)})),x.Pc(20,"Remove"),x.ac(),x.ac(),x.ac(),x.ac(),x.ac()}if(2&e){const e=t.$implicit,a=t.index,n=x.nc();x.Gb(2),x.Rc("Item ",a+1,""),x.Gb(1),x.tc("formGroup",e),x.Gb(7),x.tc("ngForOf",n.pitems),x.Gb(1),x.tc("ngIf",n.submitted&&e.controls.item.errors),x.Gb(5),x.tc("ngIf",n.submitted&&e.controls.quantity.errors)}}function ae(e,t){if(1&e){const e=x.cc();x.bc(0,"button",39),x.jc("click",(function(t){return x.Gc(e),x.nc().calculateSale()})),x.Pc(1,"Make Sale"),x.ac()}}function ne(e,t){if(1&e&&(x.bc(0,"div",40),x.bc(1,"div",41),x.Pc(2,"Total: "),x.bc(3,"b"),x.Pc(4),x.ac(),x.ac(),x.Wb(5,"span",42),x.bc(6,"div",41),x.Pc(7,"Sale After Discount: "),x.bc(8,"b"),x.Pc(9),x.ac(),x.ac(),x.Wb(10,"span",43),x.ac()),2&e){const e=x.nc();x.Gb(4),x.Rc("GHC ",e.totalsale,""),x.Gb(5),x.Rc("GHC ",e.afterdiscount,"")}}let ce=(()=>{class e{constructor(e,t,a,n,c,i,r){this.agent=e,this.crudService=t,this.fb=a,this.loader=n,this.toastr=c,this.data=i,this.router=r,this.submitted=!1}ngOnInit(){this.selectedagent=this.agent.selectedagent,this.dynamicForm=this.fb.group({numberOfTickets:["",i.s.required],agent:this.selectedagent,discount:["",i.s.required],tickets:new i.c([])}),this.pitems=this.items=this.data.items,this.length=Array(this.items.length).fill(1).map((e,t)=>t+1)}get f(){return this.dynamicForm.controls}get t(){return this.f.tickets}onChangeTickets(e){const t=e.value||0;if(this.t.length<t)for(let a=this.t.length;a<t;a++)this.t.push(this.fb.group({item:["",i.s.required],quantity:["",[i.s.required]]}));else for(let a=this.t.length;a>=t;a--)this.t.removeAt(a)}highlight(e){console.log(e)}itemchange(e){e.value.status=0,this.pitems=this.pitems.filter((function(t){return t.id!==e.value.id})),this.pitems=this.pitems.concat([e.value])}removeitem(e){this.t.removeAt(e)}onSubmit(){if(this.submitted=!0,this.dynamicForm.invalid)return;const e=this.dynamicForm.value.tickets,t=this.dynamicForm.value.discount;this.totalsale=0;for(var a=0,n=e.length;a<n;a++)this.totalsale=this.totalsale+e[a].item.price*e[a].quantity;for(this.afterdiscount=this.totalsale*(1-t/100),a=1,n=this.dynamicForm.value.tickets.length;a<n;a++);}onReset(){this.submitted=!1,this.dynamicForm.reset(),this.t.clear()}onClear(){this.submitted=!1,this.t.reset()}calculateSale(){this.loader.open(),this.crudService.calculateSale(this.dynamicForm.value).subscribe(e=>{this.loader.close(),this.data.newsaledata=this.dynamicForm.value,this.router.navigate(["/invoice/preinvoice"]),this.toastr.success("succes",e)},e=>{this.loader.close(),this.toastr.error("error",e.error)})}}return e.\u0275fac=function(t){return new(t||e)(x.Vb(P),x.Vb(p.a),x.Vb(i.d),x.Vb(v.a),x.Vb(k.b),x.Vb(T.a),x.Vb(c.g))},e.\u0275cmp=x.Pb({type:e,selectors:[["app-new-sale"]],decls:35,vars:6,consts:[[1,"p-0"],[1,""],[1,"card-title-text"],[3,"formGroup","ngSubmit"],[1,"card","m-3"],["fxLayout","row wrap"],["fxFlex","100","fxFlex.gt-xs","30",1,"pr-1"],[1,"pt-1","pb-1"],["formControlName","numberOfTickets","required","",3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],["matSuffix","",1,"secondary-text"],[4,"ngIf"],["fxFlex","100","fxFlex.gt-xs","30"],["matInput","","placeholder","Discount","formControlName","discount","required",""],[4,"ngFor","ngForOf"],[1,"card-footer","text-center"],["mat-raised-button","","color","primary",1,"mb-05"],["fxFlex","8px"],["mat-raised-button","","color","warn","type","reset",1,"mb-05",3,"click"],["mat-raised-button","","color","warn",1,"mb-05",3,"click"],["fxFlex","50px"],["mat-raised-button","","class","mb-05","color","accent",3,"click",4,"ngIf"],["fxFlex","200px"],["class","profile-title text-center mb-1",4,"ngIf"],[3,"value"],["colour","accent",1,"card-title"],[3,"formGroup"],["fxFlex","100","fxFlex.gt-xs","40",1,"pr-1"],[1,"pb-1"],["formControlName","item","required",""],[3,"disabled","value",4,"ngFor","ngForOf"],["fxFlex","100","fxFlex.gt-xs","40"],[1,"full-width"],["matInput","","name","quantity","formControlName","quantity","placeholder","Quantity (Min Length: 4, Max Length: 9)","value",""],["fxFlex","100","fxFlex.gt-xs","10"],["mat-raised-button","","color","primary",1,"mb-05",3,"click"],[3,"disabled","value"],["class","form-error-msg",4,"ngIf"],[1,"form-error-msg"],["mat-raised-button","","color","accent",1,"mb-05",3,"click"],[1,"profile-title","text-center","mb-1"],[1,"main-title"],["fxFlex","100px"],["fxFlex","20px"]],template:function(e,t){1&e&&(x.bc(0,"mat-card",0),x.bc(1,"mat-card-title",1),x.bc(2,"div",2),x.Pc(3,"Selling Form"),x.ac(),x.Wb(4,"mat-divider"),x.ac(),x.bc(5,"mat-card-content"),x.bc(6,"form",3),x.jc("ngSubmit",(function(e){return t.onSubmit()})),x.bc(7,"div",4),x.bc(8,"div",5),x.bc(9,"div",6),x.bc(10,"mat-form-field",7),x.bc(11,"mat-label"),x.Pc(12,"Number of Items:"),x.ac(),x.bc(13,"mat-select",8),x.jc("selectionChange",(function(e){return t.onChangeTickets(e)})),x.Nc(14,K,2,2,"mat-option",9),x.ac(),x.bc(15,"mat-icon",10),x.Pc(16,"outlined_flag"),x.ac(),x.Nc(17,J,2,1,"div",11),x.ac(),x.ac(),x.bc(18,"div",12),x.bc(19,"mat-form-field",7),x.Wb(20,"input",13),x.ac(),x.ac(),x.ac(),x.Nc(21,te,21,5,"div",14),x.bc(22,"div",15),x.bc(23,"button",16),x.Pc(24,"Calculate Sale"),x.ac(),x.Wb(25,"span",17),x.bc(26,"button",18),x.jc("click",(function(e){return t.onReset()})),x.Pc(27,"Reset"),x.ac(),x.Wb(28,"span",17),x.bc(29,"button",19),x.jc("click",(function(e){return t.onClear()})),x.Pc(30,"Clear"),x.ac(),x.Wb(31,"span",20),x.Nc(32,ae,2,0,"button",21),x.Wb(33,"span",22),x.Nc(34,ne,11,2,"div",23),x.ac(),x.ac(),x.ac(),x.ac(),x.ac()),2&e&&(x.Gb(6),x.tc("formGroup",t.dynamicForm),x.Gb(8),x.tc("ngForOf",t.length),x.Gb(3),x.tc("ngIf",t.submitted&&t.f.numberOfTickets.errors),x.Gb(4),x.tc("ngForOf",t.t.controls),x.Gb(11),x.tc("ngIf",t.afterdiscount),x.Gb(2),x.tc("ngIf",t.afterdiscount))},directives:[W.a,W.d,_.a,W.b,i.t,i.n,i.h,F.c,F.a,N.b,N.e,M.a,i.m,i.g,i.r,n.l,L.a,N.f,n.m,R.b,i.b,S.b,E.p,N.a],styles:[""]}),e})();function ie(e,t){if(1&e&&(x.bc(0,"h1"),x.Pc(1),x.ac()),2&e){const e=x.nc();x.Gb(1),x.Rc("Invoice Number: ",e.invoicenumber,"")}}function re(e,t){1&e&&x.Pc(0),2&e&&x.Rc(" ",t.rowIndex+1," ")}function oe(e,t){if(1&e&&x.Pc(0),2&e){const e=t.row;x.Sc(" ",null==e?null:e.item.name," - ",null==e?null:e.item.class," ")}}function se(e,t){if(1&e&&x.Pc(0),2&e){const e=t.row;x.Rc(" ",null==e?null:e.quantity," ")}}function me(e,t){if(1&e&&x.Pc(0),2&e){const e=t.row;x.Rc(" ",null==e?null:e.item.price," ")}}function le(e,t){if(1&e&&x.Pc(0),2&e){const e=t.row;x.Rc(" ",(null==e?null:e.item.price)*(null==e?null:e.quantity)," ")}}function de(e,t){if(1&e){const e=x.cc();x.bc(0,"button",24),x.jc("click",(function(t){return x.Gc(e),x.nc().createSale()})),x.Pc(1,"Agree On Sale"),x.ac()}}function ue(e,t){if(1&e){const e=x.cc();x.bc(0,"button",24),x.jc("click",(function(t){return x.Gc(e),x.nc().agentCreateSale()})),x.Pc(1,"Agree On Sale"),x.ac()}}function be(e,t){if(1&e){const e=x.cc();x.bc(0,"button",25),x.jc("click",(function(t){return x.Gc(e),x.nc().print()})),x.Pc(1,"Print Invoice"),x.ac()}}function ge(e,t){1&e&&(x.bc(0,"button",26),x.Pc(1,"Discard Sale"),x.ac())}function he(e,t){1&e&&(x.bc(0,"button",27),x.Pc(1,"Make New Sale"),x.ac())}function pe(e,t){1&e&&(x.bc(0,"button",28),x.Pc(1,"Discard Sale Return to Agents"),x.ac())}function fe(e,t){1&e&&(x.bc(0,"button",29),x.Pc(1,"Discard Sale Return to Retailers"),x.ac())}function ye(e,t){1&e&&(x.bc(0,"button",28),x.Pc(1,"Return to Agents"),x.ac())}function ve(e,t){1&e&&(x.bc(0,"button",29),x.Pc(1,"Return to Retailers"),x.ac())}const xe=function(){return{y:"50px",delay:"300ms"}},we=function(e){return{value:"*",params:e}};let Te=(()=>{class e{constructor(e,t,a,n,c){this.loader=e,this.crudService=t,this.toastr=a,this.agent=n,this.data=c,this.count=0,this.agreed=!1,this.currentDate=new Date}ngOnInit(){this.items=this.data.newsaledata,this.getAll(),this.role=this.data.role}getAll(){this.sold=this.items.tickets;const e=this.items.discount;this.totalsale=0;for(var t=0,a=this.sold.length;t<a;t++)this.totalsale=this.totalsale+this.sold[t].item.price*this.sold[t].quantity;this.afterdiscount=this.totalsale*(1-e/100)}createSale(){this.loader.open(),this.crudService.createSale(this.items).subscribe(e=>{this.loader.close(),this.invoicenumber=e.invoicenumber,this.agreed=!0,this.toastr.success("succes","Invoice Created")},e=>{this.loader.close(),this.toastr.error("error",e.error)})}agentCreateSale(){this.loader.open(),this.crudService.agentCreateSale(this.items).subscribe(e=>{this.loader.close(),this.invoicenumber=e.invoicenumber,this.agreed=!0,this.toastr.success("succes","Invoice Created")},e=>{this.loader.close(),this.toastr.error("error",e.error)})}print(){let e,t;e=document.getElementById("print-section").innerHTML,t=window.open("","_blank","top=0,left=0,height=100%,width=auto"),t.document.open(),t.document.write(`\n      <html>\n        <head>\n          <title>Print tab</title>\n          <style>\n          //........Customized style.......\n          </style>\n        </head>\n    <body onload="window.print();window.close()">${e}</body>\n      </html>`),t.document.close()}}return e.\u0275fac=function(t){return new(t||e)(x.Vb(v.a),x.Vb(p.a),x.Vb(k.b),x.Vb(P),x.Vb(T.a))},e.\u0275cmp=x.Pb({type:e,selectors:[["app-pre-invoice"]],decls:46,vars:34,consts:[["id","print-section"],[1,"invoicehead"],["src","assets/images/head.jpg","height","200px"],[1,"invoicedetails"],[1,"invoiceuser"],[4,"ngIf"],[1,"amount"],[1,"viewtable"],[1,"p-0"],[1,"material","ml-0","mr-0",3,"rows","columnMode","headerHeight","footerHeight","scrollbarH","limit","rowHeight"],["name","SN",3,"flexGrow"],["ngx-datatable-cell-template",""],["name","Name",3,"flexGrow"],["name","Quantity",3,"flexGrow"],["name","Unit Price",3,"flexGrow"],["name","Total",3,"flexGrow"],[1,"downbuttons"],["mat-raised-button","","class","mb-05","color","accent",3,"click",4,"ngIf"],["mat-raised-button","","class","mb-05","color","primary",3,"click",4,"ngIf"],["fxFlex","8px"],["mat-raised-button","","class","mb-05","color","warn","routerLink","/invoice/newsale",4,"ngIf"],["mat-raised-button","","class","mb-05","color","primary","routerLink","/invoice/agentnewsale",4,"ngIf"],["mat-raised-button","","class","mb-05","color","accent","routerLink","/invoice/home",4,"ngIf"],["mat-raised-button","","class","mb-05","color","accent","routerLink","/invoice/retail",4,"ngIf"],["mat-raised-button","","color","accent",1,"mb-05",3,"click"],["mat-raised-button","","color","primary",1,"mb-05",3,"click"],["mat-raised-button","","color","warn","routerLink","/invoice/newsale",1,"mb-05"],["mat-raised-button","","color","primary","routerLink","/invoice/agentnewsale",1,"mb-05"],["mat-raised-button","","color","accent","routerLink","/invoice/home",1,"mb-05"],["mat-raised-button","","color","accent","routerLink","/invoice/retail",1,"mb-05"]],template:function(e,t){1&e&&(x.bc(0,"div",0),x.bc(1,"div",1),x.Wb(2,"img",2),x.ac(),x.bc(3,"div",3),x.bc(4,"div",4),x.Nc(5,ie,2,1,"h1",5),x.bc(6,"h1"),x.Pc(7),x.oc(8,"date"),x.ac(),x.bc(9,"h1",6),x.Pc(10),x.ac(),x.ac(),x.ac(),x.bc(11,"div",7),x.bc(12,"mat-card",8),x.bc(13,"mat-card-content",8),x.bc(14,"ngx-datatable",9),x.bc(15,"ngx-datatable-column",10),x.Nc(16,re,1,1,"ng-template",11),x.ac(),x.bc(17,"ngx-datatable-column",12),x.Nc(18,oe,1,2,"ng-template",11),x.ac(),x.bc(19,"ngx-datatable-column",13),x.Nc(20,se,1,1,"ng-template",11),x.ac(),x.bc(21,"ngx-datatable-column",14),x.Nc(22,me,1,1,"ng-template",11),x.ac(),x.bc(23,"ngx-datatable-column",15),x.Nc(24,le,1,1,"ng-template",11),x.ac(),x.ac(),x.ac(),x.ac(),x.ac(),x.bc(25,"div",3),x.bc(26,"div",4),x.bc(27,"h1"),x.Pc(28),x.ac(),x.bc(29,"h1"),x.Pc(30),x.ac(),x.bc(31,"h1",6),x.Pc(32),x.ac(),x.ac(),x.ac(),x.ac(),x.bc(33,"div",16),x.Nc(34,de,2,0,"button",17),x.Nc(35,ue,2,0,"button",17),x.Nc(36,be,2,0,"button",18),x.Wb(37,"span",19),x.Nc(38,ge,2,0,"button",20),x.Nc(39,he,2,0,"button",21),x.Wb(40,"span",19),x.Nc(41,pe,2,0,"button",22),x.Nc(42,fe,2,0,"button",23),x.Wb(43,"span",19),x.Nc(44,ye,2,0,"button",22),x.Nc(45,ve,2,0,"button",23),x.ac()),2&e&&(x.Gb(5),x.tc("ngIf",t.invoicenumber),x.Gb(2),x.Rc("Invoice Date: ",x.qc(8,28,t.currentDate,"dd MMM yyyy"),""),x.Gb(3),x.Rc("Amount Due: GHC ",t.afterdiscount,""),x.Gb(2),x.tc("@animate",x.yc(32,we,x.xc(31,xe))),x.Gb(2),x.tc("rows",t.sold)("columnMode","force")("headerHeight",50)("footerHeight",50)("scrollbarH",!1)("limit",10)("rowHeight",50),x.Gb(1),x.tc("flexGrow",1),x.Gb(2),x.tc("flexGrow",1),x.Gb(2),x.tc("flexGrow",1),x.Gb(2),x.tc("flexGrow",1),x.Gb(2),x.tc("flexGrow",1),x.Gb(5),x.Rc("Total: ",t.totalsale,""),x.Gb(2),x.Rc("Discount: ",t.items.discount,"%"),x.Gb(2),x.Rc("Amount Due: GHC",t.afterdiscount,""),x.Gb(2),x.tc("ngIf",!t.agreed&&t.role.publisher),x.Gb(1),x.tc("ngIf",!t.agreed&&t.role.agent),x.Gb(1),x.tc("ngIf",t.agreed),x.Gb(2),x.tc("ngIf",t.role.publisher),x.Gb(1),x.tc("ngIf",t.role.agent),x.Gb(2),x.tc("ngIf",!t.agreed&&t.role.publisher),x.Gb(1),x.tc("ngIf",!t.agreed&&t.role.agent),x.Gb(2),x.tc("ngIf",t.agreed&&t.role.publisher),x.Gb(1),x.tc("ngIf",t.agreed&&t.role.agent))},directives:[n.m,W.a,W.b,o.c,o.b,o.a,F.a,S.b,c.h],pipes:[n.e],styles:[".invoicehead[_ngcontent-%COMP%]{margin-bottom:2px}.invoicedetails[_ngcontent-%COMP%]{flex-direction:row-reverse}.downbuttons[_ngcontent-%COMP%], .invoicedetails[_ngcontent-%COMP%]{display:flex;max-width:1200px;margin:0 auto;padding:20px}.invoiceuser[_ngcontent-%COMP%]{display:flex;width:30%;flex-direction:column}h1[_ngcontent-%COMP%]{font-size:20px}.viewtable[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:20px}@media print-section{[_ngcontent-%COMP%]:not(.print){display:none!important}}"],data:{animation:f.a}}),e})(),Pe=(()=>{class e{constructor(e,t){this.data=e,this.crudeService=t}resolve(e,t){return new Promise((e,t)=>{Promise.all([this.getItems()]).then(()=>{e()},t)})}getItems(){return new Promise((e,t)=>{this.data.items?(this.items=this.data.items,e(this.items)):this.crudeService.getItems().subscribe(t=>{this.items=t.data,this.data.items=t.data,e(this.items)},t)})}}return e.\u0275fac=function(t){return new(t||e)(x.fc(T.a),x.fc(p.a))},e.\u0275prov=x.Rb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Ie=(()=>{class e{constructor(e,t,a){this.router=e,this.crudeService=t,this.data=a}resolve(e,t){return new Promise((e,t)=>{Promise.all([this.getRetailers()]).then(()=>{e()},t)})}getRetailers(){return new Promise((e,t)=>{this.data.retailers?(this.retailers=this.data.retailers,e(this.retailers)):this.crudeService.getRetailer().subscribe(t=>{this.retailers=t.data,this.data.retailers=t.data,e(this.retailers)},t)})}}return e.\u0275fac=function(t){return new(t||e)(x.fc(c.g),x.fc(p.a),x.fc(T.a))},e.\u0275prov=x.Rb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Ge=(()=>{class e{constructor(e,t,a){this.router=e,this.crudeService=t,this.data=a,this.selectedretailer=this.data.selectedretailer}resolve(e,t){return new Promise((e,t)=>{Promise.all([this.getPaymentMethods(),this.getRetailerDetails()]).then(()=>{e()},t)})}getPaymentMethods(){return new Promise((e,t)=>{this.data.paymentmethods?(this.paymentmethods=this.data.paymentmethods,e(this.paymentmethods)):this.crudeService.getPaymentMethod().subscribe(t=>{this.paymentmethods=t.data,this.data.paymentmethods=t.data,e(this.paymentmethods)},t)})}getRetailerDetails(){return new Promise((e,t)=>{this.crudeService.getRetailerDetails(this.selectedretailer).subscribe(t=>{this.retailerdetails=t,e(this.retailerdetails)},t)})}}return e.\u0275fac=function(t){return new(t||e)(x.fc(c.g),x.fc(p.a),x.fc(T.a))},e.\u0275prov=x.Rb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function ke(e,t){if(1&e&&(x.bc(0,"mat-option",13),x.Pc(1),x.ac()),2&e){const e=t.$implicit;x.tc("value",e.id),x.Gb(1),x.Rc(" ",e.name," ")}}let Ne=(()=>{class e{constructor(e,t,a){this.data=e,this.dialogRef=t,this.fb=a}ngOnInit(){this.paymentmethods=this.data.paymentmethods,this.selectedretail=this.data.selectedretail,this.itemForm=this.fb.group({amount:["",i.s.required],payment_method_id:["",i.s.required],retail_id:this.selectedretail.id})}submit(){this.dialogRef.close(this.itemForm.value)}}return e.\u0275fac=function(t){return new(t||e)(x.Vb(I.a),x.Vb(I.f),x.Vb(i.d))},e.\u0275cmp=x.Pb({type:e,selectors:[["app-make-retail-payment-popup"]],decls:23,vars:4,consts:[["matDialogTitle",""],[3,"formGroup","ngSubmit"],["fxLayout","row wrap","fxLayout.lt-sm","column"],["fxFlex","100",1,"pr-1"],[1,"full-width"],["matInput","","name","amount","placeholder","Amount",3,"formControl"],["formControlName","payment_method_id","required",""],[3,"value",4,"ngFor","ngForOf"],["matSuffix","",1,"secondary-text"],["fxFlex","100",1,"mt-1"],["mat-raised-button","","color","primary",3,"disabled"],["fxFlex",""],["mat-button","","color","warn","type","button",3,"click"],[3,"value"]],template:function(e,t){1&e&&(x.bc(0,"h1",0),x.Pc(1,"Add A New Item"),x.ac(),x.bc(2,"form",1),x.jc("ngSubmit",(function(e){return t.submit()})),x.bc(3,"div",2),x.bc(4,"div",3),x.bc(5,"mat-form-field",4),x.Wb(6,"input",5),x.ac(),x.ac(),x.bc(7,"div",3),x.bc(8,"mat-form-field",4),x.bc(9,"mat-label"),x.Pc(10,"Payment Was Made Through"),x.ac(),x.bc(11,"mat-select",6),x.Nc(12,ke,2,2,"mat-option",7),x.ac(),x.bc(13,"mat-icon",8),x.Pc(14,"outlined_flag"),x.ac(),x.bc(15,"mat-error"),x.Pc(16,"payment type is required!"),x.ac(),x.ac(),x.ac(),x.bc(17,"div",9),x.bc(18,"button",10),x.Pc(19,"Save"),x.ac(),x.Wb(20,"span",11),x.bc(21,"button",12),x.jc("click",(function(e){return t.dialogRef.close(!1)})),x.Pc(22,"Cancel"),x.ac(),x.ac(),x.ac(),x.ac()),2&e&&(x.Gb(2),x.tc("formGroup",t.itemForm),x.Gb(4),x.tc("formControl",t.itemForm.controls.amount),x.Gb(6),x.tc("ngForOf",t.paymentmethods),x.Gb(6),x.tc("disabled",t.itemForm.invalid))},directives:[I.g,i.t,i.n,i.h,F.c,F.a,N.b,R.b,i.b,i.m,i.f,N.e,M.a,i.g,i.r,n.l,L.a,N.f,N.a,S.b,E.p],styles:[""]}),e})();function Re(e,t){if(1&e&&(x.bc(0,"div",10),x.bc(1,"mat-card",11),x.Wb(2,"img",21),x.Wb(3,"span",13),x.bc(4,"div"),x.bc(5,"p",14),x.Pc(6,"Last Payment"),x.ac(),x.bc(7,"span",22),x.Pc(8),x.Wb(9,"span",16),x.ac(),x.ac(),x.ac(),x.ac()),2&e){const e=x.nc();x.Gb(8),x.Rc("GHC ",e.lastpayment.amount," ")}}function Se(e,t){if(1&e&&(x.bc(0,"div",10),x.bc(1,"mat-card",11),x.Wb(2,"img",23),x.Wb(3,"span",13),x.bc(4,"div"),x.bc(5,"p",14),x.Pc(6,"Last Invoice"),x.ac(),x.bc(7,"span",15),x.Pc(8),x.Wb(9,"span",16),x.ac(),x.ac(),x.ac(),x.ac()),2&e){const e=x.nc();x.Gb(8),x.Rc("GHC ",e.lastinvoice.after_discount," ")}}function Ce(e,t){if(1&e&&(x.bc(0,"div",35),x.Wb(1,"img",36),x.Pc(2),x.ac()),2&e){const e=t.row;x.Gb(1),x.tc("src",e.icon,x.Ic),x.Gb(1),x.Rc(" ",null==e?null:e.total_sale," ")}}function Ae(e,t){if(1&e&&x.Pc(0),2&e){const e=t.row;x.Rc(" ",null==e?null:e.discount," ")}}function Oe(e,t){if(1&e&&x.Pc(0),2&e){const e=t.row;x.Rc(" ",null==e?null:e.after_discount," ")}}function Fe(e,t){if(1&e&&x.Pc(0),2&e){const e=t.row;x.Rc(" ",null==e?null:e.amount_paid," ")}}function Me(e,t){1&e&&(x.bc(0,"button",38),x.Pc(1,"unpaid"),x.ac())}function Le(e,t){1&e&&(x.bc(0,"button",38),x.Pc(1,"paid"),x.ac())}function Ee(e,t){if(1&e&&(x.Nc(0,Me,2,0,"button",37),x.Nc(1,Le,2,0,"button",37)),2&e){const e=t.row;x.tc("ngIf","0"==(null==e?null:e.completed)),x.Gb(1),x.tc("ngIf","1"==(null==e?null:e.completed))}}function Ve(e,t){if(1&e&&x.Pc(0),2&e){const e=t.row;x.Rc(" ",null==e?null:e.mode," ")}}function He(e,t){if(1&e&&x.Pc(0),2&e){const e=t.row;x.Rc(" ",null==e?null:e.amount," ")}}function We(e,t){if(1&e&&(x.bc(0,"button",44),x.Pc(1),x.oc(2,"date"),x.ac()),2&e){const e=t.row;x.Gb(1),x.Qc(x.pc(2,1,null==e?null:e.made_on))}}function De(e,t){if(1&e&&(x.bc(0,"div",39),x.bc(1,"mat-card",25),x.bc(2,"h6",40),x.Pc(3,"Payments"),x.ac(),x.bc(4,"ngx-datatable",27),x.bc(5,"ngx-datatable-column",41),x.Nc(6,Ve,1,1,"ng-template",29),x.ac(),x.bc(7,"ngx-datatable-column",42),x.Nc(8,He,1,1,"ng-template",29),x.ac(),x.bc(9,"ngx-datatable-column",43),x.Nc(10,We,3,3,"ng-template",29),x.ac(),x.ac(),x.ac(),x.ac()),2&e){const e=x.nc(2);x.Gb(4),x.tc("rows",e.retailerdetails.payments)("columnMode","flex")("headerHeight",50)("footerHeight",0)("rowHeight","auto"),x.Gb(1),x.tc("flexGrow",1),x.Gb(2),x.tc("flexGrow",1),x.Gb(2),x.tc("flexGrow",1)}}const je=function(){return{delay:"800ms",scale:".9"}},qe=function(e){return{value:"*",params:e}};function ze(e,t){if(1&e&&(x.bc(0,"div",9),x.bc(1,"div",24),x.bc(2,"mat-card",25),x.bc(3,"h6",26),x.Pc(4,"Invoices"),x.ac(),x.bc(5,"ngx-datatable",27),x.bc(6,"ngx-datatable-column",28),x.Nc(7,Ce,3,2,"ng-template",29),x.ac(),x.bc(8,"ngx-datatable-column",30),x.Nc(9,Ae,1,1,"ng-template",29),x.ac(),x.bc(10,"ngx-datatable-column",31),x.Nc(11,Oe,1,1,"ng-template",29),x.ac(),x.bc(12,"ngx-datatable-column",32),x.Nc(13,Fe,1,1,"ng-template",29),x.ac(),x.bc(14,"ngx-datatable-column",33),x.Nc(15,Ee,2,2,"ng-template",29),x.ac(),x.ac(),x.ac(),x.ac(),x.Nc(16,De,11,8,"div",34),x.ac()),2&e){const e=x.nc();x.tc("@animate",x.yc(13,qe,x.xc(12,je))),x.Gb(5),x.tc("rows",e.retailerdetails.invoices)("columnMode","flex")("headerHeight",50)("footerHeight",0)("rowHeight","auto"),x.Gb(1),x.tc("flexGrow",1),x.Gb(2),x.tc("flexGrow",1),x.Gb(2),x.tc("flexGrow",1),x.Gb(2),x.tc("flexGrow",1),x.Gb(2),x.tc("flexGrow",1),x.Gb(2),x.tc("ngIf",e.retailerdetails.payments)}}const Ue=function(){return{delay:"600ms",scale:".9"}};let Be=(()=>{class e{constructor(e,t,a,n,c,i,r,o){this.agent=e,this.dialog=t,this.snack=a,this.crudService=n,this.confirmService=c,this.loader=i,this.toastr=r,this.retail=o}ngOnInit(){this.selectedretailer=this.retail.selectedretailer,this.paymentmethods=this.retail.paymentmethods,this.retailerdetails=this.retail.retailerdetails,this.pop=this.retail.retailerdetails,this.lastpayment=this.pop.payments,this.lastinvoice=this.pop.invoices,this.lastinvoice=this.lastinvoice[this.lastinvoice.length-1],this.lastpayment=this.lastpayment[this.lastpayment.length-1]}openMakePayment(e={},t){this.dialog.open(Ne,{width:"720px",disableClose:!0,data:{paymentmethods:this.paymentmethods,selectedretail:this.selectedretailer}}).afterClosed().subscribe(a=>{a&&(this.loader.open(),t?this.crudService.addRetailPayments(a).subscribe(e=>{this.loader.close(),this.payments=this.payments.concat([e]),this.snack.open("New Payment Made","OK",{duration:4e3})},e=>{this.loader.close(),this.toastr.error("sorry",e.error)}):this.crudService.updateItem(e._id,a).subscribe(e=>{this.payments=e,this.loader.close(),this.snack.open("Member Updated!","OK",{duration:4e3})}))})}}return e.\u0275fac=function(t){return new(t||e)(x.Vb(Ie),x.Vb(I.b),x.Vb(G.a),x.Vb(p.a),x.Vb(y.a),x.Vb(v.a),x.Vb(k.b),x.Vb(Ge))},e.\u0275cmp=x.Pb({type:e,selectors:[["app-retail-summary"]],decls:59,vars:11,consts:[[1,"handle"],["routerLink","/invoice/agentnewsale","mat-raised-button","","color","primary",1,"mb-05"],[1,"second"],["mat-raised-button","","color","accent",1,"mb-05",3,"click"],[1,"third"],["routerLink","/invoice/retail","mat-raised-button","","color","warn",1,"mb-05"],[1,"p-0","mb-1"],[1,"mat-bg-primary"],[1,"card-title-text"],["fxLayout","row wrap"],["fxFlex","100","fxFlex.gt-sm","20","fxFlex.sm","50"],["fxLayout","row wrap","fxLayoutAlign","start center",1,"rounded-circle"],["src","assets/images/cryptocurrencies/BTC.png","alt","",1,"avatar-md","rounded-circle"],[2,"width","20px"],[1,"m-0","text-14","text-muted","line-height-1"],[1,"text-18","font-weight-bold","text-red"],[1,"material-icons","mat-icon-18"],["fxFlex","100","fxFlex.gt-sm","20","fxFlex.sm","50",4,"ngIf"],["src","assets/images/cryptocurrencies/BTS.png","alt","",1,"avatar-md","rounded-circle"],["src","assets/images/cryptocurrencies/CNX.png","alt","",1,"avatar-md","rounded-circle"],["fxLayout","row wrap",4,"ngIf"],["src","assets/images/cryptocurrencies/ETH.png","alt","",1,"avatar-md","rounded-circle"],[1,"text-18","font-weight-bold","text-green"],["src","assets/images/cryptocurrencies/LTC.png","alt","",1,"avatar-md","rounded-circle"],["fxFlex","100","fxFlex.gt-sm","66.67"],[1,"p-0"],[1,"pl-1","pt-1","m-0"],[1,"material","ml-0","mr-0",3,"rows","columnMode","headerHeight","footerHeight","rowHeight"],["name","Total Sale",3,"flexGrow"],["ngx-datatable-cell-template",""],["name","Discount",3,"flexGrow"],["name","Value",3,"flexGrow"],["name","Amount Paid",3,"flexGrow"],["name","Status",3,"flexGrow"],["fxFlex","100","fxFlex.gt-sm","33.33",4,"ngIf"],["fxLayout","row wrap","fxLayoutAlign","start center"],["alt","",1,"avatar-xs","mr-05",3,"src"],["mat-stroked-button","","color","primary",4,"ngIf"],["mat-stroked-button","","color","primary"],["fxFlex","100","fxFlex.gt-sm","33.33"],[1,"ml-1","mt-1"],["name","Made At",3,"flexGrow"],["name","amount",3,"flexGrow"],["name","Date",3,"flexGrow"],["mat-stroked-button","","color","warn"]],template:function(e,t){1&e&&(x.bc(0,"div",0),x.bc(1,"button",1),x.Pc(2," New Sale "),x.bc(3,"mat-icon"),x.Pc(4,"shop"),x.ac(),x.ac(),x.ac(),x.bc(5,"div",2),x.bc(6,"button",3),x.jc("click",(function(e){return t.openMakePayment({},!0)})),x.Pc(7," New Payment "),x.bc(8,"mat-icon"),x.Pc(9,"attach_money"),x.ac(),x.ac(),x.ac(),x.bc(10,"div",4),x.bc(11,"button",5),x.Pc(12," back to Retailers "),x.bc(13,"mat-icon"),x.Pc(14,"arrow_back"),x.ac(),x.ac(),x.ac(),x.bc(15,"mat-card",6),x.bc(16,"mat-card-title",7),x.bc(17,"div",8),x.Pc(18),x.ac(),x.ac(),x.bc(19,"mat-card-content"),x.bc(20,"h3"),x.Pc(21),x.ac(),x.bc(22,"h3"),x.Pc(23),x.ac(),x.ac(),x.ac(),x.bc(24,"div",9),x.bc(25,"div",10),x.bc(26,"mat-card",11),x.Wb(27,"img",12),x.Wb(28,"span",13),x.bc(29,"div"),x.bc(30,"p",14),x.Pc(31,"Current Balance"),x.ac(),x.bc(32,"span",15),x.Pc(33),x.bc(34,"span",16),x.Pc(35,"arrow_drop_down"),x.ac(),x.ac(),x.ac(),x.ac(),x.ac(),x.Nc(36,Re,10,1,"div",17),x.Nc(37,Se,10,1,"div",17),x.bc(38,"div",10),x.bc(39,"mat-card",11),x.Wb(40,"img",18),x.Wb(41,"span",13),x.bc(42,"div"),x.bc(43,"p",14),x.Pc(44,"Unpaid Invoice"),x.ac(),x.bc(45,"span",15),x.Pc(46,"$10 "),x.Wb(47,"span",16),x.ac(),x.ac(),x.ac(),x.ac(),x.bc(48,"div",10),x.bc(49,"mat-card",11),x.Wb(50,"img",19),x.Wb(51,"span",13),x.bc(52,"div"),x.bc(53,"p",14),x.Pc(54,"Unpaid Invoice"),x.ac(),x.bc(55,"span",15),x.Pc(56,"$80 "),x.Wb(57,"span",16),x.ac(),x.ac(),x.ac(),x.ac(),x.ac(),x.Nc(58,ze,17,15,"div",20)),2&e&&(x.Gb(18),x.Qc(t.selectedretailer.name),x.Gb(3),x.Rc("Location: ",t.selectedretailer.location,""),x.Gb(2),x.Rc("Phone: ",t.selectedretailer.phone,""),x.Gb(1),x.tc("@animate",x.yc(9,qe,x.xc(8,Ue))),x.Gb(9),x.Rc("GHC ",t.retailerdetails.ledger.cbalance,""),x.Gb(3),x.tc("ngIf",t.lastpayment),x.Gb(1),x.tc("ngIf",t.lastinvoice),x.Gb(21),x.tc("ngIf",t.retailerdetails.invoices))},directives:[S.b,c.h,L.a,W.a,W.d,W.b,F.c,F.a,F.b,n.m,o.c,o.b,o.a],pipes:[n.e],styles:[".handle[_ngcontent-%COMP%]{bottom:30px}.handle[_ngcontent-%COMP%], .second[_ngcontent-%COMP%]{position:fixed;right:30px;z-index:99}.second[_ngcontent-%COMP%]{bottom:80px}.third[_ngcontent-%COMP%]{position:fixed;bottom:120px;right:30px;z-index:99}"],data:{animation:f.a}}),e})(),_e=(()=>{class e{constructor(){}getDataConf(){return[{prop:"id"},{prop:"name",name:"Name"}]}getAll(){return[{id:0,age:40,name:"Mclean Brady",gender:"male",company:"JAMNATION",email:"mcleanbrady@jamnation.com",phone:"+1 (875) 472-2061",registered:"2014-10-20T04:54:00 -06:00"},{id:1,age:39,name:"Dillon Ruiz",gender:"male",company:"ACRODANCE",email:"dillonruiz@acrodance.com",phone:"+1 (858) 562-2261",registered:"2016-08-07T12:15:31 -06:00"},{id:2,age:39,name:"Robyn Knox",gender:"female",company:"GLUID",email:"robynknox@gluid.com",phone:"+1 (826) 491-3098",registered:"2017-02-12T02:43:39 -06:00"},{id:3,age:32,name:"Santana Wagner",gender:"male",company:"INTRADISK",email:"santanawagner@intradisk.com",phone:"+1 (841) 550-2276",registered:"2016-03-28T11:22:15 -06:00"},{id:4,age:34,name:"Jennie Branch",gender:"female",company:"VERAQ",email:"jenniebranch@veraq.com",phone:"+1 (895) 483-3982",registered:"2015-03-16T01:30:06 -06:00"},{id:5,age:39,name:"Farrell Preston",gender:"male",company:"HONOTRON",email:"farrellpreston@honotron.com",phone:"+1 (993) 534-2843",registered:"2015-08-14T09:07:47 -06:00"},{id:6,age:38,name:"Garner Reyes",gender:"male",company:"VIOCULAR",email:"garnerreyes@viocular.com",phone:"+1 (973) 495-3873",registered:"2016-03-23T03:47:23 -06:00"},{id:7,age:32,name:"Ella Boone",gender:"female",company:"ARCHITAX",email:"ellaboone@architax.com",phone:"+1 (945) 491-2580",registered:"2015-07-01T09:35:10 -06:00"},{id:8,age:30,name:"Kathryn Owens",gender:"female",company:"CYCLONICA",email:"kathrynowens@cyclonica.com",phone:"+1 (978) 598-2767",registered:"2014-03-11T11:38:12 -06:00"},{id:9,age:22,name:"Byers Santana",gender:"male",company:"KAGGLE",email:"byerssantana@kaggle.com",phone:"+1 (984) 546-3400",registered:"2015-08-17T02:48:09 -06:00"},{id:10,age:30,name:"Nina Middleton",gender:"female",company:"ZINCA",email:"ninamiddleton@zinca.com",phone:"+1 (829) 553-2060",registered:"2014-12-20T09:53:27 -06:00"},{id:11,age:38,name:"Nixon Morrow",gender:"male",company:"CUBIX",email:"nixonmorrow@cubix.com",phone:"+1 (825) 501-3712",registered:"2014-09-10T10:23:34 -06:00"},{id:12,age:28,name:"Bonita Pate",gender:"female",company:"MAGNEATO",email:"bonitapate@magneato.com",phone:"+1 (808) 497-3968",registered:"2016-01-20T02:45:43 -06:00"},{id:13,age:30,name:"Amy Hyde",gender:"female",company:"UNDERTAP",email:"amyhyde@undertap.com",phone:"+1 (867) 555-2669",registered:"2015-04-12T08:39:31 -06:00"},{id:14,age:20,name:"Cortez Camacho",gender:"male",company:"IDEGO",email:"cortezcamacho@idego.com",phone:"+1 (986) 546-3364",registered:"2014-08-21T11:00:20 -06:00"},{id:15,age:29,name:"Castaneda Armstrong",gender:"male",company:"INTERFIND",email:"castanedaarmstrong@interfind.com",phone:"+1 (975) 557-2651",registered:"2014-11-15T10:38:24 -06:00"},{id:16,age:37,name:"Liza West",gender:"female",company:"COWTOWN",email:"lizawest@cowtown.com",phone:"+1 (852) 415-2358",registered:"2017-05-06T09:46:03 -06:00"},{id:17,age:37,name:"Roth Baird",gender:"male",company:"RODEMCO",email:"rothbaird@rodemco.com",phone:"+1 (840) 417-3313",registered:"2015-04-18T10:58:50 -06:00"},{id:18,age:26,name:"Alexis Blackburn",gender:"female",company:"PREMIANT",email:"alexisblackburn@premiant.com",phone:"+1 (957) 576-2362",registered:"2014-08-08T12:59:38 -06:00"},{id:19,age:35,name:"Sadie Tillman",gender:"female",company:"DUOFLEX",email:"sadietillman@duoflex.com",phone:"+1 (843) 499-3330",registered:"2016-02-21T09:25:03 -06:00"},{id:20,age:27,name:"Sharron Conley",gender:"female",company:"QUARMONY",email:"sharronconley@quarmony.com",phone:"+1 (951) 459-2465",registered:"2014-10-19T06:04:36 -06:00"},{id:21,age:27,name:"Jordan Mccoy",gender:"male",company:"ACCUSAGE",email:"jordanmccoy@accusage.com",phone:"+1 (825) 568-3296",registered:"2017-01-27T01:53:02 -06:00"},{id:22,age:35,name:"Rene House",gender:"female",company:"INSURETY",email:"renehouse@insurety.com",phone:"+1 (838) 578-3190",registered:"2015-11-07T10:07:58 -06:00"},{id:23,age:38,name:"Bernice Berry",gender:"female",company:"ROCKYARD",email:"berniceberry@rockyard.com",phone:"+1 (885) 466-2145",registered:"2014-04-17T07:43:02 -06:00"},{id:24,age:30,name:"Bowen Beach",gender:"male",company:"TETRATREX",email:"bowenbeach@tetratrex.com",phone:"+1 (843) 493-3197",registered:"2015-07-27T03:38:33 -06:00"},{id:25,age:31,name:"Monica Leblanc",gender:"female",company:"TALENDULA",email:"monicaleblanc@talendula.com",phone:"+1 (911) 524-2349",registered:"2016-04-10T08:33:17 -06:00"},{id:26,age:36,name:"Lina Rivas",gender:"female",company:"BOINK",email:"linarivas@boink.com",phone:"+1 (983) 572-2470",registered:"2014-08-28T09:44:32 -06:00"},{id:27,age:25,name:"Joyce Yang",gender:"female",company:"SPORTAN",email:"joyceyang@sportan.com",phone:"+1 (807) 491-3917",registered:"2015-07-22T12:58:31 -06:00"},{id:28,age:20,name:"Lana Joseph",gender:"female",company:"BOLAX",email:"lanajoseph@bolax.com",phone:"+1 (942) 467-2363",registered:"2016-10-30T06:13:50 -06:00"},{id:29,age:20,name:"Jimenez Guerrero",gender:"male",company:"INSURON",email:"jimenezguerrero@insuron.com",phone:"+1 (991) 585-3706",registered:"2016-09-15T01:35:16 -06:00"},{id:30,age:35,name:"Williams Bentley",gender:"male",company:"ZEAM",email:"williamsbentley@zeam.com",phone:"+1 (837) 490-2610",registered:"2014-01-06T01:04:11 -06:00"},{id:31,age:27,name:"Doreen Garrett",gender:"female",company:"ENERSAVE",email:"doreengarrett@enersave.com",phone:"+1 (920) 522-2847",registered:"2017-01-25T03:24:47 -06:00"},{id:32,age:34,name:"Shaw Cannon",gender:"male",company:"EBIDCO",email:"shawcannon@ebidco.com",phone:"+1 (903) 530-2676",registered:"2014-04-11T04:49:08 -06:00"},{id:33,age:25,name:"Sonya Skinner",gender:"female",company:"EXOSWITCH",email:"sonyaskinner@exoswitch.com",phone:"+1 (923) 428-3014",registered:"2014-02-09T11:59:54 -06:00"},{id:34,age:27,name:"Todd Potter",gender:"male",company:"MUSIX",email:"toddpotter@musix.com",phone:"+1 (817) 491-2268",registered:"2015-04-06T11:10:47 -06:00"},{id:35,age:21,name:"Celina Rose",gender:"female",company:"TWIIST",email:"celinarose@twiist.com",phone:"+1 (863) 599-2063",registered:"2015-09-04T07:59:29 -06:00"},{id:36,age:40,name:"Ingrid Day",gender:"female",company:"ZBOO",email:"ingridday@zboo.com",phone:"+1 (921) 447-2312",registered:"2016-10-01T08:26:07 -06:00"},{id:37,age:24,name:"Lynch Stark",gender:"male",company:"PYRAMIA",email:"lynchstark@pyramia.com",phone:"+1 (995) 431-2354",registered:"2014-01-26T11:38:48 -06:00"},{id:38,age:29,name:"Helga Mendez",gender:"female",company:"COMVEYER",email:"helgamendez@comveyer.com",phone:"+1 (897) 418-3815",registered:"2015-10-03T08:58:45 -06:00"},{id:39,age:30,name:"Corinne Calhoun",gender:"female",company:"ADORNICA",email:"corinnecalhoun@adornica.com",phone:"+1 (841) 564-3617",registered:"2016-05-24T10:42:36 -06:00"},{id:40,age:40,name:"Winifred Conrad",gender:"female",company:"SATIANCE",email:"winifredconrad@satiance.com",phone:"+1 (885) 533-2416",registered:"2017-03-01T06:12:08 -06:00"},{id:41,age:27,name:"Lawanda Stevenson",gender:"female",company:"ZILLACTIC",email:"lawandastevenson@zillactic.com",phone:"+1 (823) 535-3187",registered:"2014-07-07T05:26:22 -06:00"},{id:42,age:30,name:"Kirsten Long",gender:"female",company:"IMAGEFLOW",email:"kirstenlong@imageflow.com",phone:"+1 (809) 592-2264",registered:"2014-05-08T07:41:56 -06:00"},{id:43,age:39,name:"Summer Farley",gender:"female",company:"ENTOGROK",email:"summerfarley@entogrok.com",phone:"+1 (814) 490-3578",registered:"2016-10-28T10:02:34 -06:00"},{id:44,age:31,name:"Mendoza Randall",gender:"male",company:"COREPAN",email:"mendozarandall@corepan.com",phone:"+1 (846) 501-2860",registered:"2015-12-14T12:58:18 -06:00"},{id:45,age:27,name:"Marcy Doyle",gender:"female",company:"VORATAK",email:"marcydoyle@voratak.com",phone:"+1 (848) 411-2728",registered:"2014-02-12T10:46:27 -06:00"},{id:46,age:30,name:"Burch Walker",gender:"male",company:"COMVEYOR",email:"burchwalker@comveyor.com",phone:"+1 (968) 445-2104",registered:"2014-01-07T05:16:30 -06:00"},{id:47,age:31,name:"Solis Lester",gender:"male",company:"MACRONAUT",email:"solislester@macronaut.com",phone:"+1 (857) 422-3242",registered:"2016-10-20T09:40:51 -06:00"},{id:48,age:20,name:"Lorene Mooney",gender:"female",company:"ORGANICA",email:"lorenemooney@organica.com",phone:"+1 (853) 406-2716",registered:"2015-09-17T03:54:41 -06:00"},{id:49,age:34,name:"Rhodes Vega",gender:"male",company:"CHILLIUM",email:"rhodesvega@chillium.com",phone:"+1 (863) 577-3562",registered:"2016-06-15T05:36:10 -06:00"},{id:50,age:28,name:"Pruitt Merrill",gender:"male",company:"KYAGURU",email:"pruittmerrill@kyaguru.com",phone:"+1 (910) 585-3659",registered:"2017-04-02T09:36:00 -06:00"},{id:51,age:33,name:"Bernadine Hart",gender:"female",company:"BITTOR",email:"bernadinehart@bittor.com",phone:"+1 (906) 446-3518",registered:"2015-11-10T07:45:59 -06:00"},{id:52,age:22,name:"Carver Mckenzie",gender:"male",company:"LOCAZONE",email:"carvermckenzie@locazone.com",phone:"+1 (803) 407-3142",registered:"2015-06-24T07:16:02 -06:00"},{id:53,age:27,name:"Dean Cobb",gender:"male",company:"ASSISTIA",email:"deancobb@assistia.com",phone:"+1 (877) 539-3346",registered:"2016-12-02T01:14:47 -06:00"},{id:54,age:32,name:"Camacho Robinson",gender:"male",company:"INSURITY",email:"camachorobinson@insurity.com",phone:"+1 (929) 430-3079",registered:"2016-12-14T08:59:33 -06:00"},{id:55,age:36,name:"Nancy Rodgers",gender:"female",company:"COSMOSIS",email:"nancyrodgers@cosmosis.com",phone:"+1 (873) 489-2643",registered:"2014-08-21T02:19:28 -06:00"},{id:56,age:27,name:"June Henry",gender:"female",company:"PETIGEMS",email:"junehenry@petigems.com",phone:"+1 (808) 536-2445",registered:"2014-03-28T08:36:27 -06:00"},{id:57,age:26,name:"Rochelle Simmons",gender:"female",company:"DANJA",email:"rochellesimmons@danja.com",phone:"+1 (936) 563-3886",registered:"2015-12-07T08:01:18 -06:00"},{id:58,age:32,name:"Alice Thornton",gender:"female",company:"ISOSURE",email:"alicethornton@isosure.com",phone:"+1 (962) 560-2318",registered:"2015-06-07T08:09:50 -06:00"},{id:59,age:39,name:"Clara Downs",gender:"female",company:"ZANILLA",email:"claradowns@zanilla.com",phone:"+1 (977) 595-2657",registered:"2015-06-14T02:33:33 -06:00"}]}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=x.Rb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var Ke=a("qsxP");function Ye(e,t){if(1&e){const e=x.cc();x.bc(0,"div",6),x.bc(1,"a"),x.bc(2,"ngx-datatable",7),x.jc("activate",(function(t){return x.Gc(e),x.nc().onActivate(t)})),x.ac(),x.ac(),x.ac()}if(2&e){const e=x.nc();x.Gb(2),x.tc("columnMode","force")("headerHeight",50)("footerHeight",50)("rowHeight",50)("limit",8)("rows",e.rows)("columns",e.columns)}}let Je=(()=>{class e{constructor(e,t,a,n,c,i,r,o,s,m,l,d,u){this.dialog=e,this.snack=t,this.crudService=a,this.confirmService=n,this.loader=c,this.state=i,this.token=r,this.toastr=o,this.service=s,this.agent=m,this.data=l,this.router=d,this.retail=u,this.rows=[],this.columns=[],this.temp=[],this.role=this.state.role,this.state.user.subscribe(e=>{this.user=e})}ngOnInit(){this.getPartners(),this.columns=this.service.getDataConf(),this.rows=this.temp=this.retailers}ngOnDestroy(){}onActivate(e){"click"==e.type&&(console.log(e.row),this.agent.selectedretailer=this.retail.selectedretailer=this.data.selectedretailer=e.row,this.router.navigate(["/invoice/retailsummary"]))}getPartners(){this.retailers=this.data.retailers}updateFilter(e){const t=e.target.value.toLowerCase();var a=Object.keys(this.temp[0]);if(a.splice(a.length-1),!a.length)return;const n=this.temp.filter((function(e){for(let n=0;n<=a.length;n++){let c=a[n];if(e[c]&&e[c].toString().toLowerCase().indexOf(t)>-1)return!0}}));this.rows=n}addRetailer(e={},t){this.dialog.open(Ke.a,{width:"720px",disableClose:!0}).afterClosed().subscribe(a=>{a&&(this.loader.open(),t?this.crudService.addRetailer(a).subscribe(e=>{this.retailers=this.retailers.concat([e]),this.data.retailers=this.retailers,this.loader.close(),this.snack.open("New Retailer Added!","OK",{duration:4e3})}):this.crudService.updateItem(e._id,a).subscribe(e=>{this.retailers=e,this.loader.close(),this.snack.open("Member Updated!","OK",{duration:4e3})}))})}}return e.\u0275fac=function(t){return new(t||e)(x.Vb(I.b),x.Vb(G.a),x.Vb(p.a),x.Vb(y.a),x.Vb(v.a),x.Vb(g.a),x.Vb(h.a),x.Vb(k.b),x.Vb(_e),x.Vb(Ie),x.Vb(T.a),x.Vb(c.g),x.Vb(Ge))},e.\u0275cmp=x.Pb({type:e,selectors:[["app-agent-sale-overview"]],decls:7,vars:1,consts:[[1,"m-333"],["mat-raised-button","","color","primary",1,"mb-05",3,"click"],["fxFlex","8px"],[1,"margin-333",2,"width","100%"],["matInput","","placeholder","Type to filter all columns","value","",3,"keyup"],["class","mat-box-shadow margin-333",4,"ngIf"],[1,"mat-box-shadow","margin-333"],[1,"material","bg-white",3,"columnMode","headerHeight","footerHeight","rowHeight","limit","rows","columns","activate"]],template:function(e,t){1&e&&(x.bc(0,"div",0),x.bc(1,"button",1),x.jc("click",(function(e){return t.addRetailer({},!0)})),x.Pc(2,"Add A new Retailer"),x.ac(),x.Wb(3,"span",2),x.ac(),x.bc(4,"mat-form-field",3),x.bc(5,"input",4),x.jc("keyup",(function(e){return t.updateFilter(e)})),x.ac(),x.ac(),x.Nc(6,Ye,3,7,"div",5)),2&e&&(x.Gb(6),x.tc("ngIf",t.retailers))},directives:[S.b,F.a,N.b,R.b,n.m,o.c],styles:[""],data:{animation:f.a}}),e})();function Xe(e,t){if(1&e&&(x.bc(0,"mat-option",24),x.Pc(1),x.ac()),2&e){const e=t.$implicit;x.tc("value",e),x.Gb(1),x.Rc(" ",e," ")}}function $e(e,t){1&e&&(x.bc(0,"mat-error"),x.Pc(1,"How many items should be on the Invoice"),x.ac())}function Qe(e,t){if(1&e&&(x.bc(0,"div"),x.Nc(1,$e,2,0,"mat-error",11),x.ac()),2&e){const e=x.nc();x.Gb(1),x.tc("ngIf",e.f.numberOfTickets.errors.required)}}function Ze(e,t){if(1&e&&(x.bc(0,"mat-option",36),x.Pc(1),x.ac()),2&e){const e=t.$implicit;x.tc("disabled",0==e.status)("value",e),x.Gb(1),x.Uc(" ",e.name," - ",e.class," - GHC ",e.price," - Edition ",e.edition," ")}}function et(e,t){1&e&&(x.bc(0,"mat-error"),x.Pc(1,"You must select an Item"),x.ac())}function tt(e,t){if(1&e&&(x.bc(0,"div"),x.Nc(1,et,2,0,"mat-error",11),x.ac()),2&e){const e=x.nc().$implicit;x.Gb(1),x.tc("ngIf",e.controls.item.errors.required)}}function at(e,t){1&e&&(x.bc(0,"small",38),x.Pc(1,"Quantity must have a value"),x.ac())}function nt(e,t){if(1&e&&(x.bc(0,"div"),x.Nc(1,at,2,0,"small",37),x.ac()),2&e){const e=x.nc().$implicit;x.Gb(1),x.tc("ngIf",e.controls.quantity.errors.required)}}function ct(e,t){if(1&e){const e=x.cc();x.bc(0,"div"),x.bc(1,"h5",25),x.Pc(2),x.ac(),x.bc(3,"form",26),x.bc(4,"div",5),x.bc(5,"div",27),x.bc(6,"div",28),x.bc(7,"mat-label"),x.Pc(8,"Select and Item:"),x.ac(),x.bc(9,"mat-select",29),x.Nc(10,Ze,2,6,"mat-option",30),x.ac(),x.Nc(11,tt,2,1,"div",11),x.ac(),x.ac(),x.bc(12,"div",31),x.bc(13,"div",28),x.bc(14,"mat-form-field",32),x.Wb(15,"input",33),x.ac(),x.Nc(16,nt,2,1,"div",11),x.ac(),x.ac(),x.Wb(17,"span",17),x.bc(18,"div",34),x.bc(19,"button",35),x.jc("click",(function(a){x.Gc(e);const n=t.index;return x.nc().removeitem(n)})),x.Pc(20,"Remove"),x.ac(),x.ac(),x.ac(),x.ac(),x.ac()}if(2&e){const e=t.$implicit,a=t.index,n=x.nc();x.Gb(2),x.Rc("Item ",a+1,""),x.Gb(1),x.tc("formGroup",e),x.Gb(7),x.tc("ngForOf",n.pitems),x.Gb(1),x.tc("ngIf",n.submitted&&e.controls.item.errors),x.Gb(5),x.tc("ngIf",n.submitted&&e.controls.quantity.errors)}}function it(e,t){1&e&&(x.bc(0,"button",39),x.Pc(1,"Discard Sale Return to Agents"),x.ac())}function rt(e,t){1&e&&(x.bc(0,"button",40),x.Pc(1,"Discard Sale Return to Retailers"),x.ac())}function ot(e,t){if(1&e){const e=x.cc();x.bc(0,"button",41),x.jc("click",(function(t){return x.Gc(e),x.nc().calculateSale()})),x.Pc(1,"Make Sale"),x.ac()}}function st(e,t){if(1&e&&(x.bc(0,"div",42),x.bc(1,"div",43),x.Pc(2,"Total: "),x.bc(3,"b"),x.Pc(4),x.ac(),x.ac(),x.Wb(5,"span",44),x.bc(6,"div",43),x.Pc(7,"Sale After Discount: "),x.bc(8,"b"),x.Pc(9),x.ac(),x.ac(),x.Wb(10,"span",45),x.ac()),2&e){const e=x.nc();x.Gb(4),x.Rc("GHC ",e.totalsale,""),x.Gb(5),x.Rc("GHC ",e.afterdiscount,"")}}let mt=(()=>{class e{constructor(e,t,a,n,c,i,r){this.agent=e,this.crudService=t,this.fb=a,this.loader=n,this.toastr=c,this.data=i,this.router=r,this.submitted=!1}ngOnInit(){this.selectedretailer=this.agent.selectedretailer,this.role=this.data.role,this.dynamicForm=this.fb.group({numberOfTickets:["",i.s.required],retailer:this.selectedretailer,discount:["",i.s.required],tickets:new i.c([])}),this.pitems=this.items=this.data.stocks,this.length=Array(this.items.length).fill(1).map((e,t)=>t+1)}get f(){return this.dynamicForm.controls}get t(){return this.f.tickets}onChangeTickets(e){const t=e.value||0;if(this.t.length<t)for(let a=this.t.length;a<t;a++)this.t.push(this.fb.group({item:["",i.s.required],quantity:["",[i.s.required]]}));else for(let a=this.t.length;a>=t;a--)this.t.removeAt(a)}highlight(e){console.log(e)}itemchange(e){e.value.status=0,this.pitems=this.pitems.filter((function(t){return t.id!==e.value.id})),this.pitems=this.pitems.concat([e.value])}removeitem(e){this.t.removeAt(e)}onSubmit(){if(this.submitted=!0,this.dynamicForm.invalid)return;const e=this.dynamicForm.value.tickets,t=this.dynamicForm.value.discount;this.totalsale=0;for(var a=0,n=e.length;a<n;a++)this.totalsale=this.totalsale+e[a].item.price*e[a].quantity;for(this.afterdiscount=this.totalsale*(1-t/100),a=1,n=this.dynamicForm.value.tickets.length;a<n;a++);}onReset(){this.submitted=!1,this.dynamicForm.reset(),this.t.clear()}onClear(){this.submitted=!1,this.t.reset()}calculateSale(){this.loader.open(),this.crudService.agentCalculateSale(this.dynamicForm.value).subscribe(e=>{this.loader.close(),this.data.newsaledata=this.dynamicForm.value,this.router.navigate(["/invoice/preinvoice"]),this.toastr.success("succes",e)},e=>{this.loader.close(),this.toastr.error("error",e.error)})}}return e.\u0275fac=function(t){return new(t||e)(x.Vb(Ge),x.Vb(p.a),x.Vb(i.d),x.Vb(v.a),x.Vb(k.b),x.Vb(T.a),x.Vb(c.g))},e.\u0275cmp=x.Pb({type:e,selectors:[["app-agent-new-sale"]],decls:34,vars:8,consts:[[1,"p-0"],[1,""],[1,"card-title-text"],[3,"formGroup","ngSubmit"],[1,"card","m-3"],["fxLayout","row wrap"],["fxFlex","100","fxFlex.gt-xs","30",1,"pr-1"],[1,"pt-1","pb-1"],["formControlName","numberOfTickets","required","",3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],["matSuffix","",1,"secondary-text"],[4,"ngIf"],["fxFlex","100","fxFlex.gt-xs","30"],["matInput","","placeholder","Discount","formControlName","discount","required",""],[4,"ngFor","ngForOf"],[1,"card-footer","text-center"],["mat-raised-button","","color","primary",1,"mb-05"],["fxFlex","8px"],["mat-raised-button","","color","warn","type","reset",1,"mb-05",3,"click"],["mat-raised-button","","class","mb-05","color","accent","routerLink","/invoice/home",4,"ngIf"],["mat-raised-button","","class","mb-05","color","accent","routerLink","/invoice/retail",4,"ngIf"],["mat-raised-button","","class","mb-05","color","accent",3,"click",4,"ngIf"],["fxFlex","200px"],["class","profile-title text-center mb-1",4,"ngIf"],[3,"value"],["colour","accent",1,"card-title"],[3,"formGroup"],["fxFlex","100","fxFlex.gt-xs","40",1,"pr-1"],[1,"pb-1"],["formControlName","item","required",""],[3,"disabled","value",4,"ngFor","ngForOf"],["fxFlex","100","fxFlex.gt-xs","40"],[1,"full-width"],["matInput","","name","quantity","formControlName","quantity","placeholder","Quantity (Min Length: 4, Max Length: 9)","value",""],["fxFlex","100","fxFlex.gt-xs","10"],["mat-raised-button","","color","primary",1,"mb-05",3,"click"],[3,"disabled","value"],["class","form-error-msg",4,"ngIf"],[1,"form-error-msg"],["mat-raised-button","","color","accent","routerLink","/invoice/home",1,"mb-05"],["mat-raised-button","","color","accent","routerLink","/invoice/retail",1,"mb-05"],["mat-raised-button","","color","accent",1,"mb-05",3,"click"],[1,"profile-title","text-center","mb-1"],[1,"main-title"],["fxFlex","100px"],["fxFlex","20px"]],template:function(e,t){1&e&&(x.bc(0,"mat-card",0),x.bc(1,"mat-card-title",1),x.bc(2,"div",2),x.Pc(3,"Selling Form"),x.ac(),x.Wb(4,"mat-divider"),x.ac(),x.bc(5,"mat-card-content"),x.bc(6,"form",3),x.jc("ngSubmit",(function(e){return t.onSubmit()})),x.bc(7,"div",4),x.bc(8,"div",5),x.bc(9,"div",6),x.bc(10,"mat-form-field",7),x.bc(11,"mat-label"),x.Pc(12,"Number of Items:"),x.ac(),x.bc(13,"mat-select",8),x.jc("selectionChange",(function(e){return t.onChangeTickets(e)})),x.Nc(14,Xe,2,2,"mat-option",9),x.ac(),x.bc(15,"mat-icon",10),x.Pc(16,"outlined_flag"),x.ac(),x.Nc(17,Qe,2,1,"div",11),x.ac(),x.ac(),x.bc(18,"div",12),x.bc(19,"mat-form-field",7),x.Wb(20,"input",13),x.ac(),x.ac(),x.ac(),x.Nc(21,ct,21,5,"div",14),x.bc(22,"div",15),x.bc(23,"button",16),x.Pc(24,"Calculate Sale"),x.ac(),x.Wb(25,"span",17),x.bc(26,"button",18),x.jc("click",(function(e){return t.onReset()})),x.Pc(27,"Reset"),x.ac(),x.Wb(28,"span",17),x.Nc(29,it,2,0,"button",19),x.Nc(30,rt,2,0,"button",20),x.Nc(31,ot,2,0,"button",21),x.Wb(32,"span",22),x.Nc(33,st,11,2,"div",23),x.ac(),x.ac(),x.ac(),x.ac(),x.ac()),2&e&&(x.Gb(6),x.tc("formGroup",t.dynamicForm),x.Gb(8),x.tc("ngForOf",t.length),x.Gb(3),x.tc("ngIf",t.submitted&&t.f.numberOfTickets.errors),x.Gb(4),x.tc("ngForOf",t.t.controls),x.Gb(8),x.tc("ngIf",t.role.publisher),x.Gb(1),x.tc("ngIf",t.role.agent),x.Gb(1),x.tc("ngIf",t.afterdiscount),x.Gb(2),x.tc("ngIf",t.afterdiscount))},directives:[W.a,W.d,_.a,W.b,i.t,i.n,i.h,F.c,F.a,N.b,N.e,M.a,i.m,i.g,i.r,n.l,L.a,N.f,n.m,R.b,i.b,S.b,E.p,N.a,c.h],styles:[""]}),e})(),lt=(()=>{class e{constructor(e,t){this.data=e,this.crudeService=t}resolve(e,t){return new Promise((e,t)=>{Promise.all([this.getStocks()]).then(()=>{e()},t)})}getStocks(){return new Promise((e,t)=>{this.data.stocks?(this.stocks=this.data.stocks,e(this.stocks)):this.crudeService.getStocks().subscribe(t=>{this.stocks=t.data,this.data.stocks=t.data,e(this.stocks)},t)})}}return e.\u0275fac=function(t){return new(t||e)(x.fc(T.a),x.fc(p.a))},e.\u0275prov=x.Rb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const dt=[{path:"",children:[{path:"home",component:O,data:{title:"home",breadcrumb:"HOME"},resolve:{subject:(()=>{class e{constructor(e,t,a){this.router=e,this.crudeService=t,this.data=a}resolve(e,t){return new Promise((e,t)=>{Promise.all([this.getPartners()]).then(()=>{e()},t)})}getPartners(){return new Promise((e,t)=>{this.data.partners?(this.partners=this.data.partners,e(this.partners)):this.crudeService.getPartners().subscribe(t=>{this.partners=t.data,this.data.partners=t.data,e(this.partners)},t)})}}return e.\u0275fac=function(t){return new(t||e)(x.fc(c.g),x.fc(p.a),x.fc(T.a))},e.\u0275prov=x.Rb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()}},{path:"agentsummary",component:B,data:{title:"agentsummary",breadcrumb:"AGENT SUMMARY"},resolve:{subject:P}},{path:"newsale",component:ce,data:{title:"newsale",breadcrumb:"NEW SALE"},resolve:{subject:Pe}},{path:"retailsummary",component:Be,data:{title:"retailsummary",breadcrumb:"RETAIL SUMMARY"},resolve:{subject:Ge}},{path:"retail",component:Je,data:{title:"retailhome",breadcrumb:"RETAIL HOME"},resolve:{subject:Ie}},{path:"agentnewsale",component:mt,data:{title:"agentnewsale",breadcrumb:"AGENT NEW SALE"},resolve:{subject:lt}}]},{path:"preinvoice",component:Te,data:{title:"preinvoice",breadcrumb:"AGREEMENT INVOICE"}}];var ut=a("MutI");a.d(t,"InvoiceModule",(function(){return bt}));let bt=(()=>{class e{}return e.\u0275mod=x.Tb({type:e}),e.\u0275inj=x.Sb({factory:function(t){return new(t||e)},providers:[k.b,P],imports:[[n.c,i.i,r.a,o.d,s.a,m.a,l.a,b.a,R.c,W.c,S.c,ut.c,i.q,r.a,d.b,u.a,c.k.forChild(dt)]]}),e})()}}]);