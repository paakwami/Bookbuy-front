function _classCallCheck(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,a){for(var t=0;t<a.length;t++){var n=a[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,a,t){return a&&_defineProperties(e.prototype,a),t&&_defineProperties(e,t),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{jEVh:function(e,a,t){"use strict";t.r(a);var n,c,i=t("ofXK"),r=t("tyNb"),o=t("3Pt+"),l=t("YUcS"),s=t("lDzL"),m=t("LPYB"),d=t("7pIB"),u=t("aYsj"),b=t("0Lhs"),g=t("PCNd"),f=t("zMWy"),h=t("qP9D"),p=t("yz3j"),y=t("nm5K"),v=t("GmJt"),x=t("3kSh"),w=t("3sEA"),k=t("fXoL"),C=((n=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"getDataConf",value:function(){return[{prop:"id"},{prop:"name",name:"Name"}]}},{key:"getAll",value:function(){return[{id:0,age:40,name:"Mclean Brady",gender:"male",company:"JAMNATION",email:"mcleanbrady@jamnation.com",phone:"+1 (875) 472-2061",registered:"2014-10-20T04:54:00 -06:00"},{id:1,age:39,name:"Dillon Ruiz",gender:"male",company:"ACRODANCE",email:"dillonruiz@acrodance.com",phone:"+1 (858) 562-2261",registered:"2016-08-07T12:15:31 -06:00"},{id:2,age:39,name:"Robyn Knox",gender:"female",company:"GLUID",email:"robynknox@gluid.com",phone:"+1 (826) 491-3098",registered:"2017-02-12T02:43:39 -06:00"},{id:3,age:32,name:"Santana Wagner",gender:"male",company:"INTRADISK",email:"santanawagner@intradisk.com",phone:"+1 (841) 550-2276",registered:"2016-03-28T11:22:15 -06:00"},{id:4,age:34,name:"Jennie Branch",gender:"female",company:"VERAQ",email:"jenniebranch@veraq.com",phone:"+1 (895) 483-3982",registered:"2015-03-16T01:30:06 -06:00"},{id:5,age:39,name:"Farrell Preston",gender:"male",company:"HONOTRON",email:"farrellpreston@honotron.com",phone:"+1 (993) 534-2843",registered:"2015-08-14T09:07:47 -06:00"},{id:6,age:38,name:"Garner Reyes",gender:"male",company:"VIOCULAR",email:"garnerreyes@viocular.com",phone:"+1 (973) 495-3873",registered:"2016-03-23T03:47:23 -06:00"},{id:7,age:32,name:"Ella Boone",gender:"female",company:"ARCHITAX",email:"ellaboone@architax.com",phone:"+1 (945) 491-2580",registered:"2015-07-01T09:35:10 -06:00"},{id:8,age:30,name:"Kathryn Owens",gender:"female",company:"CYCLONICA",email:"kathrynowens@cyclonica.com",phone:"+1 (978) 598-2767",registered:"2014-03-11T11:38:12 -06:00"},{id:9,age:22,name:"Byers Santana",gender:"male",company:"KAGGLE",email:"byerssantana@kaggle.com",phone:"+1 (984) 546-3400",registered:"2015-08-17T02:48:09 -06:00"},{id:10,age:30,name:"Nina Middleton",gender:"female",company:"ZINCA",email:"ninamiddleton@zinca.com",phone:"+1 (829) 553-2060",registered:"2014-12-20T09:53:27 -06:00"},{id:11,age:38,name:"Nixon Morrow",gender:"male",company:"CUBIX",email:"nixonmorrow@cubix.com",phone:"+1 (825) 501-3712",registered:"2014-09-10T10:23:34 -06:00"},{id:12,age:28,name:"Bonita Pate",gender:"female",company:"MAGNEATO",email:"bonitapate@magneato.com",phone:"+1 (808) 497-3968",registered:"2016-01-20T02:45:43 -06:00"},{id:13,age:30,name:"Amy Hyde",gender:"female",company:"UNDERTAP",email:"amyhyde@undertap.com",phone:"+1 (867) 555-2669",registered:"2015-04-12T08:39:31 -06:00"},{id:14,age:20,name:"Cortez Camacho",gender:"male",company:"IDEGO",email:"cortezcamacho@idego.com",phone:"+1 (986) 546-3364",registered:"2014-08-21T11:00:20 -06:00"},{id:15,age:29,name:"Castaneda Armstrong",gender:"male",company:"INTERFIND",email:"castanedaarmstrong@interfind.com",phone:"+1 (975) 557-2651",registered:"2014-11-15T10:38:24 -06:00"},{id:16,age:37,name:"Liza West",gender:"female",company:"COWTOWN",email:"lizawest@cowtown.com",phone:"+1 (852) 415-2358",registered:"2017-05-06T09:46:03 -06:00"},{id:17,age:37,name:"Roth Baird",gender:"male",company:"RODEMCO",email:"rothbaird@rodemco.com",phone:"+1 (840) 417-3313",registered:"2015-04-18T10:58:50 -06:00"},{id:18,age:26,name:"Alexis Blackburn",gender:"female",company:"PREMIANT",email:"alexisblackburn@premiant.com",phone:"+1 (957) 576-2362",registered:"2014-08-08T12:59:38 -06:00"},{id:19,age:35,name:"Sadie Tillman",gender:"female",company:"DUOFLEX",email:"sadietillman@duoflex.com",phone:"+1 (843) 499-3330",registered:"2016-02-21T09:25:03 -06:00"},{id:20,age:27,name:"Sharron Conley",gender:"female",company:"QUARMONY",email:"sharronconley@quarmony.com",phone:"+1 (951) 459-2465",registered:"2014-10-19T06:04:36 -06:00"},{id:21,age:27,name:"Jordan Mccoy",gender:"male",company:"ACCUSAGE",email:"jordanmccoy@accusage.com",phone:"+1 (825) 568-3296",registered:"2017-01-27T01:53:02 -06:00"},{id:22,age:35,name:"Rene House",gender:"female",company:"INSURETY",email:"renehouse@insurety.com",phone:"+1 (838) 578-3190",registered:"2015-11-07T10:07:58 -06:00"},{id:23,age:38,name:"Bernice Berry",gender:"female",company:"ROCKYARD",email:"berniceberry@rockyard.com",phone:"+1 (885) 466-2145",registered:"2014-04-17T07:43:02 -06:00"},{id:24,age:30,name:"Bowen Beach",gender:"male",company:"TETRATREX",email:"bowenbeach@tetratrex.com",phone:"+1 (843) 493-3197",registered:"2015-07-27T03:38:33 -06:00"},{id:25,age:31,name:"Monica Leblanc",gender:"female",company:"TALENDULA",email:"monicaleblanc@talendula.com",phone:"+1 (911) 524-2349",registered:"2016-04-10T08:33:17 -06:00"},{id:26,age:36,name:"Lina Rivas",gender:"female",company:"BOINK",email:"linarivas@boink.com",phone:"+1 (983) 572-2470",registered:"2014-08-28T09:44:32 -06:00"},{id:27,age:25,name:"Joyce Yang",gender:"female",company:"SPORTAN",email:"joyceyang@sportan.com",phone:"+1 (807) 491-3917",registered:"2015-07-22T12:58:31 -06:00"},{id:28,age:20,name:"Lana Joseph",gender:"female",company:"BOLAX",email:"lanajoseph@bolax.com",phone:"+1 (942) 467-2363",registered:"2016-10-30T06:13:50 -06:00"},{id:29,age:20,name:"Jimenez Guerrero",gender:"male",company:"INSURON",email:"jimenezguerrero@insuron.com",phone:"+1 (991) 585-3706",registered:"2016-09-15T01:35:16 -06:00"},{id:30,age:35,name:"Williams Bentley",gender:"male",company:"ZEAM",email:"williamsbentley@zeam.com",phone:"+1 (837) 490-2610",registered:"2014-01-06T01:04:11 -06:00"},{id:31,age:27,name:"Doreen Garrett",gender:"female",company:"ENERSAVE",email:"doreengarrett@enersave.com",phone:"+1 (920) 522-2847",registered:"2017-01-25T03:24:47 -06:00"},{id:32,age:34,name:"Shaw Cannon",gender:"male",company:"EBIDCO",email:"shawcannon@ebidco.com",phone:"+1 (903) 530-2676",registered:"2014-04-11T04:49:08 -06:00"},{id:33,age:25,name:"Sonya Skinner",gender:"female",company:"EXOSWITCH",email:"sonyaskinner@exoswitch.com",phone:"+1 (923) 428-3014",registered:"2014-02-09T11:59:54 -06:00"},{id:34,age:27,name:"Todd Potter",gender:"male",company:"MUSIX",email:"toddpotter@musix.com",phone:"+1 (817) 491-2268",registered:"2015-04-06T11:10:47 -06:00"},{id:35,age:21,name:"Celina Rose",gender:"female",company:"TWIIST",email:"celinarose@twiist.com",phone:"+1 (863) 599-2063",registered:"2015-09-04T07:59:29 -06:00"},{id:36,age:40,name:"Ingrid Day",gender:"female",company:"ZBOO",email:"ingridday@zboo.com",phone:"+1 (921) 447-2312",registered:"2016-10-01T08:26:07 -06:00"},{id:37,age:24,name:"Lynch Stark",gender:"male",company:"PYRAMIA",email:"lynchstark@pyramia.com",phone:"+1 (995) 431-2354",registered:"2014-01-26T11:38:48 -06:00"},{id:38,age:29,name:"Helga Mendez",gender:"female",company:"COMVEYER",email:"helgamendez@comveyer.com",phone:"+1 (897) 418-3815",registered:"2015-10-03T08:58:45 -06:00"},{id:39,age:30,name:"Corinne Calhoun",gender:"female",company:"ADORNICA",email:"corinnecalhoun@adornica.com",phone:"+1 (841) 564-3617",registered:"2016-05-24T10:42:36 -06:00"},{id:40,age:40,name:"Winifred Conrad",gender:"female",company:"SATIANCE",email:"winifredconrad@satiance.com",phone:"+1 (885) 533-2416",registered:"2017-03-01T06:12:08 -06:00"},{id:41,age:27,name:"Lawanda Stevenson",gender:"female",company:"ZILLACTIC",email:"lawandastevenson@zillactic.com",phone:"+1 (823) 535-3187",registered:"2014-07-07T05:26:22 -06:00"},{id:42,age:30,name:"Kirsten Long",gender:"female",company:"IMAGEFLOW",email:"kirstenlong@imageflow.com",phone:"+1 (809) 592-2264",registered:"2014-05-08T07:41:56 -06:00"},{id:43,age:39,name:"Summer Farley",gender:"female",company:"ENTOGROK",email:"summerfarley@entogrok.com",phone:"+1 (814) 490-3578",registered:"2016-10-28T10:02:34 -06:00"},{id:44,age:31,name:"Mendoza Randall",gender:"male",company:"COREPAN",email:"mendozarandall@corepan.com",phone:"+1 (846) 501-2860",registered:"2015-12-14T12:58:18 -06:00"},{id:45,age:27,name:"Marcy Doyle",gender:"female",company:"VORATAK",email:"marcydoyle@voratak.com",phone:"+1 (848) 411-2728",registered:"2014-02-12T10:46:27 -06:00"},{id:46,age:30,name:"Burch Walker",gender:"male",company:"COMVEYOR",email:"burchwalker@comveyor.com",phone:"+1 (968) 445-2104",registered:"2014-01-07T05:16:30 -06:00"},{id:47,age:31,name:"Solis Lester",gender:"male",company:"MACRONAUT",email:"solislester@macronaut.com",phone:"+1 (857) 422-3242",registered:"2016-10-20T09:40:51 -06:00"},{id:48,age:20,name:"Lorene Mooney",gender:"female",company:"ORGANICA",email:"lorenemooney@organica.com",phone:"+1 (853) 406-2716",registered:"2015-09-17T03:54:41 -06:00"},{id:49,age:34,name:"Rhodes Vega",gender:"male",company:"CHILLIUM",email:"rhodesvega@chillium.com",phone:"+1 (863) 577-3562",registered:"2016-06-15T05:36:10 -06:00"},{id:50,age:28,name:"Pruitt Merrill",gender:"male",company:"KYAGURU",email:"pruittmerrill@kyaguru.com",phone:"+1 (910) 585-3659",registered:"2017-04-02T09:36:00 -06:00"},{id:51,age:33,name:"Bernadine Hart",gender:"female",company:"BITTOR",email:"bernadinehart@bittor.com",phone:"+1 (906) 446-3518",registered:"2015-11-10T07:45:59 -06:00"},{id:52,age:22,name:"Carver Mckenzie",gender:"male",company:"LOCAZONE",email:"carvermckenzie@locazone.com",phone:"+1 (803) 407-3142",registered:"2015-06-24T07:16:02 -06:00"},{id:53,age:27,name:"Dean Cobb",gender:"male",company:"ASSISTIA",email:"deancobb@assistia.com",phone:"+1 (877) 539-3346",registered:"2016-12-02T01:14:47 -06:00"},{id:54,age:32,name:"Camacho Robinson",gender:"male",company:"INSURITY",email:"camachorobinson@insurity.com",phone:"+1 (929) 430-3079",registered:"2016-12-14T08:59:33 -06:00"},{id:55,age:36,name:"Nancy Rodgers",gender:"female",company:"COSMOSIS",email:"nancyrodgers@cosmosis.com",phone:"+1 (873) 489-2643",registered:"2014-08-21T02:19:28 -06:00"},{id:56,age:27,name:"June Henry",gender:"female",company:"PETIGEMS",email:"junehenry@petigems.com",phone:"+1 (808) 536-2445",registered:"2014-03-28T08:36:27 -06:00"},{id:57,age:26,name:"Rochelle Simmons",gender:"female",company:"DANJA",email:"rochellesimmons@danja.com",phone:"+1 (936) 563-3886",registered:"2015-12-07T08:01:18 -06:00"},{id:58,age:32,name:"Alice Thornton",gender:"female",company:"ISOSURE",email:"alicethornton@isosure.com",phone:"+1 (962) 560-2318",registered:"2015-06-07T08:09:50 -06:00"},{id:59,age:39,name:"Clara Downs",gender:"female",company:"ZANILLA",email:"claradowns@zanilla.com",phone:"+1 (977) 595-2657",registered:"2015-06-14T02:33:33 -06:00"}]}}]),e}()).\u0275fac=function(e){return new(e||n)},n.\u0275prov=k.Rb({token:n,factory:n.\u0275fac,providedIn:"root"}),n),T=t("FHx2"),P=((c=function(){function e(a,t,n){_classCallCheck(this,e),this.router=a,this.crudeService=t,this.data=n,this.data.selectedagent=this.selectedagent}return _createClass(e,[{key:"resolve",value:function(e,a){var t=this;return new Promise((function(e,a){Promise.all([t.getPaymentMethods(),t.getPayments()]).then((function(){e()}),a)}))}},{key:"getPaymentMethods",value:function(){var e=this;return new Promise((function(a,t){e.data.paymentmethods?(e.paymentmethods=e.data.paymentmethods,a(e.paymentmethods)):e.crudeService.getPaymentMethod().subscribe((function(t){e.paymentmethods=t.data,e.data.paymentmethods=t.data,a(e.paymentmethods)}),t)}))}},{key:"getPayments",value:function(){var e=this;return new Promise((function(a,t){e.crudeService.getPayments(e.selectedagent.id).subscribe((function(t){e.payments=t.data,a(e.payments)}),t)}))}}]),e}()).\u0275fac=function(e){return new(e||c)(k.fc(r.g),k.fc(y.a),k.fc(T.a))},c.\u0275prov=k.Rb({token:c,factory:c.\u0275fac,providedIn:"root"}),c),I=t("0IaG"),G=t("dNgK"),N=t("5eHb"),R=t("kmnG"),S=t("qFsG"),A=t("bTqV");function O(e,a){if(1&e){var t=k.cc();k.bc(0,"button",5),k.jc("click",(function(e){return k.Gc(t),k.nc().requestAgent({},!0)})),k.Pc(1,"Ask an Agent to Sell your Stock"),k.ac()}}function F(e,a){if(1&e){var t=k.cc();k.bc(0,"div",6),k.bc(1,"a"),k.bc(2,"ngx-datatable",7),k.jc("activate",(function(e){return k.Gc(t),k.nc().onActivate(e)})),k.ac(),k.ac(),k.ac()}if(2&e){var n=k.nc();k.Gb(2),k.tc("columnMode","force")("headerHeight",50)("footerHeight",50)("rowHeight",50)("limit",8)("rows",n.rows)("columns",n.columns)}}var M,L=((M=function(){function e(a,t,n,c,i,r,o,l,s,m,d,u){var b=this;_classCallCheck(this,e),this.dialog=a,this.snack=t,this.crudService=n,this.confirmService=c,this.loader=i,this.data=r,this.state=o,this.token=l,this.toastr=s,this.service=m,this.agent=d,this.router=u,this.rows=[],this.columns=[],this.temp=[],this.role=this.state.role,this.state.user.subscribe((function(e){b.user=e}))}return _createClass(e,[{key:"ngOnInit",value:function(){this.partners=this.rows=this.temp=this.data.partners,this.columns=this.service.getDataConf()}},{key:"ngOnDestroy",value:function(){}},{key:"onActivate",value:function(e){"click"==e.type&&(this.agent.selectedagent=e.row,this.router.navigate(["/invoice/agentsummary"]))}},{key:"updateFilter",value:function(e){var a=e.target.value.toLowerCase(),t=Object.keys(this.temp[0]);if(t.splice(t.length-1),t.length){var n=this.temp.filter((function(e){for(var n=0;n<=t.length;n++){var c=t[n];if(e[c]&&e[c].toString().toLowerCase().indexOf(a)>-1)return!0}}));this.rows=n}}}]),e}()).\u0275fac=function(e){return new(e||M)(k.Vb(I.b),k.Vb(G.a),k.Vb(y.a),k.Vb(x.a),k.Vb(w.a),k.Vb(T.a),k.Vb(h.a),k.Vb(p.a),k.Vb(N.b),k.Vb(C),k.Vb(P),k.Vb(r.g))},M.\u0275cmp=k.Pb({type:M,selectors:[["app-sale-overview"]],decls:5,vars:2,consts:[[1,"m-333"],["mat-raised-button","","class","mb-05","color","primary",3,"click",4,"ngIf"],[1,"margin-333",2,"width","100%"],["matInput","","placeholder","Type to filter all columns","value","",3,"keyup"],["class","mat-box-shadow margin-333",4,"ngIf"],["mat-raised-button","","color","primary",1,"mb-05",3,"click"],[1,"mat-box-shadow","margin-333"],[1,"material","bg-white",3,"columnMode","headerHeight","footerHeight","rowHeight","limit","rows","columns","activate"]],template:function(e,a){1&e&&(k.bc(0,"div",0),k.Nc(1,O,2,0,"button",1),k.ac(),k.bc(2,"mat-form-field",2),k.bc(3,"input",3),k.jc("keyup",(function(e){return a.updateFilter(e)})),k.ac(),k.ac(),k.Nc(4,F,3,7,"div",4)),2&e&&(k.Gb(1),k.tc("ngIf",a.role.publisher),k.Gb(3),k.tc("ngIf",a.partners))},directives:[i.m,R.b,S.b,A.b,s.c],styles:[""],data:{animation:v.a}}),M),E=t("XiUz"),V=t("d3UM"),_=t("NFeN"),H=t("FKr1");function W(e,a){if(1&e&&(k.bc(0,"mat-option",13),k.Pc(1),k.ac()),2&e){var t=a.$implicit;k.tc("value",t.id),k.Gb(1),k.Rc(" ",t.name," ")}}var D,j=((D=function(){function e(a,t,n){_classCallCheck(this,e),this.data=a,this.dialogRef=t,this.fb=n}return _createClass(e,[{key:"ngOnInit",value:function(){this.paymentmethods=this.data.paymentmethods,this.selectedagent=this.data.selectedagent,this.itemForm=this.fb.group({amount:["",o.s.required],payment_method_id:["",o.s.required],agent_id:this.selectedagent.id})}},{key:"submit",value:function(){this.dialogRef.close(this.itemForm.value)}}]),e}()).\u0275fac=function(e){return new(e||D)(k.Vb(I.a),k.Vb(I.f),k.Vb(o.d))},D.\u0275cmp=k.Pb({type:D,selectors:[["app-makepayment-popup"]],decls:23,vars:4,consts:[["matDialogTitle",""],[3,"formGroup","ngSubmit"],["fxLayout","row wrap","fxLayout.lt-sm","column"],["fxFlex","100",1,"pr-1"],[1,"full-width"],["matInput","","name","amount","placeholder","Amount",3,"formControl"],["formControlName","payment_method_id","required",""],[3,"value",4,"ngFor","ngForOf"],["matSuffix","",1,"secondary-text"],["fxFlex","100",1,"mt-1"],["mat-raised-button","","color","primary",3,"disabled"],["fxFlex",""],["mat-button","","color","warn","type","button",3,"click"],[3,"value"]],template:function(e,a){1&e&&(k.bc(0,"h1",0),k.Pc(1,"Add A New Item"),k.ac(),k.bc(2,"form",1),k.jc("ngSubmit",(function(e){return a.submit()})),k.bc(3,"div",2),k.bc(4,"div",3),k.bc(5,"mat-form-field",4),k.Wb(6,"input",5),k.ac(),k.ac(),k.bc(7,"div",3),k.bc(8,"mat-form-field",4),k.bc(9,"mat-label"),k.Pc(10,"Payment Was Made Through"),k.ac(),k.bc(11,"mat-select",6),k.Nc(12,W,2,2,"mat-option",7),k.ac(),k.bc(13,"mat-icon",8),k.Pc(14,"outlined_flag"),k.ac(),k.bc(15,"mat-error"),k.Pc(16,"payment type is required!"),k.ac(),k.ac(),k.ac(),k.bc(17,"div",9),k.bc(18,"button",10),k.Pc(19,"Save"),k.ac(),k.Wb(20,"span",11),k.bc(21,"button",12),k.jc("click",(function(e){return a.dialogRef.close(!1)})),k.Pc(22,"Cancel"),k.ac(),k.ac(),k.ac(),k.ac()),2&e&&(k.Gb(2),k.tc("formGroup",a.itemForm),k.Gb(4),k.tc("formControl",a.itemForm.controls.amount),k.Gb(6),k.tc("ngForOf",a.paymentmethods),k.Gb(6),k.tc("disabled",a.itemForm.invalid))},directives:[I.g,o.t,o.n,o.h,E.c,E.a,R.b,S.b,o.b,o.m,o.f,R.e,V.a,o.g,o.r,i.l,_.a,R.f,R.a,A.b,H.p],styles:[""]}),D),q=t("Wp6s");function z(e,a){if(1&e&&(k.bc(0,"p"),k.Pc(1),k.ac()),2&e){var t=k.nc();k.Gb(1),k.Qc(t.selectedagent.name)}}function U(e,a){if(1&e&&k.Pc(0),2&e){var t=a.row;k.Rc(" ",null==t?null:t.amount," ")}}function B(e,a){if(1&e&&k.Pc(0),2&e){var t=a.row;k.Rc(" ",null==t?null:t.amount," ")}}var K,Y=function(){return{y:"50px",delay:"300ms"}},J=function(e){return{value:"*",params:e}},X=((K=function(){function e(a,t,n,c,i,r,o){_classCallCheck(this,e),this.agent=a,this.dialog=t,this.snack=n,this.crudService=c,this.confirmService=i,this.loader=r,this.toastr=o}return _createClass(e,[{key:"ngOnInit",value:function(){this.selectedagent=this.agent.selectedagent,this.paymentmethods=this.agent.paymentmethods,this.payments=this.agent.payments}},{key:"openMakePayment",value:function(){var e=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;this.dialog.open(j,{width:"720px",disableClose:!0,data:{paymentmethods:this.paymentmethods,selectedagent:this.selectedagent}}).afterClosed().subscribe((function(n){n&&(e.loader.open(),t?e.crudService.addPayments(n).subscribe((function(a){e.loader.close(),e.payments=e.payments.concat([a]),e.snack.open("New Payment Made","OK",{duration:4e3})}),(function(a){e.loader.close(),e.toastr.error("sorry",a.error)})):e.crudService.updateItem(a._id,n).subscribe((function(a){e.payments=a,e.loader.close(),e.snack.open("Member Updated!","OK",{duration:4e3})})))}))}}]),e}()).\u0275fac=function(e){return new(e||K)(k.Vb(P),k.Vb(I.b),k.Vb(G.a),k.Vb(y.a),k.Vb(x.a),k.Vb(w.a),k.Vb(N.b))},K.\u0275cmp=k.Pb({type:K,selectors:[["app-agent-summary"]],decls:14,vars:14,consts:[[4,"ngIf"],[1,"m-333"],["mat-raised-button","","color","primary","routerLink","/invoice/newsale",1,"mb-05"],["fxFlex","8px"],["mat-raised-button","","color","accent",1,"mb-05",3,"click"],[1,"p-0"],[1,"material","ml-0","mr-0",3,"rows","columnMode","headerHeight","footerHeight","scrollbarH","limit","rowHeight"],["name","amount",3,"flexGrow"],["ngx-datatable-cell-template",""]],template:function(e,a){1&e&&(k.Nc(0,z,2,1,"p",0),k.bc(1,"div",1),k.bc(2,"button",2),k.Pc(3,"New Sale"),k.ac(),k.Wb(4,"span",3),k.bc(5,"button",4),k.jc("click",(function(e){return a.openMakePayment({},!0)})),k.Pc(6,"New Payment"),k.ac(),k.ac(),k.bc(7,"mat-card",5),k.bc(8,"mat-card-content",5),k.bc(9,"ngx-datatable",6),k.bc(10,"ngx-datatable-column",7),k.Nc(11,U,1,1,"ng-template",8),k.ac(),k.bc(12,"ngx-datatable-column",7),k.Nc(13,B,1,1,"ng-template",8),k.ac(),k.ac(),k.ac(),k.ac()),2&e&&(k.tc("ngIf",a.selectedagent),k.Gb(7),k.tc("@animate",k.yc(12,J,k.xc(11,Y))),k.Gb(2),k.tc("rows",a.payments)("columnMode","force")("headerHeight",50)("footerHeight",50)("scrollbarH",!0)("limit",10)("rowHeight",50),k.Gb(1),k.tc("flexGrow",1),k.Gb(2),k.tc("flexGrow",1))},directives:[i.m,A.b,r.h,E.a,q.a,q.b,s.c,s.b,s.a],styles:[""],data:{animation:v.a}}),K),$=t("f0Cb");function Q(e,a){if(1&e&&(k.bc(0,"mat-option",24),k.Pc(1),k.ac()),2&e){var t=a.$implicit;k.tc("value",t),k.Gb(1),k.Rc(" ",t," ")}}function Z(e,a){1&e&&(k.bc(0,"mat-error"),k.Pc(1,"You must select a publisher"),k.ac())}function ee(e,a){if(1&e&&(k.bc(0,"div"),k.Nc(1,Z,2,0,"mat-error",11),k.ac()),2&e){var t=k.nc();k.Gb(1),k.tc("ngIf",t.f.numberOfTickets.errors.required)}}function ae(e,a){if(1&e&&(k.bc(0,"mat-option",36),k.Pc(1),k.ac()),2&e){var t=a.$implicit;k.tc("disabled",0==t.status)("value",t),k.Gb(1),k.Uc(" ",t.name," - ",t.class," - GHC ",t.price," - Edition ",t.edition," ")}}function te(e,a){1&e&&(k.bc(0,"mat-error"),k.Pc(1,"You must select an Item"),k.ac())}function ne(e,a){if(1&e&&(k.bc(0,"div"),k.Nc(1,te,2,0,"mat-error",11),k.ac()),2&e){var t=k.nc().$implicit;k.Gb(1),k.tc("ngIf",t.controls.item.errors.required)}}function ce(e,a){1&e&&(k.bc(0,"small",38),k.Pc(1,"Quantity must have a value"),k.ac())}function ie(e,a){if(1&e&&(k.bc(0,"div"),k.Nc(1,ce,2,0,"small",37),k.ac()),2&e){var t=k.nc().$implicit;k.Gb(1),k.tc("ngIf",t.controls.quantity.errors.required)}}function re(e,a){if(1&e){var t=k.cc();k.bc(0,"div"),k.bc(1,"h5",25),k.Pc(2),k.ac(),k.bc(3,"form",26),k.bc(4,"div",5),k.bc(5,"div",27),k.bc(6,"div",28),k.bc(7,"mat-label"),k.Pc(8,"Select and Item:"),k.ac(),k.bc(9,"mat-select",29),k.Nc(10,ae,2,6,"mat-option",30),k.ac(),k.Nc(11,ne,2,1,"div",11),k.ac(),k.ac(),k.bc(12,"div",31),k.bc(13,"div",28),k.bc(14,"mat-form-field",32),k.Wb(15,"input",33),k.ac(),k.Nc(16,ie,2,1,"div",11),k.ac(),k.ac(),k.Wb(17,"span",17),k.bc(18,"div",34),k.bc(19,"button",35),k.jc("click",(function(e){k.Gc(t);var n=a.index;return k.nc().removeitem(n)})),k.Pc(20,"Remove"),k.ac(),k.ac(),k.ac(),k.ac(),k.ac()}if(2&e){var n=a.$implicit,c=a.index,i=k.nc();k.Gb(2),k.Rc("Item ",c+1,""),k.Gb(1),k.tc("formGroup",n),k.Gb(7),k.tc("ngForOf",i.pitems),k.Gb(1),k.tc("ngIf",i.submitted&&n.controls.item.errors),k.Gb(5),k.tc("ngIf",i.submitted&&n.controls.quantity.errors)}}function oe(e,a){if(1&e){var t=k.cc();k.bc(0,"button",39),k.jc("click",(function(e){return k.Gc(t),k.nc().calculateSale()})),k.Pc(1,"Make Sale"),k.ac()}}function le(e,a){if(1&e&&(k.bc(0,"div",40),k.bc(1,"div",41),k.Pc(2,"Total: "),k.bc(3,"b"),k.Pc(4),k.ac(),k.ac(),k.Wb(5,"span",42),k.bc(6,"div",41),k.Pc(7,"Sale After Discount: "),k.bc(8,"b"),k.Pc(9),k.ac(),k.ac(),k.Wb(10,"span",43),k.ac()),2&e){var t=k.nc();k.Gb(4),k.Rc("GHC ",t.totalsale,""),k.Gb(5),k.Rc("GHC ",t.afterdiscount,"")}}var se,me=((se=function(){function e(a,t,n,c,i,r,o){_classCallCheck(this,e),this.agent=a,this.crudService=t,this.fb=n,this.loader=c,this.toastr=i,this.data=r,this.router=o,this.submitted=!1}return _createClass(e,[{key:"ngOnInit",value:function(){this.selectedagent=this.agent.selectedagent,this.dynamicForm=this.fb.group({numberOfTickets:["",o.s.required],agent:this.selectedagent,discount:["",o.s.required],tickets:new o.c([])}),this.pitems=this.items=this.data.items,this.length=Array(this.items.length).fill(1).map((function(e,a){return a+1}))}},{key:"onChangeTickets",value:function(e){var a=e.value||0;if(this.t.length<a)for(var t=this.t.length;t<a;t++)this.t.push(this.fb.group({item:["",o.s.required],quantity:["",[o.s.required]]}));else for(var n=this.t.length;n>=a;n--)this.t.removeAt(n)}},{key:"highlight",value:function(e){console.log(e)}},{key:"itemchange",value:function(e){e.value.status=0,this.pitems=this.pitems.filter((function(a){return a.id!==e.value.id})),this.pitems=this.pitems.concat([e.value])}},{key:"removeitem",value:function(e){this.t.removeAt(e)}},{key:"onSubmit",value:function(){if(this.submitted=!0,!this.dynamicForm.invalid){var e=this.dynamicForm.value.tickets,a=this.dynamicForm.value.discount;this.totalsale=0;for(var t=0,n=e.length;t<n;t++)this.totalsale=this.totalsale+e[t].item.price*e[t].quantity;for(this.afterdiscount=this.totalsale*(1-a/100),t=1,n=this.dynamicForm.value.tickets.length;t<n;t++);}}},{key:"onReset",value:function(){this.submitted=!1,this.dynamicForm.reset(),this.t.clear()}},{key:"onClear",value:function(){this.submitted=!1,this.t.reset()}},{key:"calculateSale",value:function(){var e=this;this.loader.open(),this.crudService.calculateSale(this.dynamicForm.value).subscribe((function(a){e.loader.close(),e.data.newsaledata=e.dynamicForm.value,e.router.navigate(["/invoice/preinvoice"]),e.toastr.success("succes",a)}),(function(a){e.loader.close(),e.toastr.error("error",a.error)}))}},{key:"f",get:function(){return this.dynamicForm.controls}},{key:"t",get:function(){return this.f.tickets}}]),e}()).\u0275fac=function(e){return new(e||se)(k.Vb(P),k.Vb(y.a),k.Vb(o.d),k.Vb(w.a),k.Vb(N.b),k.Vb(T.a),k.Vb(r.g))},se.\u0275cmp=k.Pb({type:se,selectors:[["app-new-sale"]],decls:35,vars:6,consts:[[1,"p-0"],[1,""],[1,"card-title-text"],[3,"formGroup","ngSubmit"],[1,"card","m-3"],["fxLayout","row wrap"],["fxFlex","100","fxFlex.gt-xs","30",1,"pr-1"],[1,"pt-1","pb-1"],["formControlName","numberOfTickets","required","",3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],["matSuffix","",1,"secondary-text"],[4,"ngIf"],["fxFlex","100","fxFlex.gt-xs","30"],["matInput","","placeholder","Discount","formControlName","discount","required",""],[4,"ngFor","ngForOf"],[1,"card-footer","text-center"],["mat-raised-button","","color","primary",1,"mb-05"],["fxFlex","8px"],["mat-raised-button","","color","warn","type","reset",1,"mb-05",3,"click"],["mat-raised-button","","color","warn",1,"mb-05",3,"click"],["fxFlex","50px"],["mat-raised-button","","class","mb-05","color","accent",3,"click",4,"ngIf"],["fxFlex","200px"],["class","profile-title text-center mb-1",4,"ngIf"],[3,"value"],["colour","accent",1,"card-title"],[3,"formGroup"],["fxFlex","100","fxFlex.gt-xs","40",1,"pr-1"],[1,"pb-1"],["formControlName","item","required",""],[3,"disabled","value",4,"ngFor","ngForOf"],["fxFlex","100","fxFlex.gt-xs","40"],[1,"full-width"],["matInput","","name","quantity","formControlName","quantity","placeholder","Quantity (Min Length: 4, Max Length: 9)","value",""],["fxFlex","100","fxFlex.gt-xs","10"],["mat-raised-button","","color","primary",1,"mb-05",3,"click"],[3,"disabled","value"],["class","form-error-msg",4,"ngIf"],[1,"form-error-msg"],["mat-raised-button","","color","accent",1,"mb-05",3,"click"],[1,"profile-title","text-center","mb-1"],[1,"main-title"],["fxFlex","100px"],["fxFlex","20px"]],template:function(e,a){1&e&&(k.bc(0,"mat-card",0),k.bc(1,"mat-card-title",1),k.bc(2,"div",2),k.Pc(3,"Selling Form"),k.ac(),k.Wb(4,"mat-divider"),k.ac(),k.bc(5,"mat-card-content"),k.bc(6,"form",3),k.jc("ngSubmit",(function(e){return a.onSubmit()})),k.bc(7,"div",4),k.bc(8,"div",5),k.bc(9,"div",6),k.bc(10,"mat-form-field",7),k.bc(11,"mat-label"),k.Pc(12,"Number of Items:"),k.ac(),k.bc(13,"mat-select",8),k.jc("selectionChange",(function(e){return a.onChangeTickets(e)})),k.Nc(14,Q,2,2,"mat-option",9),k.ac(),k.bc(15,"mat-icon",10),k.Pc(16,"outlined_flag"),k.ac(),k.Nc(17,ee,2,1,"div",11),k.ac(),k.ac(),k.bc(18,"div",12),k.bc(19,"mat-form-field",7),k.Wb(20,"input",13),k.ac(),k.ac(),k.ac(),k.Nc(21,re,21,5,"div",14),k.bc(22,"div",15),k.bc(23,"button",16),k.Pc(24,"Calculate Sale"),k.ac(),k.Wb(25,"span",17),k.bc(26,"button",18),k.jc("click",(function(e){return a.onReset()})),k.Pc(27,"Reset"),k.ac(),k.Wb(28,"span",17),k.bc(29,"button",19),k.jc("click",(function(e){return a.onClear()})),k.Pc(30,"Clear"),k.ac(),k.Wb(31,"span",20),k.Nc(32,oe,2,0,"button",21),k.Wb(33,"span",22),k.Nc(34,le,11,2,"div",23),k.ac(),k.ac(),k.ac(),k.ac(),k.ac()),2&e&&(k.Gb(6),k.tc("formGroup",a.dynamicForm),k.Gb(8),k.tc("ngForOf",a.length),k.Gb(3),k.tc("ngIf",a.submitted&&a.f.numberOfTickets.errors),k.Gb(4),k.tc("ngForOf",a.t.controls),k.Gb(11),k.tc("ngIf",a.afterdiscount),k.Gb(2),k.tc("ngIf",a.afterdiscount))},directives:[q.a,q.d,$.a,q.b,o.t,o.n,o.h,E.c,E.a,R.b,R.e,V.a,o.m,o.g,o.r,i.l,_.a,R.f,i.m,S.b,o.b,A.b,H.p,R.a],styles:[""]}),se);function de(e,a){if(1&e&&(k.bc(0,"h1"),k.Pc(1),k.ac()),2&e){var t=k.nc();k.Gb(1),k.Rc("Invoice Number: ",t.invoicenumber,"")}}function ue(e,a){1&e&&k.Pc(0),2&e&&k.Rc(" ",a.rowIndex+1," ")}function be(e,a){if(1&e&&k.Pc(0),2&e){var t=a.row;k.Sc(" ",null==t?null:t.item.name," - ",null==t?null:t.item.class," ")}}function ge(e,a){if(1&e&&k.Pc(0),2&e){var t=a.row;k.Rc(" ",null==t?null:t.quantity," ")}}function fe(e,a){if(1&e&&k.Pc(0),2&e){var t=a.row;k.Rc(" ",null==t?null:t.item.price," ")}}function he(e,a){if(1&e&&k.Pc(0),2&e){var t=a.row;k.Rc(" ",(null==t?null:t.item.price)*(null==t?null:t.quantity)," ")}}function pe(e,a){if(1&e){var t=k.cc();k.bc(0,"button",24),k.jc("click",(function(e){return k.Gc(t),k.nc().createSale()})),k.Pc(1,"Agree On Sale"),k.ac()}}function ye(e,a){if(1&e){var t=k.cc();k.bc(0,"button",24),k.jc("click",(function(e){return k.Gc(t),k.nc().agentCreateSale()})),k.Pc(1,"Agree On Sale"),k.ac()}}function ve(e,a){if(1&e){var t=k.cc();k.bc(0,"button",25),k.jc("click",(function(e){return k.Gc(t),k.nc().print()})),k.Pc(1,"Print Invoice"),k.ac()}}function xe(e,a){1&e&&(k.bc(0,"button",26),k.Pc(1,"Discard Sale"),k.ac())}function we(e,a){1&e&&(k.bc(0,"button",27),k.Pc(1,"Make New Sale"),k.ac())}function ke(e,a){1&e&&(k.bc(0,"button",28),k.Pc(1,"Discard Sale Return to Agents"),k.ac())}function Ce(e,a){1&e&&(k.bc(0,"button",29),k.Pc(1,"Discard Sale Return to Retailers"),k.ac())}function Te(e,a){1&e&&(k.bc(0,"button",28),k.Pc(1,"Return to Agents"),k.ac())}function Pe(e,a){1&e&&(k.bc(0,"button",29),k.Pc(1,"Return to Retailers"),k.ac())}var Ie,Ge,Ne,Re,Se=function(){return{y:"50px",delay:"300ms"}},Ae=function(e){return{value:"*",params:e}},Oe=((Re=function(){function e(a,t,n,c,i){_classCallCheck(this,e),this.loader=a,this.crudService=t,this.toastr=n,this.agent=c,this.data=i,this.count=0,this.agreed=!1,this.currentDate=new Date}return _createClass(e,[{key:"ngOnInit",value:function(){this.items=this.data.newsaledata,this.getAll(),this.role=this.data.role}},{key:"getAll",value:function(){this.sold=this.items.tickets;var e=this.items.discount;this.totalsale=0;for(var a=0,t=this.sold.length;a<t;a++)this.totalsale=this.totalsale+this.sold[a].item.price*this.sold[a].quantity;this.afterdiscount=this.totalsale*(1-e/100)}},{key:"createSale",value:function(){var e=this;this.loader.open(),this.crudService.createSale(this.items).subscribe((function(a){e.loader.close(),e.invoicenumber=a.invoicenumber,e.agreed=!0,e.toastr.success("succes","Invoice Created")}),(function(a){e.loader.close(),e.toastr.error("error",a.error)}))}},{key:"agentCreateSale",value:function(){var e=this;this.loader.open(),this.crudService.agentCreateSale(this.items).subscribe((function(a){e.loader.close(),e.invoicenumber=a.invoicenumber,e.agreed=!0,e.toastr.success("succes","Invoice Created")}),(function(a){e.loader.close(),e.toastr.error("error",a.error)}))}},{key:"print",value:function(){var e,a;e=document.getElementById("print-section").innerHTML,(a=window.open("","_blank","top=0,left=0,height=100%,width=auto")).document.open(),a.document.write('\n      <html>\n        <head>\n          <title>Print tab</title>\n          <style>\n          //........Customized style.......\n          </style>\n        </head>\n    <body onload="window.print();window.close()">'.concat(e,"</body>\n      </html>")),a.document.close()}}]),e}()).\u0275fac=function(e){return new(e||Re)(k.Vb(w.a),k.Vb(y.a),k.Vb(N.b),k.Vb(P),k.Vb(T.a))},Re.\u0275cmp=k.Pb({type:Re,selectors:[["app-pre-invoice"]],decls:46,vars:34,consts:[["id","print-section"],[1,"invoicehead"],["src","assets/images/head.jpg","height","200px"],[1,"invoicedetails"],[1,"invoiceuser"],[4,"ngIf"],[1,"amount"],[1,"viewtable"],[1,"p-0"],[1,"material","ml-0","mr-0",3,"rows","columnMode","headerHeight","footerHeight","scrollbarH","limit","rowHeight"],["name","SN",3,"flexGrow"],["ngx-datatable-cell-template",""],["name","Name",3,"flexGrow"],["name","Quantity",3,"flexGrow"],["name","Unit Price",3,"flexGrow"],["name","Total",3,"flexGrow"],[1,"downbuttons"],["mat-raised-button","","class","mb-05","color","accent",3,"click",4,"ngIf"],["mat-raised-button","","class","mb-05","color","primary",3,"click",4,"ngIf"],["fxFlex","8px"],["mat-raised-button","","class","mb-05","color","warn","routerLink","/invoice/newsale",4,"ngIf"],["mat-raised-button","","class","mb-05","color","primary","routerLink","/invoice/agentnewsale",4,"ngIf"],["mat-raised-button","","class","mb-05","color","accent","routerLink","/invoice/home",4,"ngIf"],["mat-raised-button","","class","mb-05","color","accent","routerLink","/invoice/retail",4,"ngIf"],["mat-raised-button","","color","accent",1,"mb-05",3,"click"],["mat-raised-button","","color","primary",1,"mb-05",3,"click"],["mat-raised-button","","color","warn","routerLink","/invoice/newsale",1,"mb-05"],["mat-raised-button","","color","primary","routerLink","/invoice/agentnewsale",1,"mb-05"],["mat-raised-button","","color","accent","routerLink","/invoice/home",1,"mb-05"],["mat-raised-button","","color","accent","routerLink","/invoice/retail",1,"mb-05"]],template:function(e,a){1&e&&(k.bc(0,"div",0),k.bc(1,"div",1),k.Wb(2,"img",2),k.ac(),k.bc(3,"div",3),k.bc(4,"div",4),k.Nc(5,de,2,1,"h1",5),k.bc(6,"h1"),k.Pc(7),k.oc(8,"date"),k.ac(),k.bc(9,"h1",6),k.Pc(10),k.ac(),k.ac(),k.ac(),k.bc(11,"div",7),k.bc(12,"mat-card",8),k.bc(13,"mat-card-content",8),k.bc(14,"ngx-datatable",9),k.bc(15,"ngx-datatable-column",10),k.Nc(16,ue,1,1,"ng-template",11),k.ac(),k.bc(17,"ngx-datatable-column",12),k.Nc(18,be,1,2,"ng-template",11),k.ac(),k.bc(19,"ngx-datatable-column",13),k.Nc(20,ge,1,1,"ng-template",11),k.ac(),k.bc(21,"ngx-datatable-column",14),k.Nc(22,fe,1,1,"ng-template",11),k.ac(),k.bc(23,"ngx-datatable-column",15),k.Nc(24,he,1,1,"ng-template",11),k.ac(),k.ac(),k.ac(),k.ac(),k.ac(),k.bc(25,"div",3),k.bc(26,"div",4),k.bc(27,"h1"),k.Pc(28),k.ac(),k.bc(29,"h1"),k.Pc(30),k.ac(),k.bc(31,"h1",6),k.Pc(32),k.ac(),k.ac(),k.ac(),k.ac(),k.bc(33,"div",16),k.Nc(34,pe,2,0,"button",17),k.Nc(35,ye,2,0,"button",17),k.Nc(36,ve,2,0,"button",18),k.Wb(37,"span",19),k.Nc(38,xe,2,0,"button",20),k.Nc(39,we,2,0,"button",21),k.Wb(40,"span",19),k.Nc(41,ke,2,0,"button",22),k.Nc(42,Ce,2,0,"button",23),k.Wb(43,"span",19),k.Nc(44,Te,2,0,"button",22),k.Nc(45,Pe,2,0,"button",23),k.ac()),2&e&&(k.Gb(5),k.tc("ngIf",a.invoicenumber),k.Gb(2),k.Rc("Invoice Date: ",k.qc(8,28,a.currentDate,"dd MMM yyyy"),""),k.Gb(3),k.Rc("Amount Due: GHC ",a.afterdiscount,""),k.Gb(2),k.tc("@animate",k.yc(32,Ae,k.xc(31,Se))),k.Gb(2),k.tc("rows",a.sold)("columnMode","force")("headerHeight",50)("footerHeight",50)("scrollbarH",!1)("limit",10)("rowHeight",50),k.Gb(1),k.tc("flexGrow",1),k.Gb(2),k.tc("flexGrow",1),k.Gb(2),k.tc("flexGrow",1),k.Gb(2),k.tc("flexGrow",1),k.Gb(2),k.tc("flexGrow",1),k.Gb(5),k.Rc("Total: ",a.totalsale,""),k.Gb(2),k.Rc("Discount: ",a.items.discount,"%"),k.Gb(2),k.Rc("Amount Due: GHC",a.afterdiscount,""),k.Gb(2),k.tc("ngIf",!a.agreed&&a.role.publisher),k.Gb(1),k.tc("ngIf",!a.agreed&&a.role.agent),k.Gb(1),k.tc("ngIf",a.agreed),k.Gb(2),k.tc("ngIf",a.role.publisher),k.Gb(1),k.tc("ngIf",a.role.agent),k.Gb(2),k.tc("ngIf",!a.agreed&&a.role.publisher),k.Gb(1),k.tc("ngIf",!a.agreed&&a.role.agent),k.Gb(2),k.tc("ngIf",a.agreed&&a.role.publisher),k.Gb(1),k.tc("ngIf",a.agreed&&a.role.agent))},directives:[i.m,q.a,q.b,s.c,s.b,s.a,E.a,A.b,r.h],pipes:[i.e],styles:[".invoicehead[_ngcontent-%COMP%]{margin-bottom:2px}.invoicedetails[_ngcontent-%COMP%]{flex-direction:row-reverse}.downbuttons[_ngcontent-%COMP%], .invoicedetails[_ngcontent-%COMP%]{display:flex;max-width:1200px;margin:0 auto;padding:20px}.invoiceuser[_ngcontent-%COMP%]{display:flex;width:30%;flex-direction:column}h1[_ngcontent-%COMP%]{font-size:20px}.viewtable[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:20px}@media print-section{[_ngcontent-%COMP%]:not(.print){display:none!important}}"],data:{animation:v.a}}),Re),Fe=((Ne=function(){function e(a,t){_classCallCheck(this,e),this.data=a,this.crudeService=t}return _createClass(e,[{key:"resolve",value:function(e,a){var t=this;return new Promise((function(e,a){Promise.all([t.getItems()]).then((function(){e()}),a)}))}},{key:"getItems",value:function(){var e=this;return new Promise((function(a,t){e.data.items?(e.items=e.data.items,a(e.items)):e.crudeService.getItems().subscribe((function(t){e.items=t.data,e.data.items=t.data,a(e.items)}),t)}))}}]),e}()).\u0275fac=function(e){return new(e||Ne)(k.fc(T.a),k.fc(y.a))},Ne.\u0275prov=k.Rb({token:Ne,factory:Ne.\u0275fac,providedIn:"root"}),Ne),Me=((Ge=function(){function e(a,t,n){_classCallCheck(this,e),this.router=a,this.crudeService=t,this.data=n}return _createClass(e,[{key:"resolve",value:function(e,a){var t=this;return new Promise((function(e,a){Promise.all([t.getRetailers()]).then((function(){e()}),a)}))}},{key:"getRetailers",value:function(){var e=this;return new Promise((function(a,t){e.data.retailers?(e.retailers=e.data.retailers,a(e.retailers)):e.crudeService.getRetailer().subscribe((function(t){e.retailers=t.data,e.data.retailers=t.data,a(e.retailers)}),t)}))}}]),e}()).\u0275fac=function(e){return new(e||Ge)(k.fc(r.g),k.fc(y.a),k.fc(T.a))},Ge.\u0275prov=k.Rb({token:Ge,factory:Ge.\u0275fac,providedIn:"root"}),Ge),Le=((Ie=function(){function e(a,t,n){_classCallCheck(this,e),this.router=a,this.crudeService=t,this.data=n,this.selectedretailer=this.data.selectedretailer}return _createClass(e,[{key:"resolve",value:function(e,a){var t=this;return new Promise((function(e,a){Promise.all([t.getPaymentMethods(),t.getRetailerDetails()]).then((function(){e()}),a)}))}},{key:"getPaymentMethods",value:function(){var e=this;return new Promise((function(a,t){e.data.paymentmethods?(e.paymentmethods=e.data.paymentmethods,a(e.paymentmethods)):e.crudeService.getPaymentMethod().subscribe((function(t){e.paymentmethods=t.data,e.data.paymentmethods=t.data,a(e.paymentmethods)}),t)}))}},{key:"getRetailerDetails",value:function(){var e=this;return new Promise((function(a,t){e.crudeService.getRetailerDetails(e.selectedretailer).subscribe((function(t){e.retailerdetails=t,a(e.retailerdetails)}),t)}))}}]),e}()).\u0275fac=function(e){return new(e||Ie)(k.fc(r.g),k.fc(y.a),k.fc(T.a))},Ie.\u0275prov=k.Rb({token:Ie,factory:Ie.\u0275fac,providedIn:"root"}),Ie);function Ee(e,a){if(1&e&&(k.bc(0,"mat-option",13),k.Pc(1),k.ac()),2&e){var t=a.$implicit;k.tc("value",t.id),k.Gb(1),k.Rc(" ",t.name," ")}}var Ve,_e=((Ve=function(){function e(a,t,n){_classCallCheck(this,e),this.data=a,this.dialogRef=t,this.fb=n}return _createClass(e,[{key:"ngOnInit",value:function(){this.paymentmethods=this.data.paymentmethods,this.selectedretail=this.data.selectedretail,this.itemForm=this.fb.group({amount:["",o.s.required],payment_method_id:["",o.s.required],retail_id:this.selectedretail.id})}},{key:"submit",value:function(){this.dialogRef.close(this.itemForm.value)}}]),e}()).\u0275fac=function(e){return new(e||Ve)(k.Vb(I.a),k.Vb(I.f),k.Vb(o.d))},Ve.\u0275cmp=k.Pb({type:Ve,selectors:[["app-make-retail-payment-popup"]],decls:23,vars:4,consts:[["matDialogTitle",""],[3,"formGroup","ngSubmit"],["fxLayout","row wrap","fxLayout.lt-sm","column"],["fxFlex","100",1,"pr-1"],[1,"full-width"],["matInput","","name","amount","placeholder","Amount",3,"formControl"],["formControlName","payment_method_id","required",""],[3,"value",4,"ngFor","ngForOf"],["matSuffix","",1,"secondary-text"],["fxFlex","100",1,"mt-1"],["mat-raised-button","","color","primary",3,"disabled"],["fxFlex",""],["mat-button","","color","warn","type","button",3,"click"],[3,"value"]],template:function(e,a){1&e&&(k.bc(0,"h1",0),k.Pc(1,"Add A New Item"),k.ac(),k.bc(2,"form",1),k.jc("ngSubmit",(function(e){return a.submit()})),k.bc(3,"div",2),k.bc(4,"div",3),k.bc(5,"mat-form-field",4),k.Wb(6,"input",5),k.ac(),k.ac(),k.bc(7,"div",3),k.bc(8,"mat-form-field",4),k.bc(9,"mat-label"),k.Pc(10,"Payment Was Made Through"),k.ac(),k.bc(11,"mat-select",6),k.Nc(12,Ee,2,2,"mat-option",7),k.ac(),k.bc(13,"mat-icon",8),k.Pc(14,"outlined_flag"),k.ac(),k.bc(15,"mat-error"),k.Pc(16,"payment type is required!"),k.ac(),k.ac(),k.ac(),k.bc(17,"div",9),k.bc(18,"button",10),k.Pc(19,"Save"),k.ac(),k.Wb(20,"span",11),k.bc(21,"button",12),k.jc("click",(function(e){return a.dialogRef.close(!1)})),k.Pc(22,"Cancel"),k.ac(),k.ac(),k.ac(),k.ac()),2&e&&(k.Gb(2),k.tc("formGroup",a.itemForm),k.Gb(4),k.tc("formControl",a.itemForm.controls.amount),k.Gb(6),k.tc("ngForOf",a.paymentmethods),k.Gb(6),k.tc("disabled",a.itemForm.invalid))},directives:[I.g,o.t,o.n,o.h,E.c,E.a,R.b,S.b,o.b,o.m,o.f,R.e,V.a,o.g,o.r,i.l,_.a,R.f,R.a,A.b,H.p],styles:[""]}),Ve);function He(e,a){if(1&e&&(k.bc(0,"div",10),k.bc(1,"mat-card",11),k.Wb(2,"img",21),k.Wb(3,"span",13),k.bc(4,"div"),k.bc(5,"p",14),k.Pc(6,"Last Payment"),k.ac(),k.bc(7,"span",22),k.Pc(8),k.Wb(9,"span",16),k.ac(),k.ac(),k.ac(),k.ac()),2&e){var t=k.nc();k.Gb(8),k.Rc("GHC ",t.lastpayment.amount," ")}}function We(e,a){if(1&e&&(k.bc(0,"div",10),k.bc(1,"mat-card",11),k.Wb(2,"img",23),k.Wb(3,"span",13),k.bc(4,"div"),k.bc(5,"p",14),k.Pc(6,"Last Invoice"),k.ac(),k.bc(7,"span",15),k.Pc(8),k.Wb(9,"span",16),k.ac(),k.ac(),k.ac(),k.ac()),2&e){var t=k.nc();k.Gb(8),k.Rc("GHC ",t.lastinvoice.after_discount," ")}}function De(e,a){if(1&e&&(k.bc(0,"div",35),k.Wb(1,"img",36),k.Pc(2),k.ac()),2&e){var t=a.row;k.Gb(1),k.tc("src",t.icon,k.Ic),k.Gb(1),k.Rc(" ",null==t?null:t.total_sale," ")}}function je(e,a){if(1&e&&k.Pc(0),2&e){var t=a.row;k.Rc(" ",null==t?null:t.discount," ")}}function qe(e,a){if(1&e&&k.Pc(0),2&e){var t=a.row;k.Rc(" ",null==t?null:t.after_discount," ")}}function ze(e,a){if(1&e&&k.Pc(0),2&e){var t=a.row;k.Rc(" ",null==t?null:t.amount_paid," ")}}function Ue(e,a){1&e&&(k.bc(0,"button",38),k.Pc(1,"unpaid"),k.ac())}function Be(e,a){1&e&&(k.bc(0,"button",38),k.Pc(1,"paid"),k.ac())}function Ke(e,a){if(1&e&&(k.Nc(0,Ue,2,0,"button",37),k.Nc(1,Be,2,0,"button",37)),2&e){var t=a.row;k.tc("ngIf","0"==(null==t?null:t.completed)),k.Gb(1),k.tc("ngIf","1"==(null==t?null:t.completed))}}function Ye(e,a){if(1&e&&k.Pc(0),2&e){var t=a.row;k.Rc(" ",null==t?null:t.mode," ")}}function Je(e,a){if(1&e&&k.Pc(0),2&e){var t=a.row;k.Rc(" ",null==t?null:t.amount," ")}}function Xe(e,a){if(1&e&&(k.bc(0,"button",44),k.Pc(1),k.oc(2,"date"),k.ac()),2&e){var t=a.row;k.Gb(1),k.Qc(k.pc(2,1,null==t?null:t.made_on))}}function $e(e,a){if(1&e&&(k.bc(0,"div",39),k.bc(1,"mat-card",25),k.bc(2,"h6",40),k.Pc(3,"Payments"),k.ac(),k.bc(4,"ngx-datatable",27),k.bc(5,"ngx-datatable-column",41),k.Nc(6,Ye,1,1,"ng-template",29),k.ac(),k.bc(7,"ngx-datatable-column",42),k.Nc(8,Je,1,1,"ng-template",29),k.ac(),k.bc(9,"ngx-datatable-column",43),k.Nc(10,Xe,3,3,"ng-template",29),k.ac(),k.ac(),k.ac(),k.ac()),2&e){var t=k.nc(2);k.Gb(4),k.tc("rows",t.retailerdetails.payments)("columnMode","flex")("headerHeight",50)("footerHeight",0)("rowHeight","auto"),k.Gb(1),k.tc("flexGrow",1),k.Gb(2),k.tc("flexGrow",1),k.Gb(2),k.tc("flexGrow",1)}}var Qe=function(){return{delay:"800ms",scale:".9"}},Ze=function(e){return{value:"*",params:e}};function ea(e,a){if(1&e&&(k.bc(0,"div",9),k.bc(1,"div",24),k.bc(2,"mat-card",25),k.bc(3,"h6",26),k.Pc(4,"Invoices"),k.ac(),k.bc(5,"ngx-datatable",27),k.bc(6,"ngx-datatable-column",28),k.Nc(7,De,3,2,"ng-template",29),k.ac(),k.bc(8,"ngx-datatable-column",30),k.Nc(9,je,1,1,"ng-template",29),k.ac(),k.bc(10,"ngx-datatable-column",31),k.Nc(11,qe,1,1,"ng-template",29),k.ac(),k.bc(12,"ngx-datatable-column",32),k.Nc(13,ze,1,1,"ng-template",29),k.ac(),k.bc(14,"ngx-datatable-column",33),k.Nc(15,Ke,2,2,"ng-template",29),k.ac(),k.ac(),k.ac(),k.ac(),k.Nc(16,$e,11,8,"div",34),k.ac()),2&e){var t=k.nc();k.tc("@animate",k.yc(13,Ze,k.xc(12,Qe))),k.Gb(5),k.tc("rows",t.retailerdetails.invoices)("columnMode","flex")("headerHeight",50)("footerHeight",0)("rowHeight","auto"),k.Gb(1),k.tc("flexGrow",1),k.Gb(2),k.tc("flexGrow",1),k.Gb(2),k.tc("flexGrow",1),k.Gb(2),k.tc("flexGrow",1),k.Gb(2),k.tc("flexGrow",1),k.Gb(2),k.tc("ngIf",t.retailerdetails.payments)}}var aa,ta,na=function(){return{delay:"600ms",scale:".9"}},ca=((ta=function(){function e(a,t,n,c,i,r,o,l){_classCallCheck(this,e),this.agent=a,this.dialog=t,this.snack=n,this.crudService=c,this.confirmService=i,this.loader=r,this.toastr=o,this.retail=l}return _createClass(e,[{key:"ngOnInit",value:function(){this.selectedretailer=this.retail.selectedretailer,this.paymentmethods=this.retail.paymentmethods,this.retailerdetails=this.retail.retailerdetails,this.pop=this.retail.retailerdetails,this.lastpayment=this.pop.payments,this.lastinvoice=this.pop.invoices,this.lastinvoice=this.lastinvoice[this.lastinvoice.length-1],this.lastpayment=this.lastpayment[this.lastpayment.length-1]}},{key:"openMakePayment",value:function(){var e=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;this.dialog.open(_e,{width:"720px",disableClose:!0,data:{paymentmethods:this.paymentmethods,selectedretail:this.selectedretailer}}).afterClosed().subscribe((function(n){n&&(e.loader.open(),t?e.crudService.addRetailPayments(n).subscribe((function(a){e.loader.close(),e.payments=e.payments.concat([a]),e.snack.open("New Payment Made","OK",{duration:4e3})}),(function(a){e.loader.close(),e.toastr.error("sorry",a.error)})):e.crudService.updateItem(a._id,n).subscribe((function(a){e.payments=a,e.loader.close(),e.snack.open("Member Updated!","OK",{duration:4e3})})))}))}}]),e}()).\u0275fac=function(e){return new(e||ta)(k.Vb(Me),k.Vb(I.b),k.Vb(G.a),k.Vb(y.a),k.Vb(x.a),k.Vb(w.a),k.Vb(N.b),k.Vb(Le))},ta.\u0275cmp=k.Pb({type:ta,selectors:[["app-retail-summary"]],decls:59,vars:11,consts:[[1,"handle"],["routerLink","/invoice/agentnewsale","mat-raised-button","","color","primary",1,"mb-05"],[1,"second"],["mat-raised-button","","color","accent",1,"mb-05",3,"click"],[1,"third"],["routerLink","/invoice/retail","mat-raised-button","","color","warn",1,"mb-05"],[1,"p-0","mb-1"],[1,"mat-bg-primary"],[1,"card-title-text"],["fxLayout","row wrap"],["fxFlex","100","fxFlex.gt-sm","20","fxFlex.sm","50"],["fxLayout","row wrap","fxLayoutAlign","start center",1,"rounded-circle"],["src","assets/images/cryptocurrencies/BTC.png","alt","",1,"avatar-md","rounded-circle"],[2,"width","20px"],[1,"m-0","text-14","text-muted","line-height-1"],[1,"text-18","font-weight-bold","text-red"],[1,"material-icons","mat-icon-18"],["fxFlex","100","fxFlex.gt-sm","20","fxFlex.sm","50",4,"ngIf"],["src","assets/images/cryptocurrencies/BTS.png","alt","",1,"avatar-md","rounded-circle"],["src","assets/images/cryptocurrencies/CNX.png","alt","",1,"avatar-md","rounded-circle"],["fxLayout","row wrap",4,"ngIf"],["src","assets/images/cryptocurrencies/ETH.png","alt","",1,"avatar-md","rounded-circle"],[1,"text-18","font-weight-bold","text-green"],["src","assets/images/cryptocurrencies/LTC.png","alt","",1,"avatar-md","rounded-circle"],["fxFlex","100","fxFlex.gt-sm","66.67"],[1,"p-0"],[1,"pl-1","pt-1","m-0"],[1,"material","ml-0","mr-0",3,"rows","columnMode","headerHeight","footerHeight","rowHeight"],["name","Total Sale",3,"flexGrow"],["ngx-datatable-cell-template",""],["name","Discount",3,"flexGrow"],["name","Value",3,"flexGrow"],["name","Amount Paid",3,"flexGrow"],["name","Status",3,"flexGrow"],["fxFlex","100","fxFlex.gt-sm","33.33",4,"ngIf"],["fxLayout","row wrap","fxLayoutAlign","start center"],["alt","",1,"avatar-xs","mr-05",3,"src"],["mat-stroked-button","","color","primary",4,"ngIf"],["mat-stroked-button","","color","primary"],["fxFlex","100","fxFlex.gt-sm","33.33"],[1,"ml-1","mt-1"],["name","Made At",3,"flexGrow"],["name","amount",3,"flexGrow"],["name","Date",3,"flexGrow"],["mat-stroked-button","","color","warn"]],template:function(e,a){1&e&&(k.bc(0,"div",0),k.bc(1,"button",1),k.Pc(2," New Sale "),k.bc(3,"mat-icon"),k.Pc(4,"shop"),k.ac(),k.ac(),k.ac(),k.bc(5,"div",2),k.bc(6,"button",3),k.jc("click",(function(e){return a.openMakePayment({},!0)})),k.Pc(7," New Payment "),k.bc(8,"mat-icon"),k.Pc(9,"attach_money"),k.ac(),k.ac(),k.ac(),k.bc(10,"div",4),k.bc(11,"button",5),k.Pc(12," back to Retailers "),k.bc(13,"mat-icon"),k.Pc(14,"arrow_back"),k.ac(),k.ac(),k.ac(),k.bc(15,"mat-card",6),k.bc(16,"mat-card-title",7),k.bc(17,"div",8),k.Pc(18),k.ac(),k.ac(),k.bc(19,"mat-card-content"),k.bc(20,"h3"),k.Pc(21),k.ac(),k.bc(22,"h3"),k.Pc(23),k.ac(),k.ac(),k.ac(),k.bc(24,"div",9),k.bc(25,"div",10),k.bc(26,"mat-card",11),k.Wb(27,"img",12),k.Wb(28,"span",13),k.bc(29,"div"),k.bc(30,"p",14),k.Pc(31,"Current Balance"),k.ac(),k.bc(32,"span",15),k.Pc(33),k.bc(34,"span",16),k.Pc(35,"arrow_drop_down"),k.ac(),k.ac(),k.ac(),k.ac(),k.ac(),k.Nc(36,He,10,1,"div",17),k.Nc(37,We,10,1,"div",17),k.bc(38,"div",10),k.bc(39,"mat-card",11),k.Wb(40,"img",18),k.Wb(41,"span",13),k.bc(42,"div"),k.bc(43,"p",14),k.Pc(44,"Unpaid Invoice"),k.ac(),k.bc(45,"span",15),k.Pc(46,"$10 "),k.Wb(47,"span",16),k.ac(),k.ac(),k.ac(),k.ac(),k.bc(48,"div",10),k.bc(49,"mat-card",11),k.Wb(50,"img",19),k.Wb(51,"span",13),k.bc(52,"div"),k.bc(53,"p",14),k.Pc(54,"Unpaid Invoice"),k.ac(),k.bc(55,"span",15),k.Pc(56,"$80 "),k.Wb(57,"span",16),k.ac(),k.ac(),k.ac(),k.ac(),k.ac(),k.Nc(58,ea,17,15,"div",20)),2&e&&(k.Gb(18),k.Qc(a.selectedretailer.name),k.Gb(3),k.Rc("Location: ",a.selectedretailer.location,""),k.Gb(2),k.Rc("Phone: ",a.selectedretailer.phone,""),k.Gb(1),k.tc("@animate",k.yc(9,Ze,k.xc(8,na))),k.Gb(9),k.Rc("GHC ",a.retailerdetails.ledger.cbalance,""),k.Gb(3),k.tc("ngIf",a.lastpayment),k.Gb(1),k.tc("ngIf",a.lastinvoice),k.Gb(21),k.tc("ngIf",a.retailerdetails.invoices))},directives:[A.b,r.h,_.a,q.a,q.d,q.b,E.c,E.a,E.b,i.m,s.c,s.b,s.a],pipes:[i.e],styles:[".handle[_ngcontent-%COMP%]{bottom:30px}.handle[_ngcontent-%COMP%], .second[_ngcontent-%COMP%]{position:fixed;right:30px;z-index:99}.second[_ngcontent-%COMP%]{bottom:80px}.third[_ngcontent-%COMP%]{position:fixed;bottom:120px;right:30px;z-index:99}"],data:{animation:v.a}}),ta),ia=((aa=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"getDataConf",value:function(){return[{prop:"id"},{prop:"name",name:"Name"}]}},{key:"getAll",value:function(){return[{id:0,age:40,name:"Mclean Brady",gender:"male",company:"JAMNATION",email:"mcleanbrady@jamnation.com",phone:"+1 (875) 472-2061",registered:"2014-10-20T04:54:00 -06:00"},{id:1,age:39,name:"Dillon Ruiz",gender:"male",company:"ACRODANCE",email:"dillonruiz@acrodance.com",phone:"+1 (858) 562-2261",registered:"2016-08-07T12:15:31 -06:00"},{id:2,age:39,name:"Robyn Knox",gender:"female",company:"GLUID",email:"robynknox@gluid.com",phone:"+1 (826) 491-3098",registered:"2017-02-12T02:43:39 -06:00"},{id:3,age:32,name:"Santana Wagner",gender:"male",company:"INTRADISK",email:"santanawagner@intradisk.com",phone:"+1 (841) 550-2276",registered:"2016-03-28T11:22:15 -06:00"},{id:4,age:34,name:"Jennie Branch",gender:"female",company:"VERAQ",email:"jenniebranch@veraq.com",phone:"+1 (895) 483-3982",registered:"2015-03-16T01:30:06 -06:00"},{id:5,age:39,name:"Farrell Preston",gender:"male",company:"HONOTRON",email:"farrellpreston@honotron.com",phone:"+1 (993) 534-2843",registered:"2015-08-14T09:07:47 -06:00"},{id:6,age:38,name:"Garner Reyes",gender:"male",company:"VIOCULAR",email:"garnerreyes@viocular.com",phone:"+1 (973) 495-3873",registered:"2016-03-23T03:47:23 -06:00"},{id:7,age:32,name:"Ella Boone",gender:"female",company:"ARCHITAX",email:"ellaboone@architax.com",phone:"+1 (945) 491-2580",registered:"2015-07-01T09:35:10 -06:00"},{id:8,age:30,name:"Kathryn Owens",gender:"female",company:"CYCLONICA",email:"kathrynowens@cyclonica.com",phone:"+1 (978) 598-2767",registered:"2014-03-11T11:38:12 -06:00"},{id:9,age:22,name:"Byers Santana",gender:"male",company:"KAGGLE",email:"byerssantana@kaggle.com",phone:"+1 (984) 546-3400",registered:"2015-08-17T02:48:09 -06:00"},{id:10,age:30,name:"Nina Middleton",gender:"female",company:"ZINCA",email:"ninamiddleton@zinca.com",phone:"+1 (829) 553-2060",registered:"2014-12-20T09:53:27 -06:00"},{id:11,age:38,name:"Nixon Morrow",gender:"male",company:"CUBIX",email:"nixonmorrow@cubix.com",phone:"+1 (825) 501-3712",registered:"2014-09-10T10:23:34 -06:00"},{id:12,age:28,name:"Bonita Pate",gender:"female",company:"MAGNEATO",email:"bonitapate@magneato.com",phone:"+1 (808) 497-3968",registered:"2016-01-20T02:45:43 -06:00"},{id:13,age:30,name:"Amy Hyde",gender:"female",company:"UNDERTAP",email:"amyhyde@undertap.com",phone:"+1 (867) 555-2669",registered:"2015-04-12T08:39:31 -06:00"},{id:14,age:20,name:"Cortez Camacho",gender:"male",company:"IDEGO",email:"cortezcamacho@idego.com",phone:"+1 (986) 546-3364",registered:"2014-08-21T11:00:20 -06:00"},{id:15,age:29,name:"Castaneda Armstrong",gender:"male",company:"INTERFIND",email:"castanedaarmstrong@interfind.com",phone:"+1 (975) 557-2651",registered:"2014-11-15T10:38:24 -06:00"},{id:16,age:37,name:"Liza West",gender:"female",company:"COWTOWN",email:"lizawest@cowtown.com",phone:"+1 (852) 415-2358",registered:"2017-05-06T09:46:03 -06:00"},{id:17,age:37,name:"Roth Baird",gender:"male",company:"RODEMCO",email:"rothbaird@rodemco.com",phone:"+1 (840) 417-3313",registered:"2015-04-18T10:58:50 -06:00"},{id:18,age:26,name:"Alexis Blackburn",gender:"female",company:"PREMIANT",email:"alexisblackburn@premiant.com",phone:"+1 (957) 576-2362",registered:"2014-08-08T12:59:38 -06:00"},{id:19,age:35,name:"Sadie Tillman",gender:"female",company:"DUOFLEX",email:"sadietillman@duoflex.com",phone:"+1 (843) 499-3330",registered:"2016-02-21T09:25:03 -06:00"},{id:20,age:27,name:"Sharron Conley",gender:"female",company:"QUARMONY",email:"sharronconley@quarmony.com",phone:"+1 (951) 459-2465",registered:"2014-10-19T06:04:36 -06:00"},{id:21,age:27,name:"Jordan Mccoy",gender:"male",company:"ACCUSAGE",email:"jordanmccoy@accusage.com",phone:"+1 (825) 568-3296",registered:"2017-01-27T01:53:02 -06:00"},{id:22,age:35,name:"Rene House",gender:"female",company:"INSURETY",email:"renehouse@insurety.com",phone:"+1 (838) 578-3190",registered:"2015-11-07T10:07:58 -06:00"},{id:23,age:38,name:"Bernice Berry",gender:"female",company:"ROCKYARD",email:"berniceberry@rockyard.com",phone:"+1 (885) 466-2145",registered:"2014-04-17T07:43:02 -06:00"},{id:24,age:30,name:"Bowen Beach",gender:"male",company:"TETRATREX",email:"bowenbeach@tetratrex.com",phone:"+1 (843) 493-3197",registered:"2015-07-27T03:38:33 -06:00"},{id:25,age:31,name:"Monica Leblanc",gender:"female",company:"TALENDULA",email:"monicaleblanc@talendula.com",phone:"+1 (911) 524-2349",registered:"2016-04-10T08:33:17 -06:00"},{id:26,age:36,name:"Lina Rivas",gender:"female",company:"BOINK",email:"linarivas@boink.com",phone:"+1 (983) 572-2470",registered:"2014-08-28T09:44:32 -06:00"},{id:27,age:25,name:"Joyce Yang",gender:"female",company:"SPORTAN",email:"joyceyang@sportan.com",phone:"+1 (807) 491-3917",registered:"2015-07-22T12:58:31 -06:00"},{id:28,age:20,name:"Lana Joseph",gender:"female",company:"BOLAX",email:"lanajoseph@bolax.com",phone:"+1 (942) 467-2363",registered:"2016-10-30T06:13:50 -06:00"},{id:29,age:20,name:"Jimenez Guerrero",gender:"male",company:"INSURON",email:"jimenezguerrero@insuron.com",phone:"+1 (991) 585-3706",registered:"2016-09-15T01:35:16 -06:00"},{id:30,age:35,name:"Williams Bentley",gender:"male",company:"ZEAM",email:"williamsbentley@zeam.com",phone:"+1 (837) 490-2610",registered:"2014-01-06T01:04:11 -06:00"},{id:31,age:27,name:"Doreen Garrett",gender:"female",company:"ENERSAVE",email:"doreengarrett@enersave.com",phone:"+1 (920) 522-2847",registered:"2017-01-25T03:24:47 -06:00"},{id:32,age:34,name:"Shaw Cannon",gender:"male",company:"EBIDCO",email:"shawcannon@ebidco.com",phone:"+1 (903) 530-2676",registered:"2014-04-11T04:49:08 -06:00"},{id:33,age:25,name:"Sonya Skinner",gender:"female",company:"EXOSWITCH",email:"sonyaskinner@exoswitch.com",phone:"+1 (923) 428-3014",registered:"2014-02-09T11:59:54 -06:00"},{id:34,age:27,name:"Todd Potter",gender:"male",company:"MUSIX",email:"toddpotter@musix.com",phone:"+1 (817) 491-2268",registered:"2015-04-06T11:10:47 -06:00"},{id:35,age:21,name:"Celina Rose",gender:"female",company:"TWIIST",email:"celinarose@twiist.com",phone:"+1 (863) 599-2063",registered:"2015-09-04T07:59:29 -06:00"},{id:36,age:40,name:"Ingrid Day",gender:"female",company:"ZBOO",email:"ingridday@zboo.com",phone:"+1 (921) 447-2312",registered:"2016-10-01T08:26:07 -06:00"},{id:37,age:24,name:"Lynch Stark",gender:"male",company:"PYRAMIA",email:"lynchstark@pyramia.com",phone:"+1 (995) 431-2354",registered:"2014-01-26T11:38:48 -06:00"},{id:38,age:29,name:"Helga Mendez",gender:"female",company:"COMVEYER",email:"helgamendez@comveyer.com",phone:"+1 (897) 418-3815",registered:"2015-10-03T08:58:45 -06:00"},{id:39,age:30,name:"Corinne Calhoun",gender:"female",company:"ADORNICA",email:"corinnecalhoun@adornica.com",phone:"+1 (841) 564-3617",registered:"2016-05-24T10:42:36 -06:00"},{id:40,age:40,name:"Winifred Conrad",gender:"female",company:"SATIANCE",email:"winifredconrad@satiance.com",phone:"+1 (885) 533-2416",registered:"2017-03-01T06:12:08 -06:00"},{id:41,age:27,name:"Lawanda Stevenson",gender:"female",company:"ZILLACTIC",email:"lawandastevenson@zillactic.com",phone:"+1 (823) 535-3187",registered:"2014-07-07T05:26:22 -06:00"},{id:42,age:30,name:"Kirsten Long",gender:"female",company:"IMAGEFLOW",email:"kirstenlong@imageflow.com",phone:"+1 (809) 592-2264",registered:"2014-05-08T07:41:56 -06:00"},{id:43,age:39,name:"Summer Farley",gender:"female",company:"ENTOGROK",email:"summerfarley@entogrok.com",phone:"+1 (814) 490-3578",registered:"2016-10-28T10:02:34 -06:00"},{id:44,age:31,name:"Mendoza Randall",gender:"male",company:"COREPAN",email:"mendozarandall@corepan.com",phone:"+1 (846) 501-2860",registered:"2015-12-14T12:58:18 -06:00"},{id:45,age:27,name:"Marcy Doyle",gender:"female",company:"VORATAK",email:"marcydoyle@voratak.com",phone:"+1 (848) 411-2728",registered:"2014-02-12T10:46:27 -06:00"},{id:46,age:30,name:"Burch Walker",gender:"male",company:"COMVEYOR",email:"burchwalker@comveyor.com",phone:"+1 (968) 445-2104",registered:"2014-01-07T05:16:30 -06:00"},{id:47,age:31,name:"Solis Lester",gender:"male",company:"MACRONAUT",email:"solislester@macronaut.com",phone:"+1 (857) 422-3242",registered:"2016-10-20T09:40:51 -06:00"},{id:48,age:20,name:"Lorene Mooney",gender:"female",company:"ORGANICA",email:"lorenemooney@organica.com",phone:"+1 (853) 406-2716",registered:"2015-09-17T03:54:41 -06:00"},{id:49,age:34,name:"Rhodes Vega",gender:"male",company:"CHILLIUM",email:"rhodesvega@chillium.com",phone:"+1 (863) 577-3562",registered:"2016-06-15T05:36:10 -06:00"},{id:50,age:28,name:"Pruitt Merrill",gender:"male",company:"KYAGURU",email:"pruittmerrill@kyaguru.com",phone:"+1 (910) 585-3659",registered:"2017-04-02T09:36:00 -06:00"},{id:51,age:33,name:"Bernadine Hart",gender:"female",company:"BITTOR",email:"bernadinehart@bittor.com",phone:"+1 (906) 446-3518",registered:"2015-11-10T07:45:59 -06:00"},{id:52,age:22,name:"Carver Mckenzie",gender:"male",company:"LOCAZONE",email:"carvermckenzie@locazone.com",phone:"+1 (803) 407-3142",registered:"2015-06-24T07:16:02 -06:00"},{id:53,age:27,name:"Dean Cobb",gender:"male",company:"ASSISTIA",email:"deancobb@assistia.com",phone:"+1 (877) 539-3346",registered:"2016-12-02T01:14:47 -06:00"},{id:54,age:32,name:"Camacho Robinson",gender:"male",company:"INSURITY",email:"camachorobinson@insurity.com",phone:"+1 (929) 430-3079",registered:"2016-12-14T08:59:33 -06:00"},{id:55,age:36,name:"Nancy Rodgers",gender:"female",company:"COSMOSIS",email:"nancyrodgers@cosmosis.com",phone:"+1 (873) 489-2643",registered:"2014-08-21T02:19:28 -06:00"},{id:56,age:27,name:"June Henry",gender:"female",company:"PETIGEMS",email:"junehenry@petigems.com",phone:"+1 (808) 536-2445",registered:"2014-03-28T08:36:27 -06:00"},{id:57,age:26,name:"Rochelle Simmons",gender:"female",company:"DANJA",email:"rochellesimmons@danja.com",phone:"+1 (936) 563-3886",registered:"2015-12-07T08:01:18 -06:00"},{id:58,age:32,name:"Alice Thornton",gender:"female",company:"ISOSURE",email:"alicethornton@isosure.com",phone:"+1 (962) 560-2318",registered:"2015-06-07T08:09:50 -06:00"},{id:59,age:39,name:"Clara Downs",gender:"female",company:"ZANILLA",email:"claradowns@zanilla.com",phone:"+1 (977) 595-2657",registered:"2015-06-14T02:33:33 -06:00"}]}}]),e}()).\u0275fac=function(e){return new(e||aa)},aa.\u0275prov=k.Rb({token:aa,factory:aa.\u0275fac,providedIn:"root"}),aa),ra=t("qsxP");function oa(e,a){if(1&e){var t=k.cc();k.bc(0,"div",6),k.bc(1,"a"),k.bc(2,"ngx-datatable",7),k.jc("activate",(function(e){return k.Gc(t),k.nc().onActivate(e)})),k.ac(),k.ac(),k.ac()}if(2&e){var n=k.nc();k.Gb(2),k.tc("columnMode","force")("headerHeight",50)("footerHeight",50)("rowHeight",50)("limit",8)("rows",n.rows)("columns",n.columns)}}var la,sa=((la=function(){function e(a,t,n,c,i,r,o,l,s,m,d,u,b){var g=this;_classCallCheck(this,e),this.dialog=a,this.snack=t,this.crudService=n,this.confirmService=c,this.loader=i,this.state=r,this.token=o,this.toastr=l,this.service=s,this.agent=m,this.data=d,this.router=u,this.retail=b,this.rows=[],this.columns=[],this.temp=[],this.role=this.state.role,this.state.user.subscribe((function(e){g.user=e}))}return _createClass(e,[{key:"ngOnInit",value:function(){this.getPartners(),this.columns=this.service.getDataConf(),this.rows=this.temp=this.retailers}},{key:"ngOnDestroy",value:function(){}},{key:"onActivate",value:function(e){"click"==e.type&&(console.log(e.row),this.agent.selectedretailer=this.retail.selectedretailer=this.data.selectedretailer=e.row,this.router.navigate(["/invoice/retailsummary"]))}},{key:"getPartners",value:function(){this.retailers=this.data.retailers}},{key:"updateFilter",value:function(e){var a=e.target.value.toLowerCase(),t=Object.keys(this.temp[0]);if(t.splice(t.length-1),t.length){var n=this.temp.filter((function(e){for(var n=0;n<=t.length;n++){var c=t[n];if(e[c]&&e[c].toString().toLowerCase().indexOf(a)>-1)return!0}}));this.rows=n}}},{key:"addRetailer",value:function(){var e=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;this.dialog.open(ra.a,{width:"720px",disableClose:!0}).afterClosed().subscribe((function(n){n&&(e.loader.open(),t?e.crudService.addRetailer(n).subscribe((function(a){e.retailers=e.retailers.concat([a]),e.data.retailers=e.retailers,e.loader.close(),e.snack.open("New Retailer Added!","OK",{duration:4e3})})):e.crudService.updateItem(a._id,n).subscribe((function(a){e.retailers=a,e.loader.close(),e.snack.open("Member Updated!","OK",{duration:4e3})})))}))}}]),e}()).\u0275fac=function(e){return new(e||la)(k.Vb(I.b),k.Vb(G.a),k.Vb(y.a),k.Vb(x.a),k.Vb(w.a),k.Vb(h.a),k.Vb(p.a),k.Vb(N.b),k.Vb(ia),k.Vb(Me),k.Vb(T.a),k.Vb(r.g),k.Vb(Le))},la.\u0275cmp=k.Pb({type:la,selectors:[["app-agent-sale-overview"]],decls:7,vars:1,consts:[[1,"m-333"],["mat-raised-button","","color","primary",1,"mb-05",3,"click"],["fxFlex","8px"],[1,"margin-333",2,"width","100%"],["matInput","","placeholder","Type to filter all columns","value","",3,"keyup"],["class","mat-box-shadow margin-333",4,"ngIf"],[1,"mat-box-shadow","margin-333"],[1,"material","bg-white",3,"columnMode","headerHeight","footerHeight","rowHeight","limit","rows","columns","activate"]],template:function(e,a){1&e&&(k.bc(0,"div",0),k.bc(1,"button",1),k.jc("click",(function(e){return a.addRetailer({},!0)})),k.Pc(2,"Add A new Retailer"),k.ac(),k.Wb(3,"span",2),k.ac(),k.bc(4,"mat-form-field",3),k.bc(5,"input",4),k.jc("keyup",(function(e){return a.updateFilter(e)})),k.ac(),k.ac(),k.Nc(6,oa,3,7,"div",5)),2&e&&(k.Gb(6),k.tc("ngIf",a.retailers))},directives:[A.b,E.a,R.b,S.b,i.m,s.c],styles:[""],data:{animation:v.a}}),la);function ma(e,a){if(1&e&&(k.bc(0,"mat-option",24),k.Pc(1),k.ac()),2&e){var t=a.$implicit;k.tc("value",t),k.Gb(1),k.Rc(" ",t," ")}}function da(e,a){1&e&&(k.bc(0,"mat-error"),k.Pc(1,"How many items should be on the Invoice"),k.ac())}function ua(e,a){if(1&e&&(k.bc(0,"div"),k.Nc(1,da,2,0,"mat-error",11),k.ac()),2&e){var t=k.nc();k.Gb(1),k.tc("ngIf",t.f.numberOfTickets.errors.required)}}function ba(e,a){if(1&e&&(k.bc(0,"mat-option",36),k.Pc(1),k.ac()),2&e){var t=a.$implicit;k.tc("disabled",0==t.status)("value",t),k.Gb(1),k.Uc(" ",t.name," - ",t.class," - GHC ",t.price," - Edition ",t.edition," ")}}function ga(e,a){1&e&&(k.bc(0,"mat-error"),k.Pc(1,"You must select an Item"),k.ac())}function fa(e,a){if(1&e&&(k.bc(0,"div"),k.Nc(1,ga,2,0,"mat-error",11),k.ac()),2&e){var t=k.nc().$implicit;k.Gb(1),k.tc("ngIf",t.controls.item.errors.required)}}function ha(e,a){1&e&&(k.bc(0,"small",38),k.Pc(1,"Quantity must have a value"),k.ac())}function pa(e,a){if(1&e&&(k.bc(0,"div"),k.Nc(1,ha,2,0,"small",37),k.ac()),2&e){var t=k.nc().$implicit;k.Gb(1),k.tc("ngIf",t.controls.quantity.errors.required)}}function ya(e,a){if(1&e){var t=k.cc();k.bc(0,"div"),k.bc(1,"h5",25),k.Pc(2),k.ac(),k.bc(3,"form",26),k.bc(4,"div",5),k.bc(5,"div",27),k.bc(6,"div",28),k.bc(7,"mat-label"),k.Pc(8,"Select and Item:"),k.ac(),k.bc(9,"mat-select",29),k.Nc(10,ba,2,6,"mat-option",30),k.ac(),k.Nc(11,fa,2,1,"div",11),k.ac(),k.ac(),k.bc(12,"div",31),k.bc(13,"div",28),k.bc(14,"mat-form-field",32),k.Wb(15,"input",33),k.ac(),k.Nc(16,pa,2,1,"div",11),k.ac(),k.ac(),k.Wb(17,"span",17),k.bc(18,"div",34),k.bc(19,"button",35),k.jc("click",(function(e){k.Gc(t);var n=a.index;return k.nc().removeitem(n)})),k.Pc(20,"Remove"),k.ac(),k.ac(),k.ac(),k.ac(),k.ac()}if(2&e){var n=a.$implicit,c=a.index,i=k.nc();k.Gb(2),k.Rc("Item ",c+1,""),k.Gb(1),k.tc("formGroup",n),k.Gb(7),k.tc("ngForOf",i.pitems),k.Gb(1),k.tc("ngIf",i.submitted&&n.controls.item.errors),k.Gb(5),k.tc("ngIf",i.submitted&&n.controls.quantity.errors)}}function va(e,a){1&e&&(k.bc(0,"button",39),k.Pc(1,"Discard Sale Return to Agents"),k.ac())}function xa(e,a){1&e&&(k.bc(0,"button",40),k.Pc(1,"Discard Sale Return to Retailers"),k.ac())}function wa(e,a){if(1&e){var t=k.cc();k.bc(0,"button",41),k.jc("click",(function(e){return k.Gc(t),k.nc().calculateSale()})),k.Pc(1,"Make Sale"),k.ac()}}function ka(e,a){if(1&e&&(k.bc(0,"div",42),k.bc(1,"div",43),k.Pc(2,"Total: "),k.bc(3,"b"),k.Pc(4),k.ac(),k.ac(),k.Wb(5,"span",44),k.bc(6,"div",43),k.Pc(7,"Sale After Discount: "),k.bc(8,"b"),k.Pc(9),k.ac(),k.ac(),k.Wb(10,"span",45),k.ac()),2&e){var t=k.nc();k.Gb(4),k.Rc("GHC ",t.totalsale,""),k.Gb(5),k.Rc("GHC ",t.afterdiscount,"")}}var Ca,Ta,Pa,Ia=((Ta=function(){function e(a,t,n,c,i,r,o){_classCallCheck(this,e),this.agent=a,this.crudService=t,this.fb=n,this.loader=c,this.toastr=i,this.data=r,this.router=o,this.submitted=!1}return _createClass(e,[{key:"ngOnInit",value:function(){this.selectedretailer=this.agent.selectedretailer,this.role=this.data.role,this.dynamicForm=this.fb.group({numberOfTickets:["",o.s.required],retailer:this.selectedretailer,discount:["",o.s.required],tickets:new o.c([])}),this.pitems=this.items=this.data.stocks,this.length=Array(this.items.length).fill(1).map((function(e,a){return a+1}))}},{key:"onChangeTickets",value:function(e){var a=e.value||0;if(this.t.length<a)for(var t=this.t.length;t<a;t++)this.t.push(this.fb.group({item:["",o.s.required],quantity:["",[o.s.required]]}));else for(var n=this.t.length;n>=a;n--)this.t.removeAt(n)}},{key:"highlight",value:function(e){console.log(e)}},{key:"itemchange",value:function(e){e.value.status=0,this.pitems=this.pitems.filter((function(a){return a.id!==e.value.id})),this.pitems=this.pitems.concat([e.value])}},{key:"removeitem",value:function(e){this.t.removeAt(e)}},{key:"onSubmit",value:function(){if(this.submitted=!0,!this.dynamicForm.invalid){var e=this.dynamicForm.value.tickets,a=this.dynamicForm.value.discount;this.totalsale=0;for(var t=0,n=e.length;t<n;t++)this.totalsale=this.totalsale+e[t].item.price*e[t].quantity;for(this.afterdiscount=this.totalsale*(1-a/100),t=1,n=this.dynamicForm.value.tickets.length;t<n;t++);}}},{key:"onReset",value:function(){this.submitted=!1,this.dynamicForm.reset(),this.t.clear()}},{key:"onClear",value:function(){this.submitted=!1,this.t.reset()}},{key:"calculateSale",value:function(){var e=this;this.loader.open(),this.crudService.agentCalculateSale(this.dynamicForm.value).subscribe((function(a){e.loader.close(),e.data.newsaledata=e.dynamicForm.value,e.router.navigate(["/invoice/preinvoice"]),e.toastr.success("succes",a)}),(function(a){e.loader.close(),e.toastr.error("error",a.error)}))}},{key:"f",get:function(){return this.dynamicForm.controls}},{key:"t",get:function(){return this.f.tickets}}]),e}()).\u0275fac=function(e){return new(e||Ta)(k.Vb(Le),k.Vb(y.a),k.Vb(o.d),k.Vb(w.a),k.Vb(N.b),k.Vb(T.a),k.Vb(r.g))},Ta.\u0275cmp=k.Pb({type:Ta,selectors:[["app-agent-new-sale"]],decls:34,vars:8,consts:[[1,"p-0"],[1,""],[1,"card-title-text"],[3,"formGroup","ngSubmit"],[1,"card","m-3"],["fxLayout","row wrap"],["fxFlex","100","fxFlex.gt-xs","30",1,"pr-1"],[1,"pt-1","pb-1"],["formControlName","numberOfTickets","required","",3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],["matSuffix","",1,"secondary-text"],[4,"ngIf"],["fxFlex","100","fxFlex.gt-xs","30"],["matInput","","placeholder","Discount","formControlName","discount","required",""],[4,"ngFor","ngForOf"],[1,"card-footer","text-center"],["mat-raised-button","","color","primary",1,"mb-05"],["fxFlex","8px"],["mat-raised-button","","color","warn","type","reset",1,"mb-05",3,"click"],["mat-raised-button","","class","mb-05","color","accent","routerLink","/invoice/home",4,"ngIf"],["mat-raised-button","","class","mb-05","color","accent","routerLink","/invoice/retail",4,"ngIf"],["mat-raised-button","","class","mb-05","color","accent",3,"click",4,"ngIf"],["fxFlex","200px"],["class","profile-title text-center mb-1",4,"ngIf"],[3,"value"],["colour","accent",1,"card-title"],[3,"formGroup"],["fxFlex","100","fxFlex.gt-xs","40",1,"pr-1"],[1,"pb-1"],["formControlName","item","required",""],[3,"disabled","value",4,"ngFor","ngForOf"],["fxFlex","100","fxFlex.gt-xs","40"],[1,"full-width"],["matInput","","name","quantity","formControlName","quantity","placeholder","Quantity (Min Length: 4, Max Length: 9)","value",""],["fxFlex","100","fxFlex.gt-xs","10"],["mat-raised-button","","color","primary",1,"mb-05",3,"click"],[3,"disabled","value"],["class","form-error-msg",4,"ngIf"],[1,"form-error-msg"],["mat-raised-button","","color","accent","routerLink","/invoice/home",1,"mb-05"],["mat-raised-button","","color","accent","routerLink","/invoice/retail",1,"mb-05"],["mat-raised-button","","color","accent",1,"mb-05",3,"click"],[1,"profile-title","text-center","mb-1"],[1,"main-title"],["fxFlex","100px"],["fxFlex","20px"]],template:function(e,a){1&e&&(k.bc(0,"mat-card",0),k.bc(1,"mat-card-title",1),k.bc(2,"div",2),k.Pc(3,"Selling Form"),k.ac(),k.Wb(4,"mat-divider"),k.ac(),k.bc(5,"mat-card-content"),k.bc(6,"form",3),k.jc("ngSubmit",(function(e){return a.onSubmit()})),k.bc(7,"div",4),k.bc(8,"div",5),k.bc(9,"div",6),k.bc(10,"mat-form-field",7),k.bc(11,"mat-label"),k.Pc(12,"Number of Items:"),k.ac(),k.bc(13,"mat-select",8),k.jc("selectionChange",(function(e){return a.onChangeTickets(e)})),k.Nc(14,ma,2,2,"mat-option",9),k.ac(),k.bc(15,"mat-icon",10),k.Pc(16,"outlined_flag"),k.ac(),k.Nc(17,ua,2,1,"div",11),k.ac(),k.ac(),k.bc(18,"div",12),k.bc(19,"mat-form-field",7),k.Wb(20,"input",13),k.ac(),k.ac(),k.ac(),k.Nc(21,ya,21,5,"div",14),k.bc(22,"div",15),k.bc(23,"button",16),k.Pc(24,"Calculate Sale"),k.ac(),k.Wb(25,"span",17),k.bc(26,"button",18),k.jc("click",(function(e){return a.onReset()})),k.Pc(27,"Reset"),k.ac(),k.Wb(28,"span",17),k.Nc(29,va,2,0,"button",19),k.Nc(30,xa,2,0,"button",20),k.Nc(31,wa,2,0,"button",21),k.Wb(32,"span",22),k.Nc(33,ka,11,2,"div",23),k.ac(),k.ac(),k.ac(),k.ac(),k.ac()),2&e&&(k.Gb(6),k.tc("formGroup",a.dynamicForm),k.Gb(8),k.tc("ngForOf",a.length),k.Gb(3),k.tc("ngIf",a.submitted&&a.f.numberOfTickets.errors),k.Gb(4),k.tc("ngForOf",a.t.controls),k.Gb(8),k.tc("ngIf",a.role.publisher),k.Gb(1),k.tc("ngIf",a.role.agent),k.Gb(1),k.tc("ngIf",a.afterdiscount),k.Gb(2),k.tc("ngIf",a.afterdiscount))},directives:[q.a,q.d,$.a,q.b,o.t,o.n,o.h,E.c,E.a,R.b,R.e,V.a,o.m,o.g,o.r,i.l,_.a,R.f,i.m,S.b,o.b,A.b,H.p,R.a,r.h],styles:[""]}),Ta),Ga=((Ca=function(){function e(a,t){_classCallCheck(this,e),this.data=a,this.crudeService=t}return _createClass(e,[{key:"resolve",value:function(e,a){var t=this;return new Promise((function(e,a){Promise.all([t.getStocks()]).then((function(){e()}),a)}))}},{key:"getStocks",value:function(){var e=this;return new Promise((function(a,t){e.data.stocks?(e.stocks=e.data.stocks,a(e.stocks)):e.crudeService.getStocks().subscribe((function(t){e.stocks=t.data,e.data.stocks=t.data,a(e.stocks)}),t)}))}}]),e}()).\u0275fac=function(e){return new(e||Ca)(k.fc(T.a),k.fc(y.a))},Ca.\u0275prov=k.Rb({token:Ca,factory:Ca.\u0275fac,providedIn:"root"}),Ca),Na=[{path:"",children:[{path:"home",component:L,data:{title:"home",breadcrumb:"HOME"},resolve:{subject:(Pa=function(){function e(a,t,n){_classCallCheck(this,e),this.router=a,this.crudeService=t,this.data=n}return _createClass(e,[{key:"resolve",value:function(e,a){var t=this;return new Promise((function(e,a){Promise.all([t.getPartners()]).then((function(){e()}),a)}))}},{key:"getPartners",value:function(){var e=this;return new Promise((function(a,t){e.data.partners?(e.partners=e.data.partners,a(e.partners)):e.crudeService.getPartners().subscribe((function(t){e.partners=t.data,e.data.partners=t.data,a(e.partners)}),t)}))}}]),e}(),Pa.\u0275fac=function(e){return new(e||Pa)(k.fc(r.g),k.fc(y.a),k.fc(T.a))},Pa.\u0275prov=k.Rb({token:Pa,factory:Pa.\u0275fac,providedIn:"root"}),Pa)}},{path:"agentsummary",component:X,data:{title:"agentsummary",breadcrumb:"AGENT SUMMARY"},resolve:{subject:P}},{path:"newsale",component:me,data:{title:"newsale",breadcrumb:"NEW SALE"},resolve:{subject:Fe}},{path:"retailsummary",component:ca,data:{title:"retailsummary",breadcrumb:"RETAIL SUMMARY"},resolve:{subject:Le}},{path:"retail",component:sa,data:{title:"retailhome",breadcrumb:"RETAIL HOME"},resolve:{subject:Me}},{path:"agentnewsale",component:Ia,data:{title:"agentnewsale",breadcrumb:"AGENT NEW SALE"},resolve:{subject:Ga}}]},{path:"preinvoice",component:Oe,data:{title:"preinvoice",breadcrumb:"AGREEMENT INVOICE"}}],Ra=t("MutI");t.d(a,"InvoiceModule",(function(){return Aa}));var Sa,Aa=((Sa=function e(){_classCallCheck(this,e)}).\u0275mod=k.Tb({type:Sa}),Sa.\u0275inj=k.Sb({factory:function(e){return new(e||Sa)},providers:[N.b,P],imports:[[i.c,o.i,l.a,s.d,m.a,d.a,u.a,f.a,S.c,q.c,A.c,Ra.c,o.q,l.a,b.b,g.a,r.k.forChild(Na)]]}),Sa)}}]);